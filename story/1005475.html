<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>用完美的灯塔得分打造最难访问的网站</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">用完美的灯塔得分打造最难访问的网站</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-06-07 02:34:37</div><div class="story_img_container"><img src="http://img.diglog.com/img/2020/6/902b6d2ef54e24740a370c3397483d8d.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></div><div class="page_narrow text-break page_content"><p>免责声明：这篇文章不是关于灯塔的，其他测试工具也有类似的表现。这关系到我们开发人员和我们不盲目依赖自动测试的责任。</p><p>谷歌的内置测试工具灯塔对我们网站的可访问性进行评判，得分在0到100之间。试图获得高分是值得称赞的，但100分并不意味着该网站是完全可访问的。来证明我做了一个小实验。</p><p>看到人们在社交媒体上发布他们的灯塔评分，以突出他们对自己或客户网站的优化程度，总是令人高兴的。这表明他们关心他们建造的东西的质量。</p><p>如果我们工作出色，灯塔就会奖励我们绿色圆圈中的数字100。这是你可以自豪地与你的客户或在Twitter上分享的东西。</p><p>衡量我们代码的质量很重要，但更重要的是我们要正确解释自动测试工具给我们的分数。如果灯塔告诉我们，我们的网站是100%可访问的，这并不意味着它是可以访问的。这只是意味着我们已经为手动测试奠定了基础。灯塔使用AXE-CORE可访问性测试库和一套自定义的测试规则。它指出了一些不好的做法，但不是所有的。其他做法本身并不坏，但如果我们滥用它们，可能是有害的。</p><p>仅靠自动测试是不能保证高质量的。为了证明这一点，我用完美的灯塔分数建造了可能最难访问的网站。</p><p>这里是Vadim Makeev对他的推文的回应，这条推文激发了我写这篇帖子的灵感。</p><p>那将是一本绝妙的读物！这里有一个用于11年审计的文件：`&lt；img src=picture.png alt=picture.png&gt；`</p><p>我认为这将是一个奇妙的想法，不只是试图与尽可能多的人打交道，而是得到一个完美的灯塔分数作为奖励。</p><p>让我们从容不迫地开始吧。我想确保CSS是对我的完美网站的依赖。为了实现这一点，我将向body元素添加隐藏属性。在CSS中，HIDDED是相当于DISPLAY：NONE；的HTML。(如果您想了解更多关于无障碍隐藏的信息，请查看Scott O‘Hara的Includsive Hidden)。</p><p>HIDDEN以可视方式隐藏内容，并将其从辅助功能树中删除。仅此一项就足以将所有人排除在外，并通过灯塔测试，但我不想让自己太容易做到这一点。我想创建一个完全无法访问的网站，从技术上讲，它仍然可以显示内容。因此，让我们添加一些CSS并带回我们的内容。</p><p>我们回到了以前的位置，但是如果用户想要访问我们站点上的内容，现在必须加载CSS。</p><p>让我们再添加一个依赖项。我不再应用以HTML显示内容的类，但我通过JS添加它。</p><p>太棒了！站点看起来仍然是一样的，但是为了让它显示任何东西，CSS和JS文件必须加载并正常工作。</p><p>完美的分数在一个CSS和JS唯一的网站。那太好了，不过我们可以做得更好。</p><p>有很多方法可以排除屏幕阅读器用户。最简单、最有效的方法是使用aria-idden=&#34；true；属性和值。此属性功能强大，我们必须谨慎使用它，因为它会从可访问性树中删除元素。通常，我们可能只使用它来通过删除多余或无关的内容来改善辅助技术用户的体验。在我们的网站上，我们把它放在身体元素上。</p><p>屏幕阅读器用户现在将体验到他们必须处理无法访问的站点的“罕见”时刻之一。*。</p><p>键盘用户可以通过按Tab键在页面中导航，以便从一个交互元素跳转到另一个交互元素。如果这些项目处于焦点位置，浏览器会显示它们周围的轮廓。</p><p>只需要3行CSS就可以将一整组人排除在访问站点之外。虽然，从技术上讲，他们仍然可以与之互动。他们不会再看到焦点指示器，但是交互元素仍然是表格。既然这个实验都是关于排除的，那么让我们确保键盘根本不能使用。</p><p>视力低下的人可以通过启用所谓的高对比度模式来改善Windows的对比度。</p><p>整个操作系统对包括浏览器和网站在内的所有应用程序都使用高对比度的颜色。</p><p>@媒体屏幕和(-ms-高对比度：激活){/*高对比度样式规则*/*{COLOR：#000000；}}。</p><p>此媒体查询中的规则仅在启用高对比度时适用。不幸的是，我们不知道主题使用的是哪种颜色，也不知道它是浅色还是深色的主题。将所有元素上的颜色设置为#000000可能起作用，也可能不起作用，具体取决于用户首选项。这个各占一半的机会对我来说还不够，但我们很幸运：Windows高对比度颜色映射到CSS系统颜色关键字。我们可以使用这些系统颜色关键字来确保我们的文本始终与我们的高对比度模式背景颜色匹配，无论它设置为什么。背景颜色映射到窗口。因此，让我们使用背景颜色值作为所有元素的文本颜色。</p><p>哦，伙计。这太邪恶了。我的LinkedIn收件箱将装满Facebook和Uber等公司提供的工作机会。</p><p>光标：None；对于鼠标用户就像Outline：None；对于键盘用户一样。最初很难找到方向，但交互式元素仍然可以点击。让我们通过再次降低用户体验来提高我们的应用程序的质量。</p><p>指针事件：无；将我们的用户从点击我们站点上的任何东西的能力中解放出来。这个属性得到了很好的支持，但是如果我们想要确保这个特性能在尽可能多的浏览器上运行，我们可以应用一个称为渐进式降级™的原则。</p><p>函数removeA11y(){if(&#34；pointerEvents&#34；in document.body.style){控制台。日志(&#39；指针-支持的事件)返回；}文档。addEventListener(&#39；单击&#39；，函数(E){e.。PrevenentDefault()；})}removeA11y()；</p><p>如果浏览器不支持POINTER-EVENTS属性，则此JavaScript回退将生效并从所有元素中删除单击事件。</p><p>我们不能再使用鼠标或键盘，但我们仍然可以阅读折叠上方的内容。让我们对此做点什么吧。</p><p>在不同的浏览器中测试该站点时，我注意到它仍然可以在Safari中以阅读器模式访问。</p><p>事实证明，可以通过在正文中定义较小的字体大小来禁用Reader模式。</p><p>视力低下和视力良好的人、鼠标、键盘和屏幕阅读器用户都无法访问该网站。如果浏览器高级用户遇到这样的站点，可能会唤醒他们内心的Zero Cool，他们会试图入侵该站点。我所说的黑客是指查看页面源代码。</p><p>为了将樱桃放在排除第一站点的顶部，我将文本转换为html实体。实体通常用于显示保留字符、不可见字符和使用标准键盘难以键入的字符。我用它们来混淆我们网站上的文本。</p><p>我写这篇文章的目的不是贬低灯塔或斧芯，也就是灯塔背后的引擎。我经常使用这两种工具，我很高兴我有它们。这篇文章是关于你和我的。分数表明了我们应用程序和网站的质量，但我们不能盲目相信这些数字。我们必须明白，自动测试只是第一步。下次当你看到灯塔得分很高，你想结束这一天时，请阅读分数旁边的课文。</p><p>这些检查突出显示了提高Web应用程序可访问性的机会。只有可访问性问题的子集可以被自动检测，因此也鼓励手动测试。</p><p>在该段下面，您会发现应该手动测试的附加项目列表，以及解释如何进行辅助功能检查的页面链接。</p><p>我们测试和优化我们的网站并不是因为高分给我们带来的好感。我们这么做是因为我们想，也必须确保我们建造的东西能让尽可能多的人接触到。我们在设计和开发时并不完全依赖自动化，在测试时也不应该这样做。</p></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.matuzo.at/blog/building-the-most-inaccessible-site-possible-with-a-perfect-lighthouse-score/">https://www.matuzo.at/blog/building-the-most-inaccessible-site-possible-with-a-perfect-lighthouse-score/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/得分/">#得分</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/病毒/">#病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/冠状病毒/">#冠状病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/app/">#app</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>