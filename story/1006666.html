<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>对2014年世界杯决赛的探索性统计分析</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">对2014年世界杯决赛的探索性统计分析</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-06-15 23:10:50</div><div class="story_img_container"><img src="http://img.diglog.com/img/2020/6/bef0e6b2c4d8d3346e8e8b90f113164a.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></div><div class="page_narrow text-break page_content"><p>作为一个既喜欢数据又喜欢足球(从这里开始称为足球)的球迷，我觉得足球迷对统计和数据分析的态度令人费解，尽管可以理解，因为多年来简单的统计数据是媒体唯一关注的事情。足球是一项复杂的团队运动，具有深度互动，因此计入事件(进球、助攻、铲球等)。这是不够的。本笔记本向您展示了如何使用逐场比赛数据来分析足球比赛，显示自定义测量和可视化以更好地理解这项运动。免责声明：我是球迷，不是专家。[德国国家队](德国国家队)和[曼城](德国国家队)都有专门从事数据分析的团队，技术/新闻/10959864/Germanys-World-Cup-Tateby-Shared-by-data.html(德国国家队)和[曼城](2014年/01/Feature/the-Winning-Format)都致力于数据分析，最先进的水平远远高于这里所显示的水平。(注：德国队国家队致力于数据分析)和[曼城](曼城)都有致力于数据分析的整个团队，而且最先进的水平远远高于这里所显示的水平。然而，这种分析很少公开，所以我希望这是有用的(或者至少是有趣的)。我希望在未来继续玩弄这些数据，并分享有用的见解。请随时关注GitHub存储库，或者给我发电子邮件：rjtavares@gmail.com。#数据备注本实况数据来自公共网站，不能保证数据的一致性或正确性。用来收集的过程将是它自己帖子的主题，所以请继续关注。另一方面，所有基于原始数据的计算都包含在这个笔记本中，应该受到质疑。我很想得到一些反馈。</p><p>模块导入和数据准备。除非您想自己操作数据，否则可以忽略此部分。</p><p>将熊猫作为PD导入Numpy作为NP将matplotlib.pylot作为PLT从Footyscript导入.Foyviz导入DRAW_EVENTS，DRAW_PITCH，TYPE_NAMES#Ploting设置%matplotlib inlinepd.options.display.mpl_style=&#39；default&#39；</p><p>df=pd.read_csv(&#34；../datasets/germany-vs-argentina-731830.csv&#34；，coding=&#39；utf-8&39；，index_col0)#标准维度x_SIZE=105.0y_SIZE=68.0box_Height=16.5y*2+7.32box_width=16.5y_box_start=y_SIZE/2-BOX_HEIGH/2Y_BOX_END=y_SIZE/2+BOX_HEIGH/2#数据集比例为100×100。标准化标准足球场大小df[&#39；x#39；]=df[&#39；x&#39；]/100*x_size df[&#39；y&#39；]=df[&#39；y&#39；]/100*y_sizedf[&#39；to_x&39；]=df[&#39；to_x&39；]/100*x_sizedf[&#39；to_y。]=df[&#39；to_y&#39；]/100*y_size#根据原始df[&#39；count&#39；]=1df[&#39；dx&#39；]=df[&#39；to_x&#39；]-df[&#39；x&#39；]df[&#39；dy&#39；]=df[&#39；to_y&#39；]=df[&#39；count&#39；]=1df[&#39；dx&#39；]-df[&#39；to_y&#39；]=df[&#39；to_y&#39；]-df[&#39；y&#39；]df[&#39；距离&#39；]=np.sqrt(df[&#39；dx&#39；]**2+df[&#39；dy&#39；]**2)df[&#39；五分钟&#39；]=np.地板(df[&#39；min&#39；]/5)*5df[&#39；type_name&#39；]=df[&#39；类型&#39；]。map(type_names.get)df[&#39；to_box&#39；]=(df[&#39；to_x&#39；]&gt；x_size-box_width)&amp；(y_box_start&lt；df[&#39；to_y&#39；])&amp；(df[&#39；to_y&#39；]&lt；y_box_end)df[&#39；From_box&#39；]=(df[&#39；x&#39；]&gt；x_size-box_width)&amp；(y_box_start&lt；df[&#39；y&#39；])&amp；(df[&#39；y&#39；]&lt；y_box_end)df[&#39；on_offense&#39；]=df[&#39；x&#39；]=df[&#39；x&#39；]&gt；x_size/2。</p><p>#将主数据帧预分片在较小的DFS中，这些DFS将沿记事本重复使用df周期1=df[df[&#39；句号&#39；]==1]dfP1Shots=dfPerod1[dfPerod1[&#39；类型&#39；].isin([13，14，15，16])]dfPerio2=df[df[&#39；句号&#39；]==2]dfP2Shots([13，14，15，16])]dfPerod2=df[df[&#39；句号&#39；]==2]dfP2Shots。].isin([13，14，15，16])]dfExtraTime=df[df[&#39；PERIOD&#39；]&gt；2]dfETShots=dfExtraTime[dfExtraTime[&#39；type&#39；].isin([13，14，15，16])]。</p><p>让我们快速了解一下上半场的情况。下面的图表显示了赛场上发生最多事件的地方(正数对应于德国队的进攻半场，负数对应于防守半场)，并指出了每支球队的投篮命中率。</p><p>FIG=PLT.Figure(FigSize=(12，4))avg_x=(dfPerod1[dfPerod1[&#39；Team_Name&#39；]==&#39；德国&#39；].groupby(&#39；min&#39；)。Apply(NP.means)[&#39；x&#39；]-dfPerod1[dfPerod1[&#39；Team_Name&#39；]==&#39；阿根廷&#39；].groupby(&#39；min&#39；)。Apply(np.means)[&#39；x&#39；])PLT.stacklot(list(avg_x.index.values)，List([x if x&gt；0 Else 0 for x in avg_x]))PLT.stacklot(list(avg_x.index.values)，list([x if x&lt；0 Else 0 for x in avg_x]))for i，在dfP1Shots.iterrow()中拍摄：]y=avg_x.ix[拍摄[&#39；min&#39；]]信号=1，如果拍摄[&#39；团队名称&#39；]==&#39；德国&#39；否则-1 pl</p><p>DRAW_PING()DRAW_EVENTS(dfPerod1[(dfPerod1[&#39；type&#39；]]==1)&amp；(dfPerod1[&#39；Result&#39；]==1)&amp；(dfPerod1[&#39；Team_Name&#39；]==&#39；阿根廷&#39；)]，Mirror_away=True)PLT.text(x_size/4，-3，&#34。，color=&#39；Black&#39；，BBox=dict(facecolor=&#39；White&39；，alpha=0.5)，水平对齐=&#39；center&#39；)PLT.text(x_size*3/4，-3，&#34；阿根廷国防&34；，color=#39；Black&39；，bbox=dict(facecolor=&#39；White&#39；)，BBox=dict(facecolor=&#39；White&#39；)Plt.text(x_size*3/4，-3，&#34；阿根廷国防，color=#39；Black&39；，BBox=dict(facecolor=&#39；White&#39；)。中锋)PLT.title(阿根廷队上半场传球)。</p><p>阿根廷队只有28%的传球是在进攻半场进行的，而德国队的传球比例是61%。尽管德国队在进攻型半场踢球，但他们的传球准确率要高得多，这证明了他们令人惊叹的中场。然而，这种优势并没有体现在机会和投篮上。事实上，德国队很难进入阿根廷的禁区。</p><p>DRAW_PING()DRAW_EVENTS(df[(df[&#39；to_box&#39；]==True)&amp；(df[&#39；type&#39；]==1)&amp；(df[&#39；from_box&#39；]=false)&amp；(df[&#39；句号&#39；]==1)&amp；(df[&#39；type&#39；]==39；]==1)]，MIRROR_AWAY=True)Df[(DF[&#39；to_box&#39；]==True)&amp；(DF[&#39；type&#39；]==1)&amp；(DF[&#39；FROM_BOX&#39；]==FALSE)&amp；(DF[&#39；句点&#39；]==1)&amp；(DF[&#39；结果&#39；]==0)]，MIRROR_Away=True，alpha=0.2)DRAW_EVENTS(dfP1Shots，MIRROR_Away=True，base_color=&#39；#a93e3e&#39；)PLT.text(x_size/4，-3，&#34；德国国防&34；，color=&#39；黑；，bbox=dict(facecolor=&#39；白色&#39；)PLT.text(x_size*3/4，-3，&#34；阿根廷的防守，color=&#39；黑色；，bbox=dict(facecolor=&#39；白色&39；，alpha=0.5)，HorontalAlignment=&#39；center&#39；)。</p><p>在16次德国队企图进入禁区的情况下，只有一次射门：最后一次角球，豪伊德斯击中了门柱。</p><p>克莱默在第19分钟受伤，但12分钟后才被换下。这包括德国上半年最糟糕的时期，正如上面的上半年概况图所示。[报道称他的行为很混乱](http：//www.theGuardian.com/focal/2014/jul/17/Christoph-Kramer-德国-脑震荡-世界杯-决赛-2014)，数据显示，在受伤和替补期间，克莱默基本上缺席了：他唯一的行动是一次成功的接球和传球，以及一次失去控球权。</p><p>分数={&#39；1-阵容&#39；：0，#39；1-带球跑动&#39；：0.5，&#39；1-接发球&#39；：0，&#39；1-传球&#39；：1，&#39；0-传球&#39；：-1，&#39；0-铲球(无控制)&#39；：0，&#39；1-清球(球场外)&#39；：0.5，&#39；0-失去对球的控制&#39；：-1，&#39；1-替补(关闭)&#39；：0}dfKramer[&#39；得分&#39；]=dfKramer[&#39；action&#39；]。map(scrip.get)。</p><p>下半场要平衡得多。我们复制了与上半年相同的图表，这证实了这种看法。</p><p>FIG=PLT.Figure(FigSize=(12，4))avg_x=(dfPerod2[dfPerod2[&#39；Team_Name&#39；]==&#39；德国&#39；].groupby(&#39；min&#39；)。Apply(NP.means)[&#39；x&#39；]-dfPerio2[dfPerod2[&#39；Team_Name&#39；]==&#39；阿根廷&#39；].groupby(&#39；min&#39；)。Apply(NP.means)[&#39；x&#39；])PLT.stacklot(list(avg_x.inde.values)，List([x if x&gt；0 Else 0 for x for x in avg_x]))PLT.stacklot(list(avg_x.index.values)，list([x if x&lt；0 Else 0 for x in avg_x]))，拍摄在dfP2Shots.iterrow()中。]y=avg_x.ix[Shot[&#39；min&#39；]]Signal=1 if shot[&#39；Team_Name&#39；]==&#39；德国&#39；Else-1 PLT.Annotate(s=(Shot[&#39；type_name&#39；]+&#39；+Shot[&#39；Team_Name&#39；][0]+&#34；)&#34；)，xy=(x，y)，xytext=(x-5，y+30*信号)，arrowprops=dict(facecolor=&#39；Black&#39；)PLT.gca().set_xlabel(&#39；分钟&#39；)PLT.title(&#34；下半部轮廓&#34；)</p><p>DRAW_PING()DRAW_EVENTS(df[(df[&#39；to_box&#39；]==True)&amp；(df[&#39；type&#39；]==1)&amp；(df[&#39；from_box&#39；]=false)&amp；(df[&#39；句号&#39；]==2)&amp；(df[&#39；type&#39；]==39；]==1)]，MIRROR_AWAY=True)Df[(DF[&#39；to_box&#39；]==True)&amp；(DF[&#39；type&#39；]==1)&amp；(DF[&#39；FROM_BOX&#39；]==FALSE)&amp；(DF[&#39；句点&#39；]=2)&amp；(DF[&#39；结果&#39；]==0)]，MIRROR_AWAY=True，alpha=0.2)DRAW_EVENTS(dfP2Shots，MIRROR_Away=True，base_color=&#39；#a93e3e&#39；)PLT.text(x_size/4，-3，&#34；德国国防&34；，color=#39；黑色；，bbox=dict(facecolor=&#39；白色&#39；，)PLT.text(x_size*3/4，-3，&#34；阿根廷的防守，color=&#39；黑色；，bbox=dict(facecolor=&#39；白色&39；，alpha=0.5)，HorontalAlignment=&#39；center&#39；)。</p><p>尽管德国队在下半场更成功地进入禁区，但只有传球才能让德国队在禁区内射门。</p><p>FIG=PLT.Figure(FigSize=(12，4))avg_x=(dfExtraTime[dfExtraTime[dfExtraTime[&#39；Team_Name&#39；]==&#39；德国&#39；].groupby(&#39；min&#39；))。Apply(NP.means)[&#39；x&#39；]-dfExtraTime[dfExtraTime[&#39；Team_Name&#39；]==&#39；阿根廷&#39；].groupby(&#39；min&#39；)。Apply(NP.means)[&#39；x&#39；].reindex(dfExtraTime[&#39；min&#39；].Unique()，Fill_Value=0))PLT.stacklot(list(avg_x.index.values)，list([x if x&gt；0 Else 0 for x for x in avg_x]))PLT.stacklot(list(avg_x.index.values)，list([x if x&lt。对于i，在dfETShots中拍摄。iterows()：x=拍摄[&#39；min&#39；]y=avg_x.ix[拍摄[&#39；min&#39；]]信号=1，如果拍摄[&#39；团队名称&#39；]==&#39；德国&#39；否则-1 PLT.Annotate(s=(拍摄[&#39；type_name&#39；])信号=1如果拍摄[&#39；团队名称&#39；]==&#39；德国&#39；否则-1 PLT.Annotate(s=(拍摄[&#39；类型名称&#39。(&#39；+Shot[&#39；Team_Name&#39；][0]+&#34；)&#34；)，xy=(x，y)，xytext=(x-5，y+20*Signal)，Arrowprops=dict(facecolor=&#39；Black&#39；)PLT.gca().SET_xLabel(&#39；分钟&#39；)PLT.title(&#34；加时配置文件&。</p><p>我们可以看到，德国队的第四节与比赛的其余部分有很大的不同。德国队在球场上打得少了很多，传球次数也明显减少：显示出它试图控制比赛，放慢速度，放弃防线。如果我们看一下进球后的时间间隔，这一点就更加明显：</p><p>DRAW_PING()DRAW_EVENTS(df.ix[Goal_ix+1：][(df[&#39；to_box&#39；]==True)&amp；(df[&#39；type&#39；]==1)&amp；(df[&#39；from_box&#39；]==false)&amp；(df[&#39；to_box&#39；]==False；]==1)]，Mirror_away=True)Df.ix[Goal_ix+1：][(DF[&#39；to_box&#39；]==True)&amp；(df[&#39；type&#39；]==1)&amp；(df[&#39；from_box&#39；]==false)&amp；(df[&#39；to_box&#39；]==39；]==0)]，MIRROR_AWAY=True，alpha=0.2)DRAW_EVENTS(df.ix[Goal_ix+1：][df[&#39；type&#39；].isin([13，14，15，16])]，MIRROR_Away=True，base_color=&#39；#a93e3e&#39；)PLT.text(x_size/4，-3，&#34；德国&#39；防御&#34；，color=&#39；Black&#39；，BBox=dict(facecolor=&#39；White&39；，alpha=0.5)，水平对齐=&#39；center&#39；)PLT.text(x_size*3/4，-3，&#34；阿根廷国防&34；，color=#39；Black&39；，bbox=dict(facecolor=&#39；White&#39；)，BBox=dict(facecolor=&#39；White&#39；)Plt.text(x_size*3/4，-3，&#34；阿根廷国防，color=#39；Black&39；，BBox=dict(facecolor=&#39；White&#39；)。中心(#39；)。</p><p>德国队完全放弃了再进一球的尝试，只有一次传球进入禁区。然而，它的防守策略是成功的，阿根廷几乎没有进入德国的禁区。这只有两次射门来自禁区外，都是梅西的射门，他在这一点上可能感到有点绝望。</p><p>简而言之：克鲁斯和施魏因斯泰格是德国的代表。克鲁斯有最多的防守动作，第二多的投篮(仅次于梅西，因为他绝望的最后时刻)，第二多的传球。他也为德国队进球领先的比赛取得了大部分进步负责。客观上，他是这场比赛的最佳人选。为什么国际足联决定将这个奖项颁发给戈茨，我(和大多数球迷)都无法理解。</p><p>足球是一项太空游戏。这就是为什么[停放公交车实际上可以让你赢得match](http://www.mirror.co.uk/sport/football/news/liverpool-vs-chelsea-jose-mourinho-3469108).]的原因。使用的数据集仅包括球员主动进攻和防守动作的位置。防守位置因此被完全忽视，甚至连进攻打法都缺乏重要信息：球员在没有球的情况下跑动可能比传球得分要重要得多。</p></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://beta.deepnote.com/article/statistical-analysis-of-2014-world-cup-final">https://beta.deepnote.com/article/statistical-analysis-of-2014-world-cup-final</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/决赛/">#决赛</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/德国队/">#德国队</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/app/">#app</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/病毒/">#病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/冠状病毒/">#冠状病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>