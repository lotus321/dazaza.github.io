<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Linus拒绝“超越愚蠢”AWS制造的Linux补丁</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Linus拒绝“超越愚蠢”AWS制造的Linux补丁</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-06-04 08:32:52</div><div class="story_img_container"><img src="http://img.diglog.com/img/2020/6/79e3e57968d2f382ab4eeb13b24bec32.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></div><div class="page_narrow text-break page_content"><p>Linux内核负责人Linus Torvalds销毁了亚马逊网络服务(AWS)工程师提供的一个补丁，该补丁旨在缓解今年早些时候一名AWS工程师发现的针对英特尔CPU的Snoop攻击。</p><p>3月份披露了所谓的Snoop辅助的L1数据采样或Snoop(CVE-2020-0550)攻击，这些攻击影响到一系列英特尔至强和酷睿CPU。</p><p>AWS工程师Pawel Wieczorkiewicz发现了一种方法，可以通过位于CPU内核中的L1D高速缓存，通过总线监听(在L1D中修改数据时发生的高速缓存更新操作)泄漏英特尔CPU内存中的数据。</p><p>在这一消息披露之后，AWS工程师Balbir Singh为Linux内核提出了一个补丁，使应用程序能够在任务切换时选择加入刷新L1D缓存。</p><p>辛格在4月份解释说，这可以保护他们的数据不会在任务上下文切换后通过旁路被窥探或泄露。该修补程序计划随Linux内核5.8版一起提供。</p><p>该功能将允许基于选择加入的应用程序调用prctl(2)，以便在任务离开CPU时刷新该任务的L1D缓存(假设硬件支持它)。</p><p>但是，正如Phoronix发现的那样，Torvalds相信补丁将允许选择加入补丁的应用程序降低其他应用程序的CPU性能。</p><p>托瓦尔兹昨天写道，因为在我看来，这基本上就是将缓存刷新指令导出到用户空间，并给进程提供了一种只需说出减慢我安排的其他任何人的速度的方法。</p><p>换句话说，据我所知，这让疯狂的英特尔发布了有缺陷的CPU，它会导致虚拟化代码出现问题(我并不太在意这一点)，并将其变成任何人都可以选择加入这种疾病的疾病，现在它甚至会影响不需要它的人和CPU，以及它完全没有意义的配置。在这种情况下，任何人都可以选择加入这一疾病，而现在它甚至会影响到不需要它的人和CPU，以及它完全没有意义的配置。在这种情况下，它会导致虚拟化代码出现问题(我并不太在意这一点)，并将其转变为任何人都可以选择加入这种疾病，现在它甚至会影响到不需要它的人和CPU，以及它完全没有意义的配置。</p><p>我不想让某些应用程序运行。哦，我很特别，很漂亮，而且是如此精致的一朵花，以至于我想刷新每个任务开关上的L1D，不管我在哪个CPU上，也不管有没有勘误表。因为这款应用程序不仅降低了自身的运行速度，还降低了其他应用程序的运行速度。</p><p>托瓦尔兹提到的虚拟化是针对AWS的，与其他云提供商一样，AWS销售的虚拟CPU通常启用了同步多线程(SMT)。</p><p>他接着指出，启用SMT后，它应该完全禁用这种疯狂的伪安全，因为在那种情况下它是完全没有意义的。</p><p>至少，启用SMT应该完全禁用这种疯狂的伪安全，因为在那种情况下它是完全没有意义的。他说，在SMT开启的情况下，计划根本不是同步点，所以说我当然会在上下文切换时刷新L1是非常愚蠢的。</p><p>在与辛格的一次讨论中，托瓦尔兹指出，在SMT上刷新L1D$是疯狂的，因为攻击者只会坐在兄弟核心上，在*任务切换发生之前*攻击L1内容。</p><p>正如注册中心所指出的那样，AWS首席工程师Benjamin Herrenschmidt在与Red Hat Linux内核贡献者Ingo Molnar的讨论中也为关于补丁的辩论增加了一些背景。</p><p>Herrenschmidt承认该补丁对SMT毫无意义，但他敦促内核开发者不要随波逐流，并驳斥了该补丁是因为AWS想要将超线程作为虚拟CPU销售的说法。</p><p>赫伦施密特写道，不一定也不是在所有情况下。&#34；是的，虚拟机通常会启用SMT。不过，这并不是针对他们的。他说，讨论期间给出的一个例子是属于不同用户的容器。</p><p>另一个示例是，与系统的其余部分相比，进程处理更关键的数据(如支付信息)，并且希望保护自己(或管理员希望保护该进程)，使其不会将数据泄露给不太受信任的进程。&#34；</p><p>&#34；AWS不仅仅有VM可供租用：-)我们的用户可以使用一大堆更高级别的服务，而不是所有这些服务都必须在按vCPU收费的VM上运行。&#34；</p><p>Herrenschmidt说，这些补丁并不是试图解决运行SMT的客户虚拟机内部发生的问题，也不是为了保护虚拟机免受同一系统上其他虚拟机的攻击。</p></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.zdnet.com/article/linus-torvalds-rejects-stupid-aws-made-linux-patch-for-intel-cpu-snoop-attack/">https://www.zdnet.com/article/linus-torvalds-rejects-stupid-aws-made-linux-patch-for-intel-cpu-snoop-attack/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/拒绝/">#拒绝</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/rejects/">#rejects</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/cpu/">#cpu</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1005058.html"><img src="http://img.diglog.com/img/2020/6/thumb_1f1c5434c03ebe578895346cad065c5a.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1005058.html">联想相信Linux桌面</a></div><span class="my_story_list_date">2020-6-4 6:20</span></div><div class="col-sm"><div><a target="_blank" href="/story/1005051.html"><img src="http://img.diglog.com/img/2020/6/thumb_d3e38c2ac11685b7c1a8112b3d521025.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1005051.html">TrueNAS没有放弃BSD，但它正在采用Linux</a></div><span class="my_story_list_date">2020-6-4 5:18</span></div><div class="col-sm"><div><a target="_blank" href="/story/1004897.html"><img src="http://img.diglog.com/img/2020/6/thumb_0d97112dd91b88a3c6aa79880917f6d2.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1004897.html">联想为ThinkPad和ThinkStation Workstn产品组合带来Linux认证</a></div><span class="my_story_list_date">2020-6-3 5:16</span></div><div class="col-sm"><div><a target="_blank" href="/story/1004840.html"><img src="http://img.diglog.com/img/2020/6/thumb_97cbd169f6a8df9ddf26ab49d2a8b86f.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1004840.html">Snakeware-Linux发行版，具有受Commodore 64启发的Python用户空间</a></div><span class="my_story_list_date">2020-6-2 23:13</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/病毒/">#病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/冠状病毒/">#冠状病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/app/">#app</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>