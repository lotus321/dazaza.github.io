<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Hasura Cloud：为您的数据库和服务管理GraphQL</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Hasura Cloud：为您的数据库和服务管理GraphQL</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-06-23 02:46:20</div><div class="story_img_container"><img src="http://img.diglog.com/img/2020/6/6181d65fff403c45fbfc87e82bec1e35.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></div><div class="page_narrow text-break page_content"><p>这是我们自今年1月以来一直在努力的事情。我们使用核心的Hasura GraphQL引擎作为基础，确保我们能够提供Hasura作为云产品，其中您不需要考虑实例数量、内核、内存、并发用户数、高可用性、实时监控、缓存、跟踪、速率限制和其他基础设施方面的问题，而不是您真正想要花费时间的事情。</p><p>对于那些刚接触Hasura的人来说，Hasura GraphQL引擎是一项开源服务，它使用元数据引擎连接到新的或现有的数据源(如Postgres、REST API、GraphQL API等)，并提供内部或外部应用程序可以连接到的托管且安全的GraphQL端点。</p><p>我们想让API开发者看不到GraphQL，并给API消费者一个他们喜欢的GraphQL API。对我们来说，合乎逻辑的下一步是将Hasura GraphQL引擎作为托管云服务提供。</p><p>Hasura的每个实例都是一个高度多线程的服务器，它利用实例中的共享内存在运行时积极优化GraphQL查询的处理。如果您自己运行Hasura，您可以先垂直缩放几个Hasura实例，然后再水平缩放。您应该纵向扩展或横向扩展的CPU或内存阈值是多少？井…。这要看情况。Hasura的足迹对于不同类型的工作负载是不同的。</p><p>如果你在Hasura Cloud上运行，你不需要在意！Hasura Cloud不会要求您考虑实例数量、内核、内存、阈值等。将您的数据库和其他服务连接起来，它就能正常工作。</p><p>您可以不断增加并发用户数和API调用数，Hasura Cloud将会弄清楚如何确保您的GraphQL API持续提供。🤓。</p><p>最终，API性能将成为数据库的瓶颈。Hasura Cloud附带监控和跟踪功能，可帮助您了解数据库查询性能，并让您深入了解要做什么。大多数DBaaS供应商使垂直扩展Postgres或将已读副本添加到主Postgres服务器变得非常容易。</p><p>顺便说一句，如果您的上游服务也是以无状态方式编写的，特别是当您使用具有无服务器功能或自动伸缩容器的操作时，那么云供应商也会自动扩展这些服务。🤘</p><p>Hasura GraphQL引擎已经提供了查询缓存，其中缓存了完全限定的GraphQL AST的内部表示，因此不需要重新计算它的计划。例如，当一个带有变量和会话变量的GraphQL查询进入时，生成的SQL已经准备好作为语句，并且精确的最终用户基于会话的变量和动态API变量(查询变量)被放大到数据库。这使得Hasura的查询非常快。</p><p>Hasura cloud更进一步，增加了对数据缓存的支持。我们已经迈出了第一步，还有很多事情要做，但下面是Hasura Cloud对缓存的看法，这是我们API开发人员通常在我们的应用服务器中构建的东西。</p><p>应用程序级缓存有很多目的，但最常见的要求通常是减少底层数据源的负载。</p><p>如果API调用不依赖于用户的属性，那么可以直接说所有API调用都将获取相同的数据。可以从高速缓存中检索高速缓存的数据并将其发送给API使用者。</p><p>如果API调用依赖于用户的属性，那么我们需要知道是否因为用户的身份，他们最终会获取其他用户已经缓存的相同数据。假设同一地区的每个人都在他们的应用程序上获取相同的餐厅列表。这是一个动态规则，因为用户可以更改他们的当前区域，因此获取哪些缓存实体取决于此时谁在进行API调用。</p><p>在计算机科学中有两个难题：高速缓存失效、命名事物和Off-by-1错误。</p><p>-Leon Bamrick(@SecretGeek)2010年1月1日。</p><p>当用户进行执行写入的API调用时，很难破坏同一个API服务器或API服务器的其他实例正在使用的缓存。</p><p>这是物化视图动态更新问题的一个版本，但是在可能从多个数据源获取的应用程序级别。这通常就是为什么大多数使用Redis之类的应用服务器开发人员通常使用#1(知道要缓存什么)中的信息来设置TTL，并处理UI端的临时过时问题的原因。</p><p>因为Hasura有足够的跨数据源数据模型的信息，而应用程序级的授权规则有足够的信息通过解决上述所有问题来提供端到端的应用程序缓存。</p><p>今天，我们推出了对缓存共享数据的经过身份验证的GraphQL API调用的支持(问题1)。今天我们如何处理缓存失效？我们使用TTL配置，以便在一定时间间隔内刷新状态数据。</p><p>好消息是，由于API写入和工作流通过Hasura(GraphQL突变)，Hasura最终也可以处理自动缓存无效！</p><p>除了监控来自GraphQL API调用及其响应的成功错误(和部分错误)之外，Hasura Cloud还添加了对监控WebSocket连接和订阅的强大支持！</p><p>生产中会发生奇怪的事情，很难知道问题是从哪里来的。在生产中端到端地跟踪请求和响应，并通过系统中的各种组件进行跟踪是至关重要的。</p><p>Hasura充当GraphQL API使用者、数据模型和通过HTTP(GraphQL远程模式或REST API操作或事件触发器)引入的自定义业务逻辑或外部服务之间的支点和协调点。</p><p>Hasura Cloud增加了与OpenTracing的深度集成，因此它可以创建跟踪，或尊重传入的跟踪范围。Haura还将跟踪ID和SPAN-ID转发到服务，以便可以在整个系统中轻松收集分布式跟踪。例如，这是从Hasura Forwarding to an Action收集的跟踪，它与数据库交互，然后当Hasura端到端可视化时，数据库的响应会得到丰富。</p><p>今天，Hasura Cloud支持将Datadog作为发送跟踪的目标，随着时间的推移，我们将迅速增加更多支持OpenTracing的供应商。</p><p>当您在生产环境中运行GraphQL API时，可能需要添加一些速率限制规则。尤其是如果您的API是面向API的开发人员，而不仅仅是由应用程序使用。通过速率限制，您可以确保您的服务器和数据源不会受到恶意用户的突然攻击，还可以确保您的客户或租户在合理的限制内使用您的API。</p><p>根据您希望速率限制的用途，您需要在各种并发API请求之间保持某种状态，以“计算”用户的限制。</p><p>Hasura Cloud为未经认证的用户提供速率限制(基于IP)或通过终端用户会话变量参数化。速率限制规则可以根据上述参数设置每分钟最大请求数，也可以设置查询深度限制。随着时间的推移，我们还将添加对基于动态查询成本的限制的支持！</p><p>Hasura Cloud捕获查询(可选择剥离会话和查询变量，因为它们可能是敏感的)，并将其提供给您用于两个主要用途：</p><p>您可以导出Hasura在给定时间窗口捕获的一组GraphQL查询和突变，然后将其用于各种事情。</p><p>回归测试：当您进行更改时，您可以在Hasura控制台或您最喜欢的测试运行器中针对您的试运行环境运行测试！这样，您就可以知道您对Hasura所做的任何更改是否会影响您在生产中看到的GraphQL查询。</p><p>允许列表管理：您还可以使用捕获的查询集创建或更新允许列表。例如，您在Haura云上的临时项目可以从您的应用程序测试套件捕获查询，并使用它来帮助您构建允许列表。</p><p>Hasura连接到您拥有的系统上运行的数据库和服务。例如，您可以连接到在VM上运行的Heroku Postgres或RDS、云SQL或您自己的Postgres。</p><p>虽然Hasura和您的服务之间的所有通信都可以加密TLS/HTTPS，但无论如何，确保您的数据库和服务只接受来自Hasura的连接可能会进一步受益。</p><p>我们还开始了获得SOC2、ISO 27001和HIPAAReady认证的过程，这样您就可以更轻松地开始在企业环境中使用Hasura Cloud。如果您还想了解更多，请与我们联系！</p><p>Hasura是一个开源引擎，在新的或现有的Postgres数据库上为您提供实时的GraphQL API，内置支持缝合自定义GraphQL API并在数据库更改时触发WebHook。</p></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://hasura.io/blog/announcing-hasura-cloud-managed-graphql-for-your-database-and-services/">https://hasura.io/blog/announcing-hasura-cloud-managed-graphql-for-your-database-and-services/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/database/">#database</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/数据库/">#数据库</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/graphql/">#graphql</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/cloud/">#cloud</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/hasura/">#hasura</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1006917.html"><img src="http://img.diglog.com/img/2020/6/thumb_3aa95bc36e69434130ece5e1ed634e37.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1006917.html">MetricsDB：用于在Twitter上存储指标的时间序列数据库</a></div><span class="my_story_list_date">2020-6-17 12:3</span></div><div class="col-sm"><div><a target="_blank" href="/story/1006780.html"><img src="http://img.diglog.com/img/2020/6/thumb_ac2e00df6317e6f05fa2e09cc5c242ee.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1006780.html">DrawERD：使可视化您的数据库结构变得更容易</a></div><span class="my_story_list_date">2020-6-16 16:47</span></div><div class="col-sm"><div><a target="_blank" href="/story/1006573.html"><img src="http://img.diglog.com/img/2020/6/thumb_5db224db473f8eee63db4357c422fe6d.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1006573.html">Newt DB，两栖数据库-上面是Python对象，下面是PostgreSQL JSONB</a></div><span class="my_story_list_date">2020-6-15 5:27</span></div><div class="col-sm"><div><a target="_blank" href="/story/1006387.html"><img src="http://img.diglog.com/img/2020/6/thumb_5d6fc0a258737ebf68627172090f49c3.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1006387.html">HSBC从65个关系数据库迁移到一个全球MongoDB数据库</a></div><span class="my_story_list_date">2020-6-13 15:6</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/app/">#app</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/病毒/">#病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/冠状病毒/">#冠状病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>