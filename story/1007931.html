<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>PVM-Python虚拟机</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">PVM-Python虚拟机</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-06-24 13:43:35</div><div class="page_narrow text-break page_content"><p>PVM中的主要数据结构是&#34；Regular&#34；堆栈(类似于受限的列表PUSH=APPEND，POP=POP)。堆栈的主要操作是加载/推送和存储/弹出。我们在向上增长的堆栈顶部加载/压入一个值(递增STACKP-STACK指针-它索引顶部)；我们从堆栈顶部存储/弹出一个值(递减STACKP)。有一个次要的块堆栈，用于存储有关嵌套循环、TRY和WITH语句的信息。(=。例如，中断状态转换为使用块堆栈来确定要中断哪个循环的代码(以及如何在TheLoop外的第一个语句继续执行)。当循环、TRY/EXCEPT和WITH语句启动时，关于它们的块的信息被推送到块堆栈上；当它们终止时，该信息从Bock堆栈中弹出。对于今天的演讲来说，块堆栈太复杂了，不需要理解它：因此，当我们运行跨块堆栈指令时，我们会指出我们忽略了它们的事实。下面是一个执行计算d=a+b*c的简单堆栈操作序列的示例，假设a、b、c和d是函数中的局部变量：假设co_varames是(&#39；a&#39；，&#39；b&#39；，&#。)，并且这些名称的实际值存储在并行的元组(1，2，3，NONE)中：例如，&#39；a&#39；的值是1，&#39；b&#39；的值是2，&#39；c&#39；的值是3，而&#39；d&#39；的值是NONE。正如我们将在LOAD_FAST N的含义下面更详细地看到的那样，存储在co_varnames[N]中的值存储在co_varnames[N]中，写入stackp+=1，stackp[stackp]=co_varnames[N]store_fast N存储/弹出堆栈顶部的值到co_varnames[N]中，写入的co_varnames[N]=STACK[N]。AND STACKP-=1 BINARY_MAXPLY加载/将顶部的两个值的*推入堆栈，写入的堆栈[STACKP-1]=STACKP[STACKP-1]*STACKP[STACKP]；STACKP-=1(将堆栈顶部的两个值转换为它们的乘积)BINARY_ADD LOAD/PUSH将顶部写入的堆栈上的两个值的+加载/推入堆栈[STACKP-1]=STACKP[STACKP-1]+STACKP[STACKP]；STACKP-=1(将堆栈顶部的两个值转换为它们的和)d=a+b*c的PVM代码为LOAD_FAST 0 LOAD_FAST 1 LOAD_FAST 2 BINARY_MULPLY BINARY_ADD_STORE_。+-+3||+-+2||+-+1||+-+0||+。意思是空栈)执行LOAD_FAST 0.。+-+3||+-+2||+-+1||+-+0|1：a|++。-+STACK(STACKP=0)执行LOAD_FAST 1.。+-+3||+-+2||+-+1|2：b|+-+0|1：a|++。-+STACKP=1的STACK(WITH STACKP=1)执行LOAD_FAST 2.。+-+3|+-+2|3：c|++-+1|2：b|++-+0|1：a|++。-+STACKP=2的STACK(WITH STACKP=2)执行BINARY_MULPLY.。+-+3||+-+2||+-+1|6：b*c|+-+0|1：a|++。-+STACKP=1的STACK(WITH STACKP=1)执行BINARY_ADD.。+-+3||+-+2||+-+1||+-+0|7：a+b*c|+。-+STACK(STACKP=0)执行STORE_FAST 3.。+-+3||+-+2||+-+1||+-+0||+。-+堆栈(堆栈=-1)在该点d&#39；的值为7，即执行STORE_FAST时位于堆栈顶部的值。这些名称的实际值存储在四元组(1，2，3，7).问题：显示(通过绘制我上面绘制的)以下指令COMPUTE d=(a+b)*c LOAD_FAST 0 LOAD_FAST 1 BINARY_ADD LOAD_FAST 2 BINARY_MULPLY STORE_FAST 3任何表达式都可以转换为类似的代码，供PVM评估其值。-PVMEach指令的控制(获取/执行周期)。第一个字节是操作或字节码；后两个字节是该字节码的操作数(但并非所有字节码都需要操作数：LOAD_FAST需要；BINARY_ADD不需要)。两个字节(16位)可以表示数字0到65,536：因此，Python函数可能不会有超过65,536个不同的局部变量名称。存储指令</p></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.ics.uci.edu/~brgallar/week9_3.html#virtual">https://www.ics.uci.edu/~brgallar/week9_3.html#virtual</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/python/">#python</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/虚拟机/">#虚拟机</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/pvm/">#pvm</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/堆栈/">#堆栈</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1007870.html"><img src="http://img.diglog.com/img/2020/6/thumb_f8f5d529d35334f2fb264d19f656224e.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1007870.html">Python增强方案：结构化模式匹配</a></div><span class="my_story_list_date">2020-6-24 6:12</span></div><div class="col-sm"><div><a target="_blank" href="/story/1007661.html"><img src="http://img.diglog.com/img/2020/6/thumb_7c83256d6ac63694f9a33359e22a432e.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1007661.html">实践操作线性规划：使用Python进行优化</a></div><span class="my_story_list_date">2020-6-22 23:55</span></div><div class="col-sm"><div><a target="_blank" href="/story/1007501.html"><img src="http://img.diglog.com/img/2020/6/thumb_a270829c58d97b90ea892ae979fa861b.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1007501.html">与大卫·比兹利从头开始的Python并发性(2015)</a></div><span class="my_story_list_date">2020-6-21 12:15</span></div><div class="col-sm"><div><a target="_blank" href="/story/1007438.html"><img src="http://img.diglog.com/img/2020/6/thumb_794420d313664ce917a4545ca0f305a7.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1007438.html">堆栈溢出探索为什么开发人员更喜欢打字脚本而不是Python</a></div><span class="my_story_list_date">2020-6-21 2:13</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/app/">#app</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/病毒/">#病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/冠状病毒/">#冠状病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>