<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>与grep类似，但用于代码</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1>与grep类似，但用于代码</h1><div class="row"><div class="col-lg-8 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time">2020-05-06 05:55:47</div><p>Semgrep是一款用于轻松检测和防止代码库中的错误和反模式的工具。它结合了grep的便利性和语法和语义搜索的正确性。开发人员、DevOps工程师和安全工程师使用Semgrep自信地编写代码。</p><p>下面是一个简单的Python示例test.py。我们希望按ID检索对象：</p><p>def get_node(node_id，Nodes)：对于节点中的节点：如果node.id==node.id：#Oops，应该是&#39；node_id&#39；返回node返回NONE。</p><p>这是个窃听器。让我们使用semgrep来查找类似的错误，使用一个简单的搜索模式：$X==$X。它将查找代码中左右比较表达式相同的所有位置：</p><p>$docker run--rm-v&#34；${pwd}：/HOME/repo&#34；rereturn tocorp/semgrep--lang python--pattern&#39；$X==$X&#39；test.pytest.pyrule:python.deadcode.eqeq-is-bad：无用比较操作`node.id==node.id`或`node.id！=node.id`.3：if node.id==node.id：#Oops，应该是&#39；node_id&#。</p><p>对于简单模式，请使用--lang和--pattern标志。此操作模式对于快速迭代单个文件或文件夹上的模式非常有用：</p><p>对于高级配置，请使用--config标志。此标志自动处理多种输入配置类型：</p><p>如果没有此标志，将从.sgrep.ymor多个匹配.sgrep/**/*.yml的文件加载默认配置。</p><p>像$X、$WIDGET或$USERS_2这样的元变量。元变量名称只能包含大写字符、_或数字，并且必须以大写字符开头，或者$x或$SOME_VALUE等_-名称无效。元变量用于跟踪特定代码段中的变量。</p><p>那个..。(省略号)运算符。省略运算符将序列抽象出来，因此您不必费力考虑特定代码模式的细节。</p><p>将在代码中找到open()调用的结果赋给变量的所有匹配项。</p><p>规则：-id：打开-永不关闭的模式：-Pattern：$FILE=OPEN(.)-Pattern-Not-Inside：|$FILE=OPEN(.).$FILE.Close()消息：&#34；打开的文件对象没有相应的关闭&#34；语言：[Python]严重性：错误。</p><p>此规则查找已打开但从未关闭的文件。它通过寻找开放的空间(.)来实现这一点。模式，而不是后面的Close()模式。$FILE元变量确保在打开和关闭调用中使用相同的变量名。省略运算符允许将任何参数传递给open，并允许在open和close调用之间传递任何代码语句序列。我们不关心如何调用Open，或者在Close调用之前发生了什么，我们只需要确保调用了Close。</p><p>等价是Semgrep中的另一个关键概念。semgrep自动搜索语义等价的代码。例如，以下模式在语义上是等价的。</p><p>如上所述，您还可以将注册表名指定为配置。r2c提供了一个配置文件注册表。这些规则已经使用我们的分析平台在数千个存储库上进行了调整。</p><p>semgrep是一个名为pfff的大型程序分析库的前端，在那里它被命名为sgrep。pfff开始于facebook，并且是开源的，但现在已经存档，主要的维护者在r2c工作。</p><p>对完全支持的托管版本Semgrep感兴趣吗？放下你的电子邮件，我们会通知你的！</p><div class="text-break sotry_link"><a target="_blank" href="https://github.com/returntocorp/semgrep">https://github.com/returntocorp/semgrep</a></div><div class="story_tags"><button type="button" class="btn btn-light my_tag"><a href="/tag/代码/">#代码</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/类似/">#类似</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/grep/">#grep</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/模式/">#模式</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/open/">#open</a></button></div></div></div><div class="col-lg-4 col-0"><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>