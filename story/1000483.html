<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>我最终是如何开发VMware Workstation Pro Ansible模块的</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1>我最终是如何开发VMware Workstation Pro Ansible模块的</h1><div class="row"><div class="col-lg-8 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time">2020-05-03 21:09:55</div><p>作为一名IT专业人士和信息安全爱好者，虚拟化即使不是构成我的工作流的最重要的软件，也是最重要的软件之一。</p><p>想要在不破坏实际设置的情况下尝试尖端软件或操作系统更新吗？维图化。</p><p>需要复制问题吗？虚拟化整个设置。(额外的好处：在VM上复制现实生活中的设置，这样您就可以用一千个太阳的力量来测试它。)。</p><p>如果你担心自己的数据和系统安全，你可能会遇到其他操作系统，比如Qubes OS。这一开始可能会造成不稳定，但归根结底，这让你改变了对一些日常任务的看法。</p><p>长话短说，我经常使用虚拟化。作为r/HomeLab的一名成员，我的家庭实验室设置是你能想象到的最经典的。一些计算机、交换机、防火墙和运行ESXi的Frankenstein服务器，该服务器托管了我所有的实验室和崩溃测试环境。</p><p>生活发生了变化，工作流程发生了变化，设置也是强制性的规范。那又怎么样？我需要把我的旧虚拟实验室改造成笔记本电脑大小的实验室。</p><p>我需要能够走出家门工作，这样才能把它装进背包里。</p><p>互联网连接不会是恒定的，所以忘了所有的远程访问吧，没有家庭实验室的VPS，也没有租用的专用服务器。</p><p>为什么？嗯，我不会说得太详细。我会让你把我想象成某种秘密特工，就像技术人员詹姆斯·邦德……。或者只是另一个怪异的书呆子喜欢怪胎。</p><p>因此，我改用VMware Workstation Pro作为虚拟机管理程序。为什么？嗯，这需要另一篇博客文章，所以我会把它留到另一天。</p><p>在笔记本电脑上运行繁重的虚拟化实验室(来自经典实验室)的主要问题之一是，您的计算机或主机并不总是处于开机状态！</p><p>告别你喜欢的裙带关系工作、日程安排的任务等等。因为，即使我们不是定期运行它们，而是在引导或登录时设置它们，谁知道呢？也许我登录是为了检索文件或其他东西，但没有时间进行升级。</p><p>从现在开始，这将是手动启动，但不会没有最低限度的优化，这就是Ansible。</p><p>将我的脚本转换成Ansible剧本，使我可以随时升级多个系统，而无需手动对每个系统进行升级。</p><p>那么，问题是什么呢？嗯，就像我说的，所有的虚拟机都没有全天候运行，所以这里仍然需要手动操作：逐个启动虚拟机，等待它们全部启动并运行，然后启动我的升级攻略。</p><p>我想让Ansible能够启动和停止我的VM，这将允许我创建以下攻略：</p><p>因此，首先我一直在寻找唤醒兰魔术包，但没有运气在这里，没有设法使它工作，我所有的Google-Fu尝试导致10年前的线程或关于ESXi的话题。</p><p>我考虑在我的新设置中使用ESXi。事实上，使用ESXi与vCenter配合使用或不与vCenter配合使用本可以帮助我实现各种自动化目的，但它也有很多缺点：</p><p>Workstation Pro可以做到这一点，ESXi可以做到这一点。这可以通过在ESXi上使用vCenter来解决。不要误会我的意思，我喜欢vCenter，它是ESXi之上的一个令人惊叹的补充(我今天太喜欢VMware了)，但是软件有目的和用例。</p><p>这不是完全安装ESXi&amp；vCenter就可以解决的问题。我甚至没有提到vCenter的RAM和CPU需求。</p><p>笔记本电脑启动、启动Workstation Pro、ESXi启动、vCenter启动、使用从来自vCenter的共享虚拟机检索到的信息刷新Workstation Pro GUI、虚拟机启动。</p><p>这种设置是不可持续的。就像我前面说的，想象一下这一切仅仅是为了快速测试或查找VM！</p><p>那么，回到主题上来，我们说到哪里了？是的，Ansible，Workstation Pro&amp；我无法让WOL与虚拟机一起工作。</p><p>我的Github-Fu&amp；Ansible-Galaxy-Fu可能没有切中要害，但到目前为止还没有关于这个主题的项目。</p><p>这就是我决定成为首席执行官的时候，似乎没有人想要也不需要它，所以我会建造它。</p><p>虽然我只需要与电源状态相关的请求，但我决定全力以赴，其他的也要做。这可以实现多个目的：</p><p>也许我将来会需要其中的一些，同时与Ansible&amp；我的新实验室相处得更融洽。</p><p>该代码仍然是黑客的，正在与Yandere Simulator的竞争，但它是有效的。我现在可以从我的行动手册启动虚拟机了！</p><p>还有工作要做，因为我仍然在学习如何与Ansible的模块和系统交互，因此，除了代码折射器和优化整个&#34；返回的信息&#34；主题是一个很大的WIP。</p><p>另外，我想让API的使用率更高一点…。人类证据？实际上，没有什么可以阻止您断开或删除运行Ansible的虚拟机的网络适配器。</p><p>变量定义也是如此，几乎所有的虚拟机请求都使用虚拟机ID，这是我们不容易知道的，也不容易记住</p><div class="sotry_link"><a target="_blank" href="https://magnier.io/developing-vmware-workstation-pro-ansible-module/">https://magnier.io/developing-vmware-workstation-pro-ansible-module/</a></div><div class="story_tags"><button type="button" class="btn btn-light my_tag"><a href="/tag/ansible/">#ansible</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/启动/">#启动</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/开发/">#开发</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/esxi/">#esxi</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/没有/">#没有</a></button></div></div></div><div class="col-lg-4 col-0"><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/百度/">#百度</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/搜索/">#搜索</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/科学/">#科学</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/flash/">#flash</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/人像/">#人像</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/动物/">#动物</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/互联网/">#互联网</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/logo/">#logo</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/在线/">#在线</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/twitter/">#twitter</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/浏览器/">#浏览器</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/电影/">#电影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/搜索引擎/">#搜索引擎</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/雷人/">#雷人</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/腾讯/">#腾讯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/搞笑/">#搞笑</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/日本/">#日本</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/css/">#css</a></button></div></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div><script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script><script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script></body></html>