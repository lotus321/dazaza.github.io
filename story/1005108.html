<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Google云中的VPC对等</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Google云中的VPC对等</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-06-04 13:41:53</div><div class="story_img_container"><img src="http://img.diglog.com/img/2020/6/1446338faf14e7d91106347b59717753.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></div><div class="page_narrow text-break page_content"><p>当我们需要让两个不同VPC上的主机能够通信，而不需要通过公网路由流量时，VPC网络对等就会派上用场。它允许RFC 1918跨两个虚拟私有云(VPC)网络连接，无论这两个网络是否在同一GCP项目中。流量完全保持在谷歌的网络内。VPC对等可以与同一项目中的VPC开启，也可以与两个不同项目中的VPC开启。</p><p>延迟更低，因为通信是通过谷歌内部网络进行的，而不是通过公共互联网路由。</p><p>降低了带宽成本。无论何时通过公共互联网进行数据传输，Google Cloud都会按消耗的带宽收费。</p><p>提高了网络安全性，因为网络管理员不必担心暴露在公共互联网上所涉及的风险。</p><p>子网重叠时无法启用私有网络对等。在设置私有网络与不同项目的私有网络对等时，需要注意的是，我们不能对等两个项目的默认私有网络，因为两个私有网络都有重叠的子网。</p><p>我们将演示如何在GCP中对等两个不同项目上的两个VPC。为了对等vPC网络，我们需要在GCP中创建两个项目。假设它们是GCP-PROJECT-1和GCP-PROJECT-2。我们将在GCP-PROJECT-2中将GCP-PROJECT-1的默认vPC与名为vPC-CUSTOM的自定义vPC对等。在这里，我们将使用BGP对等进行网络对等，BGP对等用于在两个系统(对等)之间交换路由信息。您可以在此处https://docs.opendaylight.org/projects/bgpcep/en/latest/bgp/bgp-user-guide-bgp-peering.html阅读有关bgp对等的更多信息。</p><p>让我们在gcp-project-2中创建一个具有地域BGP对等模式的私有网络VPC-CUSTOM。</p><p>在该私有网络中创建一个地域内网段不重叠的子网。您可以根据需要使用任何区域，这里我们选择us-cental1进行演示。</p><p>必须启用ICMP防火墙规则才能通过对等网络发现实例。还可以为ssh添加防火墙规则，以测试与独立网络中的两个虚拟机的连通性。</p><p>gcloud测试版计算网络对等创建Custom-Default\--network=Custom-vPC\--Peer-network=default\--Peer-project=gcp-project-2\--project=gcp-project-1 gcloud测试版计算网络对等创建default-Custom\--network=default\--Peer-network=Custom-vPC\--Peer-project=gcp-project\--project=gcp-project-1。</p><p>让我们通过在每个VPC网络中创建两个计算引擎实例来测试连接，并尝试从这两台计算机彼此ping通。</p><p>gcloud计算实例创建ping-test-1\--网络默认\--子网默认\--机器类型F1-micro\--project=gcp-project-1 gcloud计算实例创建ping-test-2--network vpc-自定义--子网自定义-集中1--机器类型F1-microproject=gcp-project-2。</p><p>ping将成功，反之亦然，并确认跨VPC的计算机的可发现性</p></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://medium.com/sellerapp/enabling-vpc-network-peering-in-google-cloud-platform-b97bbb81aeac">https://medium.com/sellerapp/enabling-vpc-network-peering-in-google-cloud-platform-b97bbb81aeac</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/云中/">#云中</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/peering/">#peering</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/网络/">#网络</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1005087.html"><img src="http://img.diglog.com/img/2020/6/thumb_531594ea7c5346f8206f560fa4bb4287.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1005087.html">谷歌和沃尔玛在印度移动支付市场确立主导地位</a></div><span class="my_story_list_date">2020-6-4 9:34</span></div><div class="col-sm"><div><a target="_blank" href="/story/1004972.html"><img src="http://img.diglog.com/img/2020/6/thumb_d32994fa1cbcb5f2e670feea3740acde.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1004972.html">谷歌提起50亿美元诉讼，称其在“私人”模式下进行跟踪</a></div><span class="my_story_list_date">2020-6-3 17:29</span></div><div class="col-sm"><div><a target="_blank" href="/story/1004939.html"><img src="http://img.diglog.com/img/2020/6/thumb_917c9c6b2b47fb75647776859b82ab06.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1004939.html">谷歌在美国面临50亿美元的诉讼，原因是谷歌追踪“私人”互联网使用情况</a></div><span class="my_story_list_date">2020-6-3 9:2</span></div><div class="col-sm"><div><a target="_blank" href="/story/1004915.html"><img src="http://img.diglog.com/img/2020/6/thumb_c0d468241982e43daa413356a003e8ac.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1004915.html">整个谷歌搜索结果页面现在都是广告</a></div><span class="my_story_list_date">2020-6-3 6:44</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/病毒/">#病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/冠状病毒/">#冠状病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/app/">#app</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>