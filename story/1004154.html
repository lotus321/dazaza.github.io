<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>生锈不是很好的碳替代品</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">生锈不是很好的碳替代品</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-05-29 06:27:00</div><div class="page_narrow text-break page_content"><p>与围棋相比，我有一句话概括了我对Rust的看法：“围棋是C程序员设计新的编程语言的结果，Rust是C++程序员设计新的编程语言的结果”。这不仅仅是一个比喻--围棋是由Plan9校友设计的，这是一个用C语言编写的操作系统，是围棋许多功能的灵感来源，而Rust是由Mozilla的人设计的--Mozilla的旗舰产品是世界上最大的C++代码库之一。</p><p>优秀C++程序员的价值观与优秀C程序员的价值观是不相容的1.如果您有相同的ASC++目标，那么Ruust是一个不错的C++替代品，但是如果您没有相同的目标，那么设计也会有非常相似的缺点。Rust和C++都是我喜欢称之为“厨房水槽”的编程语言，它们的简单性很明显。这些语言通过添加更多语言功能来解决问题。像C这样的语言通过编写更多的C代码来解决问题。</p><p>我根据这些语言每年增加功能的速度，对这些语言变得更加复杂的速度做了一些餐巾纸上的估计。我的方法不是很科学，但我确信这一点得到了理解。</p><p>C：每年0.73个新特性，以维基百科上的C11文章中的项目符号数量来衡量，该文章总结了C99的变化，并对C18没有引入新特性的事实进行了调整。</p><p>Go：每年2个新功能，以维基百科上列出的新Go版本的新功能数量来衡量。</p><p>C++：每年11.3个新特性，以总结C++14变化的C++17文章中的项目符号数量来衡量。</p><p>锈蚀：每年15个新特性，以过去一年主要锈蚀版本的发行说明中的标题数减去打印机之类的内容来衡量。</p><p>这充分说明了这些语言的稳定性，但更重要的是，它说明了它们的复杂性。随着时间的推移，人们很难保持最新的锈蚀心理图谱，也很难及时解决你的问题。去年写的铁锈程序看起来已经过时了，而十年前写的C程序很有可能还不错。系统程序员不想要闪亮的东西-我们只想要能工作的东西。$OTHER_LANGUAGE有什么非常酷的功能吗？不感兴趣。它会比它的价值更麻烦。</p><p>有了哲学上的愿望--洗掉障碍，定下基调，让我来回顾一下在考虑用Rust替代C语言时的一些更具体的问题。</p><p>C语言是可移植性最强的编程语言。Rust实际上为一种新语言选择了很多受支持的目标(这主要归功于LLVM)，但与几乎可以在所有语言上运行的C相比，它就相形见绌了。除非有了C编译器，否则新的CPU体系结构或操作系统几乎不能被认为是存在的。一旦它这样做了，它就会解锁对用C编写的大量软件存储库的访问。许多其他编程语言，如Ruby和Python，都是用C实现的，您也可以免费获得这些语言。</p><p>C有一个规格。没有规格说明没有什么能让拉斯特保持诚实。它展示的任何行为都可能在明天改变。它会做一些奇怪的事情，可能是一种怪异的东西，也可能是一只虫子。只有当你的代码被破解时才能知道。他们不能放慢脚步来准确地定义铁锈的定义，这也表明了动物成熟的语言。</p><p>C有很多实现。C有许多相互竞争的编译器。他们一起强调规范，找出定义松散的角落，准确地确定C是什么。在其中一个中编译而不在另一个中编译的代码表明其中一个中存在错误，这给每个代码都提供了一个很好的额外测试层。通过许多实现，我们迫使C语言得到良好的定义，这对语言及其长期稳定性是有好处的。Rustc也可以经受住一些竞争，也许它会变得更快！2。</p><p>C具有一致和稳定的ABI。System-V ABI在各种各样的系统上都得到了支持，到目前为止已经达成了大部分共识。另一方面，锈菌内部没有稳定的ABI。您必须在同一版本的Rust编译器上编译和链接所有内容。唯一可以与生态系统的其余部分交互的代码是Undiom Rust，它是在Rust和外部世界之间的某种检查点编写的。外面的世界是存在的，它说的是System-V，而我们系统程序员花了很多时间和它交谈。</p><p>货物是强制性的。按照类似的思路，Rust的编译器标志并不稳定。将其与其他建造系统集成的尝试遭到了铁锈和货运团队的敌意。外部世界是存在的，而我们这些系统程序员花了很多时间来集成东西。铁锈不肯配合。</p><p>并发性通常是一件坏事。串行程序有X个问题，并行程序有X个Y问题，其中Y是您引入的并行度。C中的并行性肯定是一件令人头疼的事情，这也是我发现GO更适合这些情况的原因之一。然而，几乎所有的程序都不必是并行的。一个有效使用轮询的程序会变得更简单，性能合理，错误也会少一个数量级。“无所畏惧的并发”让你十有八九都能大胆地使用糟糕的软件设计。</p><p>安全。是的，铁锈更安全。我真的不在乎。考虑到所有这些问题，我将采用段错误和缓冲区溢出。我特别拒绝“在铁锈中重写它”--因为不管怎样，与维护C程序相比，从头开始重写整个程序总是会引入更多的bug。我不在乎你用什么语言重写。</p><p>C语言远不是完美的语言，它有很多缺陷。然而，它的替代将会更简单，而不是更复杂。以围棋为例，它在替代C语言解决许多问题方面取得了很大成功。它通过专攻某些类别的程序并用尽可能简单的解决方案来解决这些问题来做到这一点。它还没有完全取代C，但它在其问题空间方面取得了很大的进步--比我能说的Rust(它在C++方面取得了类似的进步，但肯定不是C)的问题空间要大得多。</p><p>厨房水槽的方法不管用。锈蚀最终会解决C++所存在的“万事通，无人管”的问题。明智的语言设计者应该从小处做起，保持小处不变。明智的系统程序员将这一理念扩展到设计整个系统，而Rust可能不会被邀请。我知道很多人，特别是那些已经迷恋铁锈的人，不会同意这篇文章的大部分内容。但是现在您知道为什么我们还在写C了，希望您不要再为这件事来烦我们了。</p><p>旁白：“C/C++”这个词激怒了我。它们是完全不同的语言。惯用的C++看起来与惯用的C++一点也不像。↩。</p><p>Ruust确实有一个与之竞争的编译器，但如果没有规范，很难定义其兼容性和正确性的级别，而且它总是在迎头赶上。-↩。</p><p>对我的一篇帖子有什么评论吗？通过发送电子邮件至~sircmpwn/public-inbox@lists.sr.ht，在我的公共收件箱中开始讨论。</p><p>您是一名自由软件维护员吗？在您的工作过程中，您是否正在与压力、苛刻的用户、超负荷工作或任何其他社会问题作斗争？请给我发电子邮件-我知道你的感受，我可以倾听你的同情心，分享一些经验丰富的建议。</p></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://drewdevault.com/2019/03/25/Rust-is-not-a-good-C-replacement.html#update">https://drewdevault.com/2019/03/25/Rust-is-not-a-good-C-replacement.html#update</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/rust/">#rust</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/替代品/">#替代品</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/good/">#good</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/语言/">#语言</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1003871.html"><img src="http://img.diglog.com/img/2020/5/thumb_137734ccf591eeda8a144f1a31d5bbb8.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1003871.html">新的Android漏洞Strandhogg 2.0利用用户信任</a></div><span class="my_story_list_date">2020-5-27 8:19</span></div><div class="col-sm"><div><a target="_blank" href="/story/1003377.html"><img src="http://img.diglog.com/img/2020/5/thumb_88fd6ddb8253d4481c2e73bf9c8b9c36.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1003377.html">常见的锈蚀寿命误区</a></div><span class="my_story_list_date">2020-5-23 15:14</span></div><div class="col-sm"><div><a target="_blank" href="/story/1003370.html"><img src="http://img.diglog.com/img/2020/5/thumb_ec41b1bbfd64dc582c0b7f3673332500.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1003370.html">微软：这就是我们热爱编程语言Rust并启动维罗纳项目的原因</a></div><span class="my_story_list_date">2020-5-23 13:53</span></div><div class="col-sm"><div><a target="_blank" href="/story/1002706.html"><img src="http://img.diglog.com/img/2020/5/thumb_92ffcc35d5ca44c6ecefe7c8c3fc3dc7.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1002706.html">Facebook收购Giphy在国会敲响了反垄断警报</a></div><span class="my_story_list_date">2020-5-19 6:52</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/病毒/">#病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/冠状病毒/">#冠状病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/app/">#app</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>