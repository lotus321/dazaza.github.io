<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>戈多铁锈</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">戈多铁锈</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-05-30 07:11:51</div><div class="page_narrow text-break page_content"><p>这是一个简短的使用铁锈和戈多3.2的指南。本文在编写时考虑到了Linux，但是大部分知识应该可以移植到MacOS和Windows上。</p><p>将Rust代码和Godot项目分开是值得的，因为我体验过Godot时不时地尝试从Rust项目导入各种文件，留下相当长的等待时间盯着进度条。</p><p>#[宏_使用]外部机箱gdative；#[派生(gdative：：NativeClass)]#[Inherit(gdative：：Node)]struct HelloWorld；#[gdative：：Methods]Impll HelloWorld{fn_init(_owner：gdative：：node)-&gt；self{HelloWorld}#[export]FN_Ready(&amp；self，_owner：gdative：：node){Godot_Print！)}}fn init(Handle：gdative：：init：：InitHandle){handle.add_class：：&lt；HelloWorld&gt；()；}godot_gdative_init！()；godot_nativescript_init！(Init)；godot_gdative_Terminate！()；</p><p>运行Cargo Build，您应该在target/debug/中有一个lib&lt；projectname&gt；.so文件(其中&lt；projectname&gt；是您的项目的名称)，一旦该文件被创建，就应该将其复制/移动到您的Godot项目中。</p><p>如果在Mac上执行此操作，则文件扩展名为.dylib，而不是.so，而在Windows上为.dll。</p><p>如果您使用的是MacOS或Windows，请选择相应的平台。同样适用于32位和64位。</p><p>选择库后，保存GDNativeLibrary，因为保存场景时不会保存它，并确保文件扩展名为.gdnlib(默认为.tres)。</p><p>这是最后一步。一旦您创建(并保存！)。您终于可以添加一个节点并将HelloWorld结构附加到它。</p><p>如果您将第4步中的代码复制到lib.rs中，您可能已经注意到在#[Inherit(gdative：：Node)]中使用Node作为所有者类型。</p><p>如果要使用其他节点类型，例如空间或精灵，请将节点替换为新的节点类型。</p><p>在“Language”部分中，将“GDScript”更改为“NativeScript”，并在类名中输入“HelloWorld”(这应该是您的结构的名称)。</p><p>最后，您需要加载步骤5中的gdnlib文件。选择“Library”下拉列表(当前为[空])，选择“Load”，最后选择您的gdnlib文件。</p><p>如果您使用F6键(或按“Play Scene”)运行项目，您应该会看到“hello，world”。在Godot输出控制台中。</p><p>它将gdnativedocumentation(运行Cargo文档--从您的Rust项目中打开)与Godot文档结合起来：https://docs.godotengine.org/en/stable/index.html，，例如查看RUST文档中的Call签名，以及Godot文档中的默认值，这将有助于弄清楚大多数事情是如何工作的。</p><p>如果您希望在发生死机时查看堆栈跟踪，并且正在为Release进行构建，请将以下内容添加到Cargo.toml文件中：</p></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://hagsteel.com/posts/godot-rust/">https://hagsteel.com/posts/godot-rust/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/rust/">#rust</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/铁锈/">#铁锈</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/godot/">#godot</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/文件/">#文件</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1003871.html"><img src="http://img.diglog.com/img/2020/5/thumb_137734ccf591eeda8a144f1a31d5bbb8.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1003871.html">新的Android漏洞Strandhogg 2.0利用用户信任</a></div><span class="my_story_list_date">2020-5-27 8:19</span></div><div class="col-sm"><div><a target="_blank" href="/story/1003377.html"><img src="http://img.diglog.com/img/2020/5/thumb_88fd6ddb8253d4481c2e73bf9c8b9c36.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1003377.html">常见的锈蚀寿命误区</a></div><span class="my_story_list_date">2020-5-23 15:14</span></div><div class="col-sm"><div><a target="_blank" href="/story/1003370.html"><img src="http://img.diglog.com/img/2020/5/thumb_ec41b1bbfd64dc582c0b7f3673332500.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1003370.html">微软：这就是我们热爱编程语言Rust并启动维罗纳项目的原因</a></div><span class="my_story_list_date">2020-5-23 13:53</span></div><div class="col-sm"><div><a target="_blank" href="/story/1002706.html"><img src="http://img.diglog.com/img/2020/5/thumb_92ffcc35d5ca44c6ecefe7c8c3fc3dc7.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1002706.html">Facebook收购Giphy在国会敲响了反垄断警报</a></div><span class="my_story_list_date">2020-5-19 6:52</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/app/">#app</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/病毒/">#病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/冠状病毒/">#冠状病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>