<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>QUIC能否与TCP的计算效率相匹敌？</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">QUIC能否与TCP的计算效率相匹敌？</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-05-02 18:01:22</div><div class="story_img_container"><img src="http://img.diglog.com/img/2020/5/94f4f960c1b1740ecde8e1477c8d23e6.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></div><div class="page_narrow text-break page_content"><p>我们已经分享了很多关于我们有多喜欢Quic(以及为什么我们要构建我们自己的称为Quicly的实现)。它承诺减少延迟、提高吞吐量、恢复客户端移动性，并提高隐私和安全性。令人兴奋的是，IETF的Quic工作组现在正准备完成Quic的第一个版本，并为在互联网上部署做好准备。虽然许多构建和计划使用它的人员和团队都渴望看到广泛的部署，但有一个问题一直令人担忧……。</p><p>我们运行测试试图找到一些答案，这里是高级答案：是的，Quic的计算效率可以和TCP一样高！</p><p>在香槟的瓶子出来之前，我们将承认一个很快就会变得显而易见的事情：我们有一个简单的设置和基准，我们需要用更现实和更具代表性的硬件和流量场景进行更多的测试。重要的是，我们没有为TCP或QuIC启用任何硬件卸载。我们的目标是使用一个带有合成流量的简单场景来消除一些更明显的计算瓶颈，并深入了解如何降低Quic的成本。</p><p>也就是说，我们惊讶地发现，即使在我们的简单场景中，Quic也做得和TCP一样好。</p><p>你可以认为这篇文章中的练习相当于让我们的汽车在赛道上与一辆法拉利(Ferrari)进行良好的比赛。赛道是一个高度人工的环境，在上面驾驶我们的车的体验并不能代表你每天的体验(除非你是一名赛车手)。然而，解决在那条赛道上很好地比赛的问题有助于我们发现瓶颈。这里重要的和可转让的东西是我们将采取的措施，以消除.。</p><p>很长一段时间以来，TCP一直是Web的主力，多年来，人们在优化其实现方面付出了大量努力，以使其在计算上更有效率。然而，Quic仍然是一个新兴的协议；它还没有被广泛部署和调整，以提高计算效率。与古老的TCP相比，这样的新协议会有什么不同呢？重要的是，在不久的将来，Quic能像TCP一样高效吗？</p><p>确认处理：典型TCP连接中的很大一部分数据包仅携带确认。TCP确认在内核中处理，发送方和接收方都是如此。Quic在用户空间执行这些操作，从而产生更多跨越用户内核边界的数据副本和更多上下文切换。此外，TCP确认采用明文，而Quic确认是加密的，这增加了以Quic发送和接收确认的成本。</p><p>每包发送器开销：内核知道TCP连接，并且可以记住和重用连接中发送的所有包预计保持不变的状态。例如，内核通常只需要在连接开始时查找目的地址的路由或应用一次防火墙规则。由于内核没有Quic连接的连接状态，因此这些内核操作将在每个传出的Quic数据包上执行。</p><p>由于Quic在用户空间中运行，因此使用Quic比使用TCP的成本更高。这是因为Quic发送或接收的每个数据包都跨越了用户内核边界，这称为上下文切换。</p><p>为了开始回答我们前面提出的问题，我们开始做一个简单的基准测试。我们使用Quicly作为Quic服务器和Quic客户端。Quic数据包总是使用TLS1.3进行加密，并且出于此目的，Quicly使用了H2O的TLS库picotls。我们的参考TCP设置将使用使用原生Linux TCP的picotl，以最小化参考TCP设置和Quic设置之间的差异。</p><p>计算效率可以用以下两种方法之一来测量：通过测量使网络饱和所需的计算资源量，或者通过测量所有可用计算能力可持续的吞吐量。使网络饱和会因数据包丢失以及随后的丢失恢复和拥塞控制器操作而引入易变性。虽然在测量性能时包括这些内容很重要，但我们希望避免这种可变性，因此选择了.。</p><p>发送者的计算效率很重要，还有两个原因。首先，在传输协议中，发送者往往首当其冲地承担计算成本。这是因为发送器负责大多数计算昂贵的传输功能，例如运行定时器以检测丢弃在网络中的分组并重新发送它们，监视网络的往返时间，以及运行带宽估计器以使其不会拥塞网络。第二，服务器是.。</p><p>在深入研究结果之前，简单介绍一下我们的实验设置。我们的发送者在Intel Core m3-6Y30上使用Ubuntu19.10(Linux内核版本5.3.0)，限制为单核和单线程。发件人已三次连接到本地网络</p></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.fastly.com/blog/measuring-quic-vs-tcp-computational-efficiency">https://www.fastly.com/blog/measuring-quic-vs-tcp-computational-efficiency</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/能否/">#能否</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/match/">#match</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/quic/">#quic</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/病毒/">#病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/冠状病毒/">#冠状病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/app/">#app</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>