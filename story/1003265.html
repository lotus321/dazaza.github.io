<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Tree-Hugger：面向人类的源代码挖掘</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Tree-Hugger：面向人类的源代码挖掘</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-05-22 19:56:44</div><div class="story_img_container"><img src="http://img.diglog.com/img/2020/5/7488fcc9a5589c033fdd9ebd59e57a58.jpeg" class="img-fluid my_story_img" onerror="this.style.display='none'"></div><div class="page_narrow text-break page_content"><p>我们CoDistAI正在努力构建一种能够理解源代码和相关文档的人工智能。因为我们自己就是开发人员，所以在编写代码的同时，我们也面临着编写文档和保持文档更新的痛苦(增加了交付和截止日期的压力！)。在我们需要的时候找到他们也是一个很大的问题。我们知道，我们并不是唯一一个遭受这种痛苦的人。</p><p>但是，要建立这样一个系统，我们需要数据。而且很多。我们需要挖掘大量跨越不同语言的代码，你猜怎么着，当涉及到代码作为数据时，数据源并不多。我们能找到的几个主要来源主要是Github的CodeSearchNet Challenges数据集，Google BIG-Query的Github活动数据集，Py150，以及很少有其他类似的数据集。</p><p>挖掘不同的语言代码文件并从中收集重要信息并非易事。我们不想创建新的解析器，所以像ANTLR或lex-yacc这样伟大的解析器生成器框架不是我们的选择。我们需要的是一个良好的高级库，它在某种通用代码解析器之上公开一个简单的PythonAPI。</p><p>因此，最终的选择归结为两个选择。芭比尔鱼和保姆。现在，Babelfish是这个街区上的新手，它有一些很好的特性，但UAST(通用AST)并不是我们真正喜欢的东西。API也不是那么简单。所以照看树是一个自然而然的选择(另外，Babelfish也不再被维护了)。</p><p>我们对其简洁的设计、速度、语言覆盖率以及对树木保姆的最小依赖性印象深刻。但是，我们仍然在努力解决它通过Python绑定提供的低级接口。因此，我们开始编写一些代码，在其之上创建一些更高级别的抽象。</p><p>Tree-Hugger是一个建立在Tree-Sitter之上的轻量级、可扩展、高级、通用的代码解析器。</p><p>轻量级：Tree-Hugger的目标是成为一个简单易用的框架。它为开发人员提供了足够的工具来快速开始挖掘代码数据，同时还要处理大量的样板文件。它还旨在通过向它们提供一些命令行实用程序来简化工作。为此，它本身的重量仍然非常轻。我们的依赖性也相当低。</p><p>可扩展：抱树人的目标是通过设计实现可扩展。它主要通过两种方式实现这一目标。其一是拥有外部查询源。我们从一个YML文件中读取查询(s表达式)(示例可以在这里找到)，这意味着我们不需要在代码中编写它们，我们可以非常容易地对它们进行迭代。第二件事是有一个模块化的结构，已经为您提供了一些通用的样板代码。也就是说，你可以专注于实际的事情。编写对您很重要的代码的重要部分。</p><p>高级：树保持器隐藏了运行查询或在最后一页上行走的小细节，也隐藏了在CLEAN、Pythonic API下从查询结果中检索一些代码的棘手部分，这样您就可以自由地专注于手头的问题。</p><p>Universal：我们实际上利用了令人惊叹的保姆，所以默认情况下我们(几乎)是语言不可知论者：)。</p><p>假设您希望将代码视为数据，并尝试在其上安装机器学习模型(如果您想了解更多信息，可以在此处查看我们以前的一篇文章)。</p><p>手头的任务是挖掘大量代码(不同的语言，如Python、PHP、C、C++、JS、C#、Java等)。并生成一个数据集，其中每个样本如下所示-(f，d)，其中f代表函数体，d代表相关注释(如果您愿意，可以使用Docstring)。</p><p>现在您开始处理此问题，您会发现您遇到了一个问题。您需要一些东西，让您可以阅读所有不同的语言文件，并获得您感兴趣的数据。此外，您检索的数据应该是您可以方便使用的形式。像tree-sitter这样的框架和库在这里很有用。</p><p>您需要将查询编写为s-expression，并且它们嵌入到代码中。使您自己的代码很难阅读，也很难调试。</p><p>虽然这些文件都是通用的，但当您重新获得s表达式时，每个文件的内部表示形式都不同。因此，您需要编写、管理和跟踪相似的查询，但对于所有这些不同的语言编写的查询略有不同。</p><p>一旦开始获取数据，您将需要进行一些后处理，以使其在建模方案中可用。</p><p>所有这些都需要大量的时间，而且没有微不足道的解决方案。</p></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://medium.com/codist-ai/introducing-tree-hugger-source-code-mining-for-human-b5fcd31bef55">https://medium.com/codist-ai/introducing-tree-hugger-source-code-mining-for-human-b5fcd31bef55</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/代码/">#代码</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/hugger/">#hugger</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1003221.html"><img src="http://img.diglog.com/img/2020/5/thumb_52b03383f830f67c707d01d620371549.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1003221.html">假设工具：机器学习模型的无代码探测</a></div><span class="my_story_list_date">2020-5-22 9:20</span></div><div class="col-sm"><div><a target="_blank" href="/story/1003131.html"><img src="http://img.diglog.com/img/2020/5/thumb_54f2e8a61e18b69e241232dc9b58401c.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1003131.html">Microsoft OpenAI可以根据函数签名和注释编写Python代码</a></div><span class="my_story_list_date">2020-5-21 22:59</span></div><div class="col-sm"><div><a target="_blank" href="/story/1003106.html"><img src="http://img.diglog.com/img/2020/5/thumb_3b4f6c9c6fad84050624411007c29304.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1003106.html">Xbox和Windows NT 3.5源代码在线泄露</a></div><span class="my_story_list_date">2020-5-21 19:49</span></div><div class="col-sm"><div><a target="_blank" href="/story/1003002.html"><img src="http://img.diglog.com/img/2020/5/thumb_f21c0f78e87b0ad3d26d6b3318febcab.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1003002.html">EA将在GPL3下发布C&C泰伯利亚黎明和红色警报源代码</a></div><span class="my_story_list_date">2020-5-21 2:34</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/app/">#app</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/病毒/">#病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/冠状病毒/">#冠状病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>