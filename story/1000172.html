<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>将PostgreSQL用于JSON存储</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1>将PostgreSQL用于JSON存储</h1><div class="row"><div class="col-lg-8 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time">2020-05-02 17:56:04</div><div class="story_img_container"><img src="http://img.diglog.com/img/2020/5/659bd93bd2b1a6ffd6fc0bfcbe8146f8.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></div><p>让我们设想一个场景，在此场景中，您在应用程序中处理JSON，并且希望将其存储在数据库中。您深深地叹了口气，然后想，我想除了我最喜欢的DB(Postgres)之外，我还得在我的体系结构中添加一些东西。我希望我能继续使用PostgreSQL。</p><p>你开始想，现在你有了很多问题，而不是一个问题。您可能需要学习新的数据查询语法、数据创建语句、安装新软件，最糟糕的是，作为应用程序开发人员，您需要在生产环境中运行一些新服务器。现在，你将把宝贵的时间花在学习、试验和祈祷上，而不是开发你的功能。</p><p>我的朋友，今天是你梦想成真的日子。在这篇博客文章中，我们将讨论一下如何使用PostgreSQL来满足您的所有JSON需求。我们还将向您介绍一些免费的学习资源，以便您可以更深入地挖掘。</p><p>从2012年9月发布的9.2开始，PostgreSQL就有了JSON类型。最初的JSON类型不仅仅是一个简单的存储字段，它允许您将JSON转储到数据库表中。它只是一个简单的文本字段，用于检查以确保您的JSON格式良好。除此之外，它不会做太多事情，我不推荐使用它。</p><p>在2014年12月的PostgreSQL 9.4版中，添加了JSOB类型。虽然我开玩笑说B代表更好，但实际上它代表的是二进制。将JSON数据放入JSONB列时，除了检查格式良好的JSON之外，现在还可以索引、查询和检索文档的各个部分。通常，对于您的所有工作，您都应该使用JSONB，除非您有令人信服的理由不这样做。这里有几个关于权衡和选择JSON和JSONB的很好的讨论……。</p><p>{&#34；Person&#34；：&#34；First_Name&34；：&#34；Steve&#34；&#34；Last_Name&34；：&#34；Pouthy&#34；&#34；Score&#34；Score&100，C。状态&#34；：&#34；令人敬畏&#34；，&#34；BEST_FEATURE&#34；：&#34；谦逊&#34；}。</p><p>一旦将其放入名为json_content的JSOB列中(并创建一个gin Index以加快查询速度)，您就可以做各种有趣的事情。请注意，我将使用PostgreSQL版本11中的JSONB导航和函数语法。版本12中对JSON文档导航和查询有了重大改进，这将是另一篇博客文章的重点。</p><p>#&gt；或#&gt；&gt；是JSON路径导航器，区别在于#&gt；返回JSON，#&gt；返回JSON文本值。</p><p>使用相同的文档导航语法，我们可以将其与包容检查相结合。顾名思义，我们将检查存储的JSON是否包含我们正在寻找的JSON。例如，如果我们只想返回那些状态为AWOWE的记录，我们可以这样写：</p><p>操作符在操作符的右侧查找包含JSON的JSON。在PostgreSQL中使用JSON最好的部分是，您可以利用您已经喜欢的所有普通SQL以及这些JSON函数。SQL处理可用于极大地减少应用程序中所需的代码量。例如，下面是获取表中所有不同状态类型的查询：</p><p>所以，如果你对你在这里看到的很感兴趣，并且想要了解更多，这里有一些很棒的资源(如果我自己这么说的话)。</p><p>我们有一个在线教程来帮助您开始使用PostgreSQL中的JSON。它是免费的，7天24小时都可以使用，而且我还在上面的材料中看到了一条实况流。</p><p>让我们知道@crunchydata您对这个材料的看法！我也很想听听您是如何在PostgreSQL中使用JSON的。</p><div class="text-break sotry_link"><a target="_blank" href="https://info.crunchydata.com/blog/using-postgresql-for-json-storage">https://info.crunchydata.com/blog/using-postgresql-for-json-storage</a></div><div class="story_tags"><button type="button" class="btn btn-light my_tag"><a href="/tag/用于/">#用于</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/json/">#json</a></button></div></div></div><div class="col-lg-4 col-0"><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>