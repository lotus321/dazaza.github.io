<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>其他语言中的错误抽象示例</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">其他语言中的错误抽象示例</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-05-20 05:19:01</div><div class="page_narrow text-break page_content"><p>你有没有其他语言或语言特性的库的例子，它们真的应该实现一个众所周知的概念(Monoid、Monad、Alternative等等)，但它们没有实现，因为它们(可能)不知道这个概念？例如违反法律、缺少函数、过于复杂的函数类型等。</p><p>我遇到过很多这样的例子，他们总是折磨我。但无论如何，我现在什么都想不起来了。</p><p>级别1，因为即使它们有一个等同于PURE的函数，它的行为也不太像PURSE。相反，它们的等价物mx&gt；&gt；=f检查f是否返回Promise类型的值，如果不是，它的行为类似于mx&gt；&gt；=pure。f；反之亦然，如果你试图用他们的纯洁来许下诺言。因此，不可能有Promise(Promise A)类型的计算，它将被解释为Promise a。</p><p>第2级类似地，人们相当频繁地在TypeScript中使用x|null作为可选类型。TypeScript可以执行严格的NULL检查，以确保您可以处理NULL，这将使您有90%的时间获得正确的可能类型。但是，无法编码在某些情况下出现的“可能”(可能是X)。</p><p>第二层谢谢，这正是我要找的。这实际上让我想起了另一个破损的Monad实例：Java是可选的。</p><p>Java有时将NULL视为Optional.Empty，有时将其视为NullPointerException，这违反了各种法律。</p><p>级别2我发现更糟糕的是，很多承诺都是这样运作的：</p><p>如果foo有自由变量并且表达式发生变异，则结果不是确定性的。而且你还需要像Promises这样的东西，都是取消的！</p><p>在重构时，这是相当糟糕的。在Java中，我通常只使用一个包装类，它将承诺包装在回调中，直到实际运行。</p><p>1级Python有一个用于折叠+运算符的SUM函数：SUM([1，2，3，4])==10。您甚至可以为其提供默认值0以外的起始值，以便将其与数字以外的对象一起使用：SUM([[1，2]，[3，4]]，[])==[1，2，3，4]。由于+是可重载的，因此可以将其用作任意么半群…的mconat操作。除了…。您不能在字符串上使用它。为什么？因为圭多是这么说的，这就是原因。SUM([&#34；one&#34；，&#34；Two&#34；，&#34；Three&#34；，&#34；Four&#34；]，&#34；&#34；)引发TypeError：sum()Can&#39；t SUM字符串[改用&#39；&#39；.join(Seq)]。</p><p>级别2如果SUM对字符串有效，那么将会有多种连接字符串的方式，这在Python禅宗看来是不可接受的。</p><p>级别1可能会引起争议，但在大多数语言中，几乎每个变量都使用null反模式，该反模式可以使用“可能的单体”实现，顺便说一句，当您有可选值时，这将使其显式。另外，解析器，它们很可能是应用程序。</p><p>第二级，我认为人们低估了符号和哈斯克尔的类型系统让“可能”发挥多大作用。</p><p>例如，即使您实际上修复了Java的可选，以便它在语法上有意义，尝试使用它仍然是地狱般的事情，因为函数不能优雅地组合。</p><p>在没有良好的函数组合支持的语言中，单体、函数器和应用程序都非常糟糕，因为这些接口都要求轻量级的可组合闭包符合人体工程学。</p><p>如果没有这一点，做正确的事情的摩擦会变得如此之高，以至于它不再成为明智的选择。</p><p>1级Python生成器。我原以为它们是懒惰的列表或美化的延续，但是Python开发人员也希望它们具有线性-所以您只能使用它们一次。尽管如此，它们不会操作类似MonadFail的操作、带有失败状态，也不会抛出异常，而是会自动变异为一个空生成器，因此如果有人重用引用，您的数据就会静悄悄地消失。它将其他功能中的纯遍历改变为突变。</p><p>从Python2到Python3的主要变化之一是，许多函数从返回列表切换到返回生成器。我们有一个纯&34；函数，它关闭在一个列表上，在第一次被调用后神秘地开始给出不同的结果，因为上游的某个东西无辜地调用了map。</p><p>级别1年前，我在一个项目中工作，我必须部署一个数据科学管道，我们选择了Python项目Airflow来完成这项任务。</p><p>Airflow是与Web应用程序一起使用的工作流管理器，用于可视化进度、成功和失败，并发出某些命令，如重新运行作业或取消作业。</p><p>Airflow利用DAG数据结构来组织工作流，工作效果很好，但是当您想要在新的DAG中运行或包装现有的DAG时，他们提供了子DAG的概念，不幸的是，子DAG的行为与DAG不同，并且有各种相关的错误。</p><p>换句话说，子DAG是事后才想到的，这让我很恼火(尽管我已经多年没有用过气流了，但我仍然很恼火)，因为如果他们一开始就认为他们的DAG结构是一个么半群，或者至少是一个可以由图形或树叶组成的图形，那么子DAG就会是一个一流的概念。这句话的意思是，如果他们一开始就认为他们的DAG结构是一个么半群，或者至少是一个可以由图形或树叶组成的图形，那么子DAG就会是一个一流的概念。换句话说，他们甚至创造了一个子DAG的概念，这让我很恼火：它根本不应该存在。</p><p>是啊，雷迪斯也做过类似的事情。它们有主哈希表，然后您就可以有子哈希表(使用不同的API！)。在那里面，但是..。就是这样。没有子子哈希表。</p><p>级别1在榆树生态系统中有很多东西都是单调的，但是在榆树中没有办法对这类东西进行抽象，所以必须为每种类型重新实现有用的组合符。</p><p>2级，你也不能对此发表任何言论。单音节是不好的语言。</p><p>另一方面，jQuery是DOM镜头的一个非常好的实现。</p><p>级别1期望的(任一)和可选的(可能)不是单体。SY Brand甚至创建了自己的版本来解决这个问题(我猜是通过使用和_TGen组合器)。</p><p>有一个单一的尝试方案，它试图模拟Haskell的DO符号来表示预期(如果我没记错的话)。但它很笨重，不像哈斯克尔那样。</p><p>它们可以使用统一的类似do-notation的语法来完成，该语法也适用于前面的所有要点。但事实并非如此，C++在语法和复杂性方面都在增长，并忽略了这一明显的可能性。我猜类似Do的符号和单体将在一段时间后进入C++，但为时已晚。</p><p>C++有更多来自FP的损坏的东西，但是告诉我C++中还有什么东西没有损坏。</p><p>第2级流行的文化是拒绝任何哪怕是一点点性能损失的特性。可以理解，但是很可悲。</p></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.reddit.com/r/haskell/comments/glz389/examples_of_incorrect_abstractions_in_other/">https://www.reddit.com/r/haskell/comments/glz389/examples_of_incorrect_abstractions_in_other/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/抽象/">#抽象</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/incorrect/">#incorrect</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/函数/">#函数</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/app/">#app</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/病毒/">#病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/冠状病毒/">#冠状病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>