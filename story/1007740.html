<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>虚幻引擎4.NET核心集成</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">虚幻引擎4.NET核心集成</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-06-23 08:43:47</div><div class="story_img_container"><img src="http://img.diglog.com/img/2020/6/16ddecdc7af2335a4b58e79b0e180301.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></div><div class="page_narrow text-break page_content"><p>UnrealCLR是一个插件，它使用公共语言运行库将.NET核心主机本地集成到虚幻引擎中，以便通过用户驱动的蓝图管道直接执行托管代码，从而使用具有引擎API的.NET工具的全部功能来构建游戏逻辑。该项目的目标是稳定性、性能和可维护性。</p><p>从惯用的C#编写的托管代码中不断发展访问引擎API的框架。</p><p>支持.NET工具，包括硬件加速的数学运算，并透明地重新映射到引擎的向量类型。</p><p>支持用于调试和分析的.NET工具，如JetBrains产品线、dnSpy调试器等。</p><p>完全独立于程序集的编译管道，并支持NuGet包、分析器和生成器。</p><p>新建或使用现有的虚幻引擎C++或BluePrints项目。克隆存储库或从发布部分下载所需的版本。导航到安装文件夹，然后运行DotNet Run命令。按照安装说明进行操作。在安装过程完成后打开项目。</p><p>要升级插件，请重新运行安装过程。使用更新的框架重新编译自定义代码。</p><p>新建或使用现有的虚幻引擎C++或BluePrints项目。克隆存储库或从发布部分下载所需的版本。将Source/Native文件夹的内容复制到%Project%/Plugins/UnrealCLR目录。通过运行以下命令，从源/托管/运行时文件夹编译托管运行时：DotNet Publish--Configuration Release--framework netcoreapp3.1--Output&#34；%Project%/Plugins/UnrealCLR/Managed&#34；.。重新启动虚幻引擎，打开项目，然后构建插件。</p><p>要快速开始测试，请在虚幻引擎中打开包含该插件的项目，将存储库内容中的所有文件夹复制到%Project%/Content目录，然后等待它们加载到内容浏览器中。通过运行以下命令从Source/Managed/Tests文件夹编译托管程序集：</p><p>要升级，请从项目中删除插件文件夹，然后重复编译部分中的所有步骤。使用更新的框架重新编译自定义代码。</p><p>插件在启动时自动加载。要确保它已初始化，请从Windows-&gt;开发人员工具-&&gt;输出日志中打开控制台窗口，使用搜索输入查找UnrealCLR日志。</p><p>在编辑器中打开带有测试的场景并进入播放模式。要切换测试，请导航到BluePrints-&gt；Open Level Blueprint，选择Test Systems枚举，然后在右侧面板上更改默认值。</p><p>UnrealCLR被设计为具有灵活性和可扩展性。该插件透明地管理运行时的核心功能，绑定和缓存托管环境的引擎API。程序员可以完全控制通过蓝图管道的执行流，这些管道允许用托管逻辑动态编织引擎及其对象的本机事件。在脚本的生命周期后面没有隐藏的状态或模糊的执行顺序。</p><p>在运行时，UnrealCLR将托管程序集加载到缓存的独立上下文中。它允许在从内存中卸载程序集后动态替换它们，因此程序员无需重新启动编辑器即可使用代码进行持续开发。编译管道完全由开发人员决定，它可以以任何理想的方式组织，没有任何限制，并且完全支持NuGet包。</p><p>插件和框架一直在发展，以尽可能多地利用虚幻引擎的能力。拥有功能丰富的API至关重要。该系统在创建时考虑到了高性能，但没有考虑到交易安全。绝大多数代码都是手工编写和验证的，以防止运行时出现任何意外行为，并确保稳定性。</p><p>使用您喜欢的IDE和.NET核心工具，它们可以像附加到常规.NET应用程序一样附加到引擎进程中进行评测和调试。它非常方便，开箱即用，不需要任何外部努力。分析性能，监控CPU使用情况和内存消耗，调试执行，完全控制代码。探索新的可能性，立即扩展您的工具集。</p><p>运行库将所有未处理的异常重定向到引擎的日志文件和屏幕消息，但是，强烈建议使用try/catch块覆盖自定义处理程序的重定向。有必要附加一个调试器，以便在编辑器或独立编辑器中正确跟踪异常。</p><p>虚幻引擎以及.NET运行时利用垃圾回收器进行内存管理。无论对象是如何创建和释放的：使用C++、C#还是蓝图，该框架的设计都要考虑一致性，以防止崩溃并对程序员透明地验证内存。</p><p>该插件独立于用户程序集的编译例程。它根据用户驱动的蓝图管道从%Project%/Managed文件夹加载程序集，并在进入/退出播放模式后在运行时解析依赖项。带有引擎API的插件框架被自动识别并作为依赖项加载。</p><p>该框架复制了具有完全互操作性支持的引擎的类层次结构。任何外部C++代码、蓝图和插件都可以通过引擎API与UnrealCLR兼容和扩展。</p></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://github.com/nxrighthere/UnrealCLR">https://github.com/nxrighthere/UnrealCLR</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/核心/">#核心</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/core/">#core</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/引擎/">#引擎</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/app/">#app</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/病毒/">#病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/冠状病毒/">#冠状病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>