<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Microsoft Surface Go 2上的OpenBSD</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Microsoft Surface Go 2上的OpenBSD</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-05-16 19:37:21</div><div class="page_narrow text-break page_content"><p>2018年，我在最初的Surface GoBack上使用了OpenBSD，除了内部的Atheros WiFi之外，很多东西都可以正常工作。这意味着我必须将它绑在USB-C基座上进行以太网连接，或者使用一个小型USB-A WiFi加密狗插入一个不太小的USB-A-to-USB-C适配器。</p><p>微软在最近的Surface设备上改用了英特尔WiFi芯片，使Surface Go 2与OpenBSD的兼容性略有提高。</p><p>和最初的Surface Go一样，我选择了仅支持WiFi的机型，内存为8GbRAM，NVMe固态硬盘为128 GB，处理器现在是第8代双核英特尔酷睿M3-8100Y。</p><p>这款平板电脑的宽仍为9.65&34；，高6.9&34；，厚0.3&34；，但屏幕边框缩小了半英寸，将屏幕从1800x1200提高到10.5&34；对角线，分辨率从1800x1280；提高到1920x1280；。</p><p>可拆卸USB连接的Surface Go Type盖包含背面键盘和触摸板。我选择了冰蓝Alcantara颜色，因为我上次购买的较深的钴蓝版本已不再可用。Type盖沿底部边缘磁性连接，可以磁性地折叠到屏幕的正面，发出ACPI睡眠信号，或靠着背面自动禁用键盘和触摸板。</p><p>屏幕边框变小的一个不幸的副作用是，当键盘处于抬高位置时，Type Cover键盘的顶部现在离屏幕底部非常近。用手指放在键盘上，屏幕最底部的文本(如Web浏览器中的状态栏)可以被左手遮住。</p><p>Type Cover的键盘很安静，但有非常令人满意的触觉弹跳。考虑到整个键盘的宽度只有9.75&34；，按键是很小的，但它适合我的小手。触摸板的中空滴答声比我记忆中的上一款要少一些，这是一个优点。</p><p>触摸屏是ElanTech型号，通过HID-Over-I2C连接，支持笔输入。Surface Pen可以单独购买，需要AAAA电池，但它不需要任何配对，只是顶部的擦除按钮出于某种原因需要蓝牙。不使用时，笔会磁性地附着在屏幕的左侧。</p><p>一组立体声扬声器在屏幕边框的左上角和右上角朝前，但缺少底座。设备顶部有一个电源按钮和物理音量摇杆按钮。右侧有一个3.5 mm耳机插孔、USB-C端口、Surfacedock/电源端口和位于支架后面的microSD卡插槽。</p><p>无线连接现在由英特尔Wi-Fi 6 AX200 802.11ax芯片提供，该芯片还提供蓝牙连接。</p><p>通过按住音量增大按钮，然后按下并松开电源按钮，并在菜单出现时释放音量增大，可以进入Surface Go的BIOS/固件菜单。在此菜单中可以禁用安全启动以及各种硬件组件。还可以调整启动顺序。</p><p>开机时，像其他电脑一样，按住电源按钮最终会强制关闭设备的电源，但该按钮必须按住似乎永远不动。</p><p>由于我之前在原始Surface Go上所做的OpenBSD工作，大多数组件在安装和第一次引导期间都能正常工作。</p><p>要引导OpenBSD安装程序，请将install67.fs映像dd到USB磁盘，如上所述进入BIOS并禁用安全引导，然后将USB设备设置为最高引导优先级。</p><p>对128 GB的固态硬盘进行分区时，用户可以安全地删除占用1 GB的Windows恢复分区，因为无论如何它都不能修复完全删除的Windows分区，并且可以从Microsoft网站下载完整的恢复映像并复制到USB磁盘。</p><p>在安装OpenBSD之后但在重新启动之前，请挂载EFI分区(Sd0i)并删除/efi/microsoft目录。否则，它可能会尝试启动Windows恢复加载程序。OpenBSD&#39；的EFI引导加载程序位于/EFI/Boot/BOOTX64。否则，默认情况下将加载EFI。</p><p>还有一个令人烦恼的地方，我在之前的评论中注意到：如果触摸触摸板或按下F1-F7键，Type Cover将拆卸所有USB设备，然后重新连接它们。我不确定这是设计原因还是Type Cover固件问题，但一旦OpenBSD引导到X，它将打开键盘和触摸板USB数据管道，它们将按预期工作。</p><p>2020-05-12：拆箱时，我直接开机进入固件屏幕禁用安全启动，然后安装OpenBSD，第一次完全启动OpenBSD时，内核因为acpivout无法初始化它的bcl元素索引而死机，我暂时关闭了acpivout。</p><p>iwx检测到Intel AX200芯片，固件加载(通过FW_UPDATE安装)，设备可以执行活动网络扫描，但当尝试验证到网络时，设备固件报告致命错误。我一直通过电子邮件发送STSP@来调试该问题。</p><p>2020-05-13：我创建了一个新的umstc驱动程序，该驱动程序连接到Type Cover的uhidev设备上，可以响应音量和亮度键，而不必使用usbidaction。更重要的是，它保持数据管道打开，以便在控制台按下F1-F7键时Type Cover不会重新启动。仍然需要一个解决方案来防止Type Cover在不在X模式下意外触摸触摸板时重新启动。</p><p>我尝试了S3暂停和恢复，但当按下电源按钮唤醒它时，它立即显示初始固件徽标并启动，就像它已经启动一样。S4休眠工作正常。S3暂停在Ubuntu中工作，所以我需要进行一些调试，以找出OpenBSD出现故障的地方。</p><p>通过Acpiac支持，通过APM和hw传感器提供状态，还支持通过USB-C充电。</p><p>英特尔设备，显示为Ugen设备，但OpenBSD不支持蓝牙。可以在BIOS中禁用。</p><p>显然有前置、后置和红外摄像头，没有一个是受支持的(也不是想要的)。可以在BIOS中禁用。</p><p>连接在PCI Intel Sensor Hub设备后面，这需要一个新的驱动程序，该驱动程序可以为我们的传感器框架提供支持，然后告诉xrandr旋转屏幕。</p><p>通过IMS在触摸屏上工作。笔顶部的按钮需要蓝牙支持，因此不受支持。</p><p>USB，由ukbd和我的umstc驱动程序支持。3级背光控制可由键盘本身使用F1调节。</p><p>由UMT驱动程序支持的USB，用于5指多点触摸、两指滚动、滞后，并且能够禁用否则在正常鼠标模式中默认启用的点击。</p><p>Inteldrm支持Kaby Lake，增加了加速视频、DPMS、伽马控制、集成背光控制和适当的S3恢复。</p><p>谢谢你把这个写下来。我正在考虑用x86取代我老化的iPad，后者不错，但对做任何有效率的事情用处不大。关于自由/开源软件桌面环境/UI和触摸控制，您有什么想法可以分享吗？</p><p>也就是说，您是否在纯平板模式下使用它，如果是，它是如何使用的？</p><p>我只短暂地将其用作平板电脑，但内核目前将触摸屏识别为鼠标，因此触摸会移动光标并发出点击声。我需要弄清楚如何让Firefox拖拽手指来滚动页面，而不是移动光标。</p><p>&gt；umstc&gt；umstc驱动程序，该驱动程序连接到Type Cover的UHIDEV设备，并响应音量和亮度键，而不必使用USBHIDaction pic.twitter.com/ZQM0ZGNHU4。</p><p>你们有不同型号的打字套吗？好奇它是否适用于其他https://github.com/jcs/openbsd-src/commit/94da4530f8c848a1eedf4318494e5047753a79af。</p><p>谢谢。它可能是需要添加到驱动程序的不同USB产品ID。</p></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://jcs.org/2020/05/15/surface_go2">https://jcs.org/2020/05/15/surface_go2</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/microsoft/">#microsoft</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/usb/">#usb</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1002115.html"><img src="http://img.diglog.com/img/2020/5/thumb_1e87b101de7983dabe12b6d639f9d55f.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1002115.html">微软在电信推广中收购Metaswitch</a></div><span class="my_story_list_date">2020-5-15 1:8</span></div><div class="col-sm"><div><a target="_blank" href="/story/1002068.html"><img src="http://img.diglog.com/img/2020/5/thumb_4b7d9ecba1881eda1176c27aaa7da297.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1002068.html">博斯克语(Microsoft)</a></div><span class="my_story_list_date">2020-5-14 13:24</span></div><div class="col-sm"><div><a target="_blank" href="/story/1001849.html"><img src="http://img.diglog.com/img/2020/5/thumb_becf6dbf1e8f7269202376a0efd6ae18.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1001849.html">Linux是Microsoft Azure中使用最多的操作系统-超过50%的VM核心</a></div><span class="my_story_list_date">2020-5-13 2:11</span></div><div class="col-sm"><div><a target="_blank" href="/story/1001665.html"><img src="http://img.diglog.com/img/2020/5/thumb_3e6a2c00e43c6f3b5d10b3e893bff687.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1001665.html">微软公布了基于Web的Outlook新功能计划</a></div><span class="my_story_list_date">2020-5-12 0:3</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/病毒/">#病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/冠状病毒/">#冠状病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/app/">#app</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>