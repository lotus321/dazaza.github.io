<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>如何编写Amstrad CPC仿真器</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">如何编写Amstrad CPC仿真器</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-05-31 13:17:30</div><div class="page_narrow text-break page_content"><p>本文旨在阐明Amstrad CP仿真器的内部结构，让您了解它们是如何工作的。它主要集中在CPE，这是我最了解的，因为它是我写的。(这是CPE.doc文件中缺少的技术信息部分.)。但你也会发现一些关于CPCEMU的信息，这些信息是我从与其作者马尔科·维思(Marco Vieth)的信件交流中了解到的。目前有(应该是？)。另外两个CPC模拟器是可用的，还有更多的正在开发中(实际上，相当多！)，但是我没有关于这些的信息。我不会在这里详细描述CPC规范，因为有其他更好的文档可以做这件事。(参见本网站的CPC指南)，但我将介绍硬件的基本功能，偶尔，本文也会涉及CPC以外的其他系统。在写这篇文章时，我只有一些我觉得有趣的东西作为指导。我希望你也会觉得有趣。本文档可能可以增强。如果您知道怎么做，请将mare&lt；crx@pool.information atik.rwth-aachen.de&gt；邮寄给我。这篇课文可能包含拼写和语法错误；英语是我的第二语言。请不要理睬它们，要不就寄给我，它们会被改正的。要在完全不同的计算机系统(这里我称之为主机系统)上仿真计算机系统需要做些什么？答案相当简单：只需向您打算运行的软件假装要仿真的系统的所有硬件都存在并且正常工作即可。所有硬件都包括CPU可能会中断的一些定时器中断的内存系统(这些属于CPU，但在编写仿真器时，您可能会认为它们或多或少是独立的)。</p><p>如果这些软件的行为与原始系统一样，那么大多数软件都应该重新运行。如果您愿意，您可以添加一些不太重要的功能，如声音支持。当硬件仿真完成后，您可能想要增强程序，以便仿真器变得比仿真系统更好。(顺便说一句，这种事从来没有发生过。在某些方面，所有的仿真器都不如真正的仿真器。一些重要的东西，特别是图形，确实很难正确模拟。)。稍后可能添加的内容包括：重写系统软件(原生软件)，这样就不需要对其进行仿真。这就是像Wine这样的WABI的全部内容：它们实际上不仿真硬件，但提供相同的系统调用，让程序在仿真器下运行。除了替换磁带或磁盘I/O例程外，此技术尚未在CPC仿真器中使用。提供&#34；快照&#34；。因此，您可以随时冻结系统状态，并在以后的某个时间再次加载它。这可以在CPC或C64这样的系统上使用额外的硬件来完成，但是使用仿真器实际上要容易得多。能够同时运行多台计算机。有一个C64仿真器可以同时具有多个C64仿真，但这些仿真不是并行执行的。如果您正在为多任务操作系统编写代码，那么这个问题是没有意义的。但是DOS并不能很好地同时处理多个任务。温多兹也不是。</p><p>接下来的章节将描述模拟上述硬件的可能性。我假设在整个过程中都使用汇编语言。在当前系统上，这是实现最大速度所必需的。将来，如果有人用C语言编写了一个可移植的CPC仿真器，并在un*x(Linux？)上的X窗口中运行，那将是一件很有趣的事情。有一个名为X64的X Window C64模拟器，运行得相当好，尽管目前它不能用于大多数游戏。另外，我假设是标准的PC硬件，因为CPE是为运行DOS的PC编写的。为什么要从内存系统开始呢？因为它在某种程度上是基本的。内存布局也会强烈影响仿真的其他部分，例如CPU和视频仿真。要仿真具有内存映射I/O(外围芯片响应某些受限区域中的内存访问)的计算机(如C64或AMIGA)，您必须考虑如何在每次访问时区分不同的内存区域。基本上，CPC可以访问64K的RAM。这是由具有16位地址总线的Z80CPU施加的限制。不幸的是(对于CPC仿真器编写器)，特殊硬件(即门阵列)已经在一定程度上克服了这一限制。在也有Z80的Spectrum上，实际上只能寻址64K(16K ROM，48K RAM)，这使得这部分仿真相当容易。这就是为什么Spectrum仿真器应该比CPC仿真器更快的原因，即使仿真的CPU是相同的。CPC中可用的64K分为4个银行，每个银行16K。在每个CPC上，上部存储体和下部存储体可以映射为包含ROM而不是RAM(写入除外，写入总是指向RAM)。因此，一个CP具有64K的RAM和32K的ROM，可以使进程可见</p></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="http://www.irespa.eu/daan/lib/howtoCPCemu.htm">http://www.irespa.eu/daan/lib/howtoCPCemu.htm</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/amstrad/">#amstrad</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/cpc/">#cpc</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/app/">#app</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/病毒/">#病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/冠状病毒/">#冠状病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>