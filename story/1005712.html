<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>西部数据的SMR光盘不适用于ZFS，但适用于大多数场合。</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">西部数据的SMR光盘不适用于ZFS，但适用于大多数场合。</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-06-08 23:28:18</div><div class="story_img_container"><img src="http://img.diglog.com/img/2020/6/046bb039a85c02a260ee0165e8eae169.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></div><div class="page_narrow text-break page_content"><p>虽然我们的延迟测试显示了WD Red eFax的固件可能存在的问题，但显示的严重故障相对来说是转瞬即逝的。在很大程度上，Red的固件很好地处理了我们对消费类硬盘所期望的所有用例工作负载。尽管如此，我们还是想知道为什么当被要求在ZFS下处理类似的任务时，它会失败得如此惨烈。</p><p>为此，您需要了解ZFS--尤其是ZFS RAIDz，比如Servethehome test--实际上是如何写入数据的。当您要求mdraid RAID6阵列存储1MiB的数据块时，数据将以易于管理的512KiB区块形式存放在总共两个驱动器上。正如我们在这里的每个测试中看到的那样，Red可以(至少在大部分情况下)很好地处理该工作负载。</p><p>但是，当您将相同的数据保存到ZFS RAIDz vdev时，每个磁盘的工作负载看起来非常不同。默认ZFS记录大小为128KiB-每个完整大小的数据块在vdev的n-P个磁盘之间平均分配，其中n-P是磁盘总数，P是奇偶校验块的数量。因此，对于ServeTheHome的四磁盘RAIDz1 vdev，记录存储在每个磁盘的44KiB(128/3，向上舍入到最接近的偶数扇区大小)块中。在我们自己的八磁盘RAIDz2 vdev中，记录以24KiB(128/6，四舍五入)块存储。</p><p>现在我们了解了这一点，我们知道我们可以通过大规模顺序写入来模拟理想的ZFS重新同步工作负载-我们使用32KiB的不可压缩伪随机数据块，在我们的Ironwolf基准磁盘和WD Red 4TB eFax测试磁盘上确实做到了这一点。在此测试工作负载下，我们在Ironwolf上实现了209.3MiB/秒的吞吐量，但在Red上只有13.2MiB/秒-15.9：1的减速，这确实非常符合Serve Home在他们的ZFS Re Silver测试中观察到的15.7：1的减速。</p><p>我们要非常明确地说：我们同意希捷的格雷格·贝罗尼(Greg Belloni)的观点，他代表希捷表示，他们不建议将SMR用于NAS应用程序。在绝对最好的情况下，SMR磁盘的性能明显逊于CMR磁盘；在最坏的情况下，它们可能会非常糟糕，以至于可能被错误地检测为故障硬件。</p><p>这样说来，我们就可以理解为什么西部数据在经过我们假设的大量实验室测试之后，相信他们的磁盘对于典型的NAS使用来说是正常的。虽然明显慢于其Ironwolf竞争对手，但它们在传统RAID重建和典型的日常NAS文件共享工作负载方面都有足够的表现。</p><p>固件如何很好地适应大多数工作负载给我们留下了深刻的印象-这是RFC 1925 2的一个明显的例子。(3)它正在运行，但推力似乎确实足以达到目的。不幸的是，西部数据似乎没有测试ZFS，而ZFS是他们相当少数的客户群所依赖的。</p><p>对于目前正在进行的针对西部数据的美国或加拿大集体诉讼来说，这些测试可能都不是好消息，但它们也不是这些诉讼的终点。即使在最好的情况下，WD Red的SMR车型的表现也远远逊于早先的非SMR车型-而且消费者没有得到降级的明确通知。</p><p>如果使用相同的固件向消费者提供比其他情况下更大的驱动器，并且充分解释了这些驱动器的限制，我们可能会滔滔不绝地谈论其实用程序和功能。不幸的是，西部数据公司到目前为止只选择用它来削减小磁盘的制造成本，甚至没有将节省的成本转嫁给消费者。</p></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://arstechnica.com/gadgets/2020/06/western-digitals-smr-disks-arent-great-but-theyre-not-garbage/2/">https://arstechnica.com/gadgets/2020/06/western-digitals-smr-disks-arent-great-but-theyre-not-garbage/2/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/smr/">#smr</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/digital/">#digital</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/磁盘/">#磁盘</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/app/">#app</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/病毒/">#病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/冠状病毒/">#冠状病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>