<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>该死的迪诺是什么？</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">该死的迪诺是什么？</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-06-04 10:26:11</div><div class="story_img_container"><img src="http://img.diglog.com/img/2020/6/0b921b34540e81303b14ffccdf6cefc2.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></div><div class="page_narrow text-break page_content"><p>Deno是由Node.js的原始创建者Ryan Dahl创建的一个项目，刚刚发布了1.0版。</p><p>它不是一种新的语言，它不是一种新的类型系统，而是一种新的运行时，它支持现成的Javascript和TypeScript。</p><p>首先，让我们看看Deno项目的一个比较突出的主张，即安全运行时。</p><p>引擎就是将您编写的代码转换成可执行代码的工具。</p><p>另一方面，运行时为您的代码提供了运行环境或上下文。它提供了一组对象和API，您的代码可以与之交互，例如，文件系统或‘window`。</p><p>浏览器和node.js使用相同的引擎-V8引擎。然而，它们并不使用相同的运行时。</p><p>浏览器将使用浏览器提供的运行时，而node.js将使用由node.js提供的运行时。</p><p>嗯，对于Node.js，您非常信任您使用的脚本不会做任何变化无常的事情。</p><p>例如，以下面的代码为例。在这里，我导入了一个模块，我是完全安全的。我的印象是，这个模块将接受一些文本，并给定一种语言，将其转换为所说的语言。</p><p>如果我使用Node.js运行时执行此代码，我必须相信此代码不会做任何恶意操作，因为默认情况下，Node.js运行时为任何脚本提供对整个系统的访问。</p><p>例如，我导入的上述脚本在运行时实际上可以扫描我的系统中的环境变量(DB主机、用户名和密码)，并将它们发送到第三方系统。都不让我知道。</p><p>您所依赖的是您执行的代码是安全且经过验证的。通常，你会通过某种社会证据来断言这一点。如果一个软件包每周被下载100万次，那么它很有可能是安全的，对吗？</p><p>因为你不仅要验证你使用的每个包裹都是安全的，还要确保你使用的每个包裹都是安全的，你使用的每个包裹都是安全的。</p><p>但是，如果您在浏览器中运行上面的代码，那么您可能会受到更多的保护。默认情况下，浏览器会阻止访问大多数内容，如硬盘、网络摄像头、麦克风等。</p><p>这是有道理的，对吧-你不会想不小心访问一个网页，然后突然把你硬盘上的所有内容都加密了。</p><p>这是因为浏览器运行时是安全的，并且在其中执行的脚本的信任级别多少为0。用户必须明确授予访问权限。</p><p>因此，这就是迪诺试图提供的相同级别的安全。他们希望将浏览器的默认禁用特性带到服务器端。</p><p>要实现这一点，您必须在执行代码时通过提供标志来显式启用访问。</p><p>这实际上是行不通的。这是因为我们没有给它提供访问网络的许可。为此，我们必须给出`--allow-net`标志：</p><p>这种方法有几个问题，主要是如果一个脚本需要访问网络，那么所有脚本现在都可以访问。但是，可以通过在代码中显式使用API来解决此问题。</p><p>通常，使用Node时，您只需在项目的目录中包含一个Package.json文件，然后在导入语句中引用您的依赖项。</p><p>使用Deno，它们处理依赖关系的方式非常不同，这可能是运行时最有争议的特性。</p><p>这里我们直接指向STD库HTTP server.ts文件，并将其固定到版本`0.53.0`。</p><p>这使得快速编写利用依赖项的脚本变得非常简单，而不必使用Package.json文件设置节点项目。</p><p>主要是版本管理。如果我在多个文件(比如UUID生成器)中使用相同的包，我必须确保无论在哪里导入该文件，我都使用相同的版本。如果我需要升级那个版本，我现在也需要在所有地方更新它。</p><p>目前，人们正在想出几个解决方案，但是最流行的可能是导入地图，这是Deno团队目前不稳定的特性。</p><p>导入映射是Deno团队的一个实验性特性，其行为更像传统的Package.json文件。</p><p>无论哪种方式，默认情况下所有依赖项都会被缓存，所以如果您认为它会在每次执行时重新下载它们，请不要担心。</p><p>这是Node真正缺少的东西，并导致了多个相互竞争的包，所有这些包都试图做一些一开始就应该合并到语言中的事情。</p><p>就我个人而言，我觉得Node.js的STD库的缺乏导致了编写Node.js应用程序的各种不同的、对比鲜明的和不完整的方法。</p><p>显然，有些人会认为这是积极的--你现在不再拘泥于一种做事的方法或方式。然而，我会争辩说，我更喜欢社区接受的方法或库，用于单一任务，如果我不喜欢这种方法，那么我可以使用替代包。</p><p>标准库的最大特点是Deno团队保证那里的代码总是会被审计。这意味着对于广泛使用的包，如HTTP服务器和UUID，您可以确保正在运行的代码可以安全使用。</p><p>标准库包括HTTP、WS、UUID、哈希、DATETIME等模块，不胜枚举。</p><p>JavaScript很棒。但是.。说它有一些怪癖，可以以一些意想不到的方式工作。</p><p>TypeScript是一个很好的选择，它构建在Javascript之上，它提供了一个合理的类型系统，可以帮助在编译期间捕获过多的运行时错误。</p><p>以前，如果将tyescript与Node.js一起使用，则需要包括tyescript编译器、tyescript config等。</p><p>Deno run myfile.js的工作原理与运行Deno run myfile.ts完全相同。不需要特定的配置或系统。</p><p>目前，他们正在使用微软的TypeScript编译器，但计划在Ruust中实现自己的编译器。</p><p>与Node.js不同，在Node.js中，一旦构建/编译(如果使用TypeScript)，您将获得一组具有单个入口点的文件，而Deno将始终为您提供单个可执行二进制文件。</p><p>它有一些我在上面提到的权衡，而且仍然相当年轻-因此很容易受到相当多的变化的影响。</p><p>然而，它确实有一个很有前途的未来，我绝对建议你去尝试一下。</p><p>我不是说出去用Deno构建您的下一个应用程序--但也许下次您有一个想要运行的小脚本时，不妨试一试。</p><p>这篇文章的目的绝对是为了让你对Deno有初步的了解，增加你的广度。</p><p>从上面列出的6枚硬币中，你总共可以用多少种方法来创造3美元呢？</p></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://breadth.substack.com/p/what-the-hell-is-a-deno">https://breadth.substack.com/p/what-the-hell-is-a-deno</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/该死/">#该死</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/hell/">#hell</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/app/">#app</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/病毒/">#病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/冠状病毒/">#冠状病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>