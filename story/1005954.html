<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>你可以在Amazon Prime上观看的所有罗杰·埃伯特(Roger Ebert)的伟大电影</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">你可以在Amazon Prime上观看的所有罗杰·埃伯特(Roger Ebert)的伟大电影</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-06-10 10:46:25</div><div class="page_narrow text-break page_content"><p>我和我妻子都是已故影评人罗杰·埃伯特的铁杆粉丝。我们还共享亚马逊优质会员资格。</p><p>我想知道：罗杰·埃伯特(Roger Ebert)最喜欢的哪部电影可以在黄金时段免费观看？既然罗杰·埃伯特(Roger Ebert)的评论数以百计，我有一个完美的借口来写一个网络刮板！</p><p>与你分享罗杰·埃伯特(Roger Ebert)评价为伟大的电影清单。这就是你来这里的目的，对吧？</p><p>附注：如果你只是想看看电影列表，那就跳到这篇文章的末尾吧。</p><p>代码质量警告：我在没有太多重构的情况下以最快的速度将其组合在一起，所以它的可读性或优化程度都不是最高的。但就目前而言，它起作用了&amp；mldr；。</p><p>我在做这件事时遇到了一些障碍，我认为这些障碍值得指出，并将澄清我在实现过程中做出的一些决定。</p><p>针对分配给变量ebert_url的url执行带有Accept：text/html头(我认为这是请求库的默认头)的常规GET将始终返回电影的第一页(无论您将page查询参数设置为什么)。</p><p>解决方案是什么？Accept标头字段需要设置为application/json，服务器才能返回包含该特定页面的电影的JSON。</p><p>首先，他们的目录搜索没有公开可用的Amazon API。看起来你可以给他们发电子邮件来获得授权，但是我不想浪费我的时间。</p><p>我开始使用请求库。事实证明，如果您没有设置适当的浏览器代理，您将得到503和一些关于自动化是如何不受欢迎的消息。如果您确实伪造了一个适当的代理，但没有设置来自服务器响应的cookie，您将得到：</p><p>抱歉，我们只需要确认你不是机器人。为获得最佳结果，请确保您的浏览器接受Cookie。</p><p>您会注意到，我在函数Amazon_search中使用了一些正则表达式来解析页面上的电影片名搜索结果。原因是，当我尝试在搜索结果标签上使用美丽汤的find_all函数时，我什么也得不到。我的猜测是页面上有一些无效的HTML，并混淆了漂亮的html.parser解析器，这并不是非常宽松。</p><p>原来，我可以改用html5lib解析器，而不是使用regex。</p><p>html5lib解析器是最宽松的解析器-比html.parser宽松得多。因此，如果我需要对该函数进行额外的更改，我会重构它以使用该解析器，并去掉看起来令人讨厌的正则表达式。</p><p>没有更多的告别，这里是所有伟大的电影电影，包括在PRIME！</p><p>这里有完整的电影数据集(亚马逊上没有，Prime提供但不是免费的，Prime是免费的)：https://docs.google.com/spreadsheets/d/1XkdEqzXbhivEGhty_hVV8nNeJBhd4HKKSCSIM97MbjA/edit?usp=sharing.</p></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.linisnil.com/articles/scraping-roger-ebert-reviews-and-amazon/">https://www.linisnil.com/articles/scraping-roger-ebert-reviews-and-amazon/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/amazon/">#amazon</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/电影/">#电影</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/prime/">#prime</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/ebert/">#ebert</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1005895.html"><img src="http://img.diglog.com/img/2020/6/thumb_04fbef47f36107bb18cd554f981d81a0.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1005895.html">3M起诉亚马逊店面涉嫌以每只23美元的价格出售假冒N95口罩</a></div><span class="my_story_list_date">2020-6-10 4:6</span></div><div class="col-sm"><div><a target="_blank" href="/story/1005796.html"><img src="http://img.diglog.com/img/2020/6/thumb_ad5a0fe73b8324f8d10d68f0d6de7a84.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1005796.html">亚马逊首席执行官杰夫·贝佐斯发布客户的种族主义信息</a></div><span class="my_story_list_date">2020-6-9 10:22</span></div><div class="col-sm"><div><a target="_blank" href="/story/1005760.html"><img src="http://img.diglog.com/img/2020/6/thumb_0f3996406ccf61c48664354f0750e360.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1005760.html">亚马逊起诉前AWS营销副总裁布莱恩·霍尔(Brian Hall)在他接受谷歌云工作后</a></div><span class="my_story_list_date">2020-6-9 6:34</span></div><div class="col-sm"><div><a target="_blank" href="/story/1005442.html"><img src="http://img.diglog.com/img/2020/6/thumb_0df5f29c7b2bda235bd3677d68372595.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1005442.html">亚马逊的新竞争优势：把自己的产品放在首位</a></div><span class="my_story_list_date">2020-6-6 22:28</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/app/">#app</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/病毒/">#病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/冠状病毒/">#冠状病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>