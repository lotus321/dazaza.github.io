<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>关于C和C++的安全性，科学能告诉我们什么</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">关于C和C++的安全性，科学能告诉我们什么</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-05-28 19:39:12</div><div class="page_narrow text-break page_content"><p>在编程语言领域，没有太多非常有力的实证结果。这很可能是因为有大量的变量需要控制，而研究人员可以获得的大多数研究对象都是CS本科生。然而，我最近发现了一个在众多代码库中重复的结果，据我所知，这使其成为该领域最可靠的发现之一：</p><p>如果您有一个非常大(数百万行代码)的代码库，并且是用内存不安全的编程语言(如C或C++)编写的，那么您可以预期至少65%的安全漏洞是由内存不安全引起的。</p><p>Android(引用)：“我们的数据显示，在Chrome和Android中，释放后使用、双重释放和堆缓冲区溢出等问题通常构成了超过65%的High&amp；Critical安全漏洞。”</p><p>Android的蓝牙和媒体组件(CITE)：“释放后使用(UAF)、整数溢出和越界(OOB)读/写构成了90%的漏洞，其中OOB最为常见。”</p><p>iOS和MacOS(引用)：“纵观整个iOS12，苹果已经修复了261个CVE，其中173个是内存不安全。这占所有漏洞的66.3%。“。“在整个莫哈韦，苹果公司已经修复了298个CVE，其中213个是内存不安全的。这占所有漏洞的71.5%。“。</p><p>Chrome(引用)：“Chromium项目发现，我们大约70%的严重安全漏洞是内存安全问题。”</p><p>微软(Cite)：“微软每年分配给CVE的漏洞中，约有70%仍然是内存安全问题。”</p><p>Firefox的CSS子系统(CITE)：“如果我们有一台时光机，可以从一开始就用Rust编写这个组件，51个(73.9%)的错误是不可能的。”</p><p>Ubuntu的Linux内核(引用)：“在过去六个月Ubuntu对Linux内核进行安全更新的背后，65%的CVE存在内存不安全问题。”</p><p>这些数字与我们在0天内发现的被剥削的情况是一致的。</p><p>这一观察结果已经在许多非常大的代码库中重现，这些代码库由不同的公司构建，开始于不同的时间点，并使用不同的开发方法。我不知道有什么反例。它们的一个共同点是都是用内存不安全的编程语言编写的：C或C++。</p><p>基于这些证据，我准备得出结论，使用内存不安全的编程语言不利于安全性。这将是一个令人兴奋的结果！经验证明，改进软件的技术干预是罕见的，而内存不安全漏洞是我们知道的唯一一种可以通过选择内存安全语言来完全消除的漏洞。然而，我们作为理性经验主义者来处理这个问题，看看证据是否真的值得得出内存不安全的编程语言对安全性有害的结论，这是至关重要的。</p><p>有一些漏洞只存在于内存安全的语言中(例如，在不受信任的输入上使用eval；eval往往只存在于非常高级的语言中，它们都是内存安全的)。</p><p>因此，第一个集合包含这些类型代码库中至少65%的漏洞，从逻辑上讲，第二个集合必须包含35%的漏洞。因此，如果我们将编程语言更改为内存安全的语言，我们至少可以消除65%的漏洞。但是其他几组的大小有变化吗？</p><p>我假设第二个集合保持相同的大小：没有理由或证据认为将C++移植到内存安全的语言会导致额外的SQL注入。</p><p>我们的第三组是特定于内存安全语言的漏洞。根据我的经验，eval在生产代码中的实际使用非常罕见，但是它的近亲“不安全反序列化”确实在现实世界中发生。为了调查其频率，我研究了Java在Android上的不安全反序列化。根据我回顾的研究，Android作为一个整体似乎有十几个这样的系统。基本上每个月它都有比这个类的漏洞更多的内存不安全问题。所以我相信这一类比我们的第一套要小几个数量级。</p><p>总之，经验研究支持这样一个命题，即对这些项目使用内存安全的编程语言将导致漏洞总数的显著减少。</p><p>就像所有的经验性声明一样，随着我们获得更多的数据，这一点可能会被修正。你可以通过以下两种方式证明我是错误的：a)找到用内存编写的非常大的代码库-不安全的语言，经过大量的第一方和第三方安全研究，导致内存不安全的漏洞的比例要低得多；或者b)找到具有内存安全特定漏洞的代码库，其规模相当(每个版本修复数十个)。在获得证据之前，不要费心于假设某人可以编写1000万行代码</p></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://alexgaynor.net/2020/may/27/science-on-memory-unsafety-and-security/">https://alexgaynor.net/2020/may/27/science-on-memory-unsafety-and-security/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/c++/">#c++</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/安全性/">#安全性</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/内存/">#内存</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1003761.html"><img src="http://img.diglog.com/img/2020/5/thumb_5c90dbc8eaee9e115a72c261fa65530a.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1003761.html">Plywood：一种新的跨平台开源C++框架</a></div><span class="my_story_list_date">2020-5-26 13:22</span></div><div class="col-sm"><div><a target="_blank" href="/story/1003690.html"><img src="http://img.diglog.com/img/2020/5/thumb_ac90d32b417868cfe0d109c0677b8187.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1003690.html">用C++实现的SmallTalk-80</a></div><span class="my_story_list_date">2020-5-25 23:15</span></div><div class="col-sm"><div><a target="_blank" href="/story/1003682.html"><img src="http://img.diglog.com/img/2020/5/thumb_ac90d32b417868cfe0d109c0677b8187.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1003682.html">Dbanay/Smalltalk-“by the Blue book”C++Implementation of Smalltalk-80</a></div><span class="my_story_list_date">2020-5-25 21:40</span></div><div class="col-sm"><div><a target="_blank" href="/story/1003557.html"><img src="http://img.diglog.com/img/2020/5/thumb_4d16095418a953c639be9666b70f5aac.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1003557.html">用C++实现简单的协作线程</a></div><span class="my_story_list_date">2020-5-25 3:21</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/病毒/">#病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/冠状病毒/">#冠状病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/app/">#app</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>