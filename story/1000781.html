<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Reaction-Flow：创建基于节点的交互式图形的库</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Reaction-Flow：创建基于节点的交互式图形的库</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-05-05 23:54:06</div><div class="story_img_container"><img src="http://img.diglog.com/img/2020/5/e143cdc76004a381ee210eb9db2ac105.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></div><div class="page_narrow text-break page_content"><p>我们刚刚开源了“Reaction Flow”：一个用于呈现基于节点的交互式图形的库，它具有流畅的平移和缩放行为，有很多不错的功能，甚至还有一些有用的插件，比如迷你地图！</p><p>在这篇文章中，我将向您展示一个简单的Reaction Flow应用程序示例。如果您想更快入门，可以直接转到文档或查看演示：</p><p>如果我们可以帮助您开发一个自定义的基于节点的工具，我们很高兴收到您的消息：[电子邮件受保护]。</p><p>Reaction Flow不仅呈现图形，还增加了交互性，并附带了许多内置功能：</p><p>为了使这个库尽可能灵活，除了位置之外，我们不做任何状态更新。这意味着您需要自己传递更改显示的节点和边的所有函数。您可以实现自己的函数，也可以使用库附带的帮助器函数。</p><p>您可以通过NPM安装Reaction Flow。遗憾的是，Reaction-Flow已经被获取，因此您需要安装Reaction-Flow-渲染器：</p><p>现在您可以将其集成到您的Reaction应用程序中。简单的图表可能如下所示：</p><p>从&#39；REACT&#39；导入ReactFlow从&#39；REACT-FLOW-RENDER&#39；；常量元素=[{id：&#39；1&#39；，数据：{Label：&#39；Node 1&#39；}，位置：{x：250，y：5}}，{id：&#39；2&#39；，数据：{Label：&#39；Node 2&#39；}，位置：{x：100，y：100}}，{id：&#39；e1-2&#39；，源：&#39；1&#39；，目标：&#39；2&#39；，动画：true}]；常量图形样式={宽度：&#39；100%&#39；，高度：&#39；500px&#39；}；常量基本图形=()=&lt；ReactFlow Elements={Elements}style={raphStyles}/&gt；；</p><p>如您所见，我们正在将元素传递给ReactFlow组件。在元素列表中有两个节点和将这些节点彼此连接的边。您可以通过源属性和目标属性的存在来标识边。节点有一些初始位置，因此它们不会重叠。我们还传递了一个样式，以便获得一些空间来呈现图形。您可以在文档中找到完整的选项列表。上面的示例如下所示：</p><p>图形几乎总是具有不同的节点类型。反应流有三种基本类型：输入、默认和输出。您可以使用节点的类型属性选择类型：</p><p>常量元素=[{id：&#39；1&#39；，类型：&#39；输入&#39；，数据：{Label：&#39；输入节点&#39；}，位置：{x：100，y：5}}，{id：&#39；2&#39；，类型：&#39；默认&#39；，数据：{Label：&#39；默认节点&#39；}，位置：{x：100，y：100}}，{id：&#39；3&#39；，类型：&#39；输出&#39；，数据：{label：&#39；输出节点&#39；}，位置：{x：100，y：200}}]；</p><p>如您所见，允许您连接节点的句柄和类型的颜色是不同的。您可以通过传递带有CSS规则的标签和样式对象来自定义这些现有类型：</p><p>常量元素=[{id：&#39；1&#39；，样式：{背景：&#39；#ffcc50&#39；，宽度：100}，数据：{label：&#39；自定义样式&#39；}，位置：{x：100，y：5}}]；</p><p>反应流具有以下边类型：直、默认、阶跃。与节点一样，您可以通过将类型传递给元素列表中的边来选择类型：</p><p>常量元素=[{id：&#39；1&#39；，类型：&#39；输入&#39；，数据：{Label：&#39；Node 1&#39；}，位置：{x：5，y：5}}，{id：&#39；2&#39；，数据：{Label：&#39；Node 2&#39；}，位置：{x：100，y：100}}，{id：&#39；3&#39；，数据：{Label：&#39；Node 3&#39；}，位置：{x：250，y：150}}，{id：&#39；4&#39；，数据：{Label：&#39；Node 4&#39；}，位置：{x：500，y：200}}，{id：&#39；E1-2&39；，来源：&#39；1&#39；，目标：&#39；2&#39；，类型：&#39；直通&#39；}，{id：&#39；E1-3&39；，来源：&#39；1&#39；，目标：&#39；3&#39；，类型：&#39；默认&#39；}，{id：&#39；E1-4&#39；，来源：&#39；1&#39；，目标：&#39；4&#39；，类型：&#39；步骤&#39；}]；</p><p>如果您想创建自定义节点或边类型，可以查看自定义节点示例的源代码。在那里，我们实现了一个自定义节点组件，然后通过将其作为nodeTypes属性传递给Reaction流组件，使其在呈现器中可用。</p><p>正如我在前面指出的，Reaction流具有一些基本的交互性，但不会对呈现的元素进行状态更新。您可以缩放、平移和拖动或选择元素，但是如果您想要添加或删除节点，例如，您需要自己实现该功能，或者使用Reaction流帮助器函数之一。每当Reaction流组件上的元素属性更改时，我们都会重新呈现图形。因此，例如，如果您想要添加一个节点，您需要将一个新节点推送到Elements数组，并将其传递给Reaction流组件。如果要删除节点，则需要通过将函数传递给onElementsRemove prop来侦听Remove事件：</p><p>导入React，{useState}从&#39；Reaction；导入ReactFlow，{removeElements}从&#39；React-Flow-Renender&#39；；const initialElements=[{id：&#39；1&#39；，类型：&#39；输入&#39；，数据：{Label：&#39；Node 1&#39；}，位置：{x：5，y：5}}]；const Graph=()=&gt；{const[Elements，setElements]=useState(InitialElements)；const onElementsRemove=(ElementsToRemove)=&gt；setElements(Els=&gt；removeElements(elementsToRemove，Els))；Return(&lt；ReactFlow Elements={Elements}style={raphStyles}onElementsRemove={onElement。</p><p>Reaction Flow附带两个插件：图形控件和迷你地图。控制面板带有一个放大、缩小和焦点图按钮。您可以将CSS样式传递给它或使用如下所示的默认样式：</p><p>如果您想要将这些插件添加到您的图表中，您只需要将它们作为子级传递给您的Reaction流组件：</p><p>从&#39；REACT&#39；导入ReactFlow，{Minimap，Controls}从&#39；REACT-FLOW-RENDER&#39；常量元素=[{id：&#39；1&#39；，类型：&#39；输入&#39；，数据：{Label：&#39；Node&#39；}，位置：{x：0，y：0}}]；const Graph=()=&gt；{return(&lt；ReactFlow Elements={Elements}style={{width：&#39；100%&#39；，Height：&#39；500px&#39；}})&gt；&lt；最小地图节点颜色={n=&gt；{if(n.type=&#39；input&#39；)return&#39；Blue&#39；if(n.type=&。输出&#39；)返回&#39；绿色&39；；如果(n.type=&#39；默认值&#39；)返回&#39；红色&39；；返回&#39；灰色&39；；}}/&gt；&lt；控件/&gt；)；}。</p><p>在上面的示例中，我们使用nodeColor属性来更改显示节点的颜色。您可以使用nodeColor、nodeBorderRadius、maskColor或style属性来调整迷你地图的外观。</p><p>我希望我能给你们一个很好的反应流程概述。如果您有任何问题或意见，请随时通过邮件或Twitter与我联系，或在Github上发布问题。祝大家万事如意，万事如意！</p></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://webkid.io/blog/react-flow-node-based-graph-library/">https://webkid.io/blog/react-flow-node-based-graph-library/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/flow/">#flow</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/节点/">#节点</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/node/">#node</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/病毒/">#病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/冠状病毒/">#冠状病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/app/">#app</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>