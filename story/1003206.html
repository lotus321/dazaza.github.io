<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>一元函数控制流微库的JavaScript/TypeScript</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">一元函数控制流微库的JavaScript/TypeScript</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-05-22 06:59:53</div><div class="story_img_container"><img src="http://img.diglog.com/img/2020/5/24bb5b081b20c39c228b9c4f36bbc507.jpeg" class="img-fluid my_story_img" onerror="this.style.display='none'"></div><div class="page_narrow text-break page_content"><p>FCF是用Typescript语言编写的一元函数控制流微库，旨在为IF、Switch和While等原生Javascript控制流语句提供功能和语义上的替代。</p><p>像if或switch这样的关键字是命令性语句，通常必须组合到函数中才能赋予它们语义，例如：</p><p>//错误的命令性(非语义)if(文档。VisibilityState=&#39；Visible&#39；){//使用可见文档}Else if(文档。VisibilityState=&#39；HIDDED&#39；){//处理隐藏文档}。</p><p>//好一点.。具有语义函数const isDocumentVisible=()=&gt；document。VisibilityState=&#39；Visible&#39；const isDocumentHidden=()=&gt；文档。visibilityState=&#39；HIDDED&#39；//请注意，这里我们没有存储条件的值，//我们需要引入新的变量If(isDocumentVisible()){//用可见文档做事情}Else if(isDocumentHidden()){//用隐藏文档做事情}。</p><p>使用FCF，我们可以以更具语义的方式编写程序流，保留其条件语句的值：</p><p>从&#39；FCF&#39；常量checkIfApplicationIsActive=FCF导入FCF。IF(Value=&gt；Value=&#39；Visible&#39；)。然后(()=&gt；{//使用可见文档返回&#39；活动&#39；})。ELSE IF(值=&gt；值=&#39；隐藏&#39；)。则(()=&gt；{//使用隐藏文档RETURN&#39；STANDBY&#39；})//检查条件const{value}=checkIfApplicationIsActive。运行(文档。visibilityState)//匹配(&#39；Active&#39；|&#39；Standby&#39；)控制台的第一个`then`调用返回的值。LOG(值)。</p><p>请注意，FCF是严格类型的，因此您可以通过以下方式在TypeScript中重写上面的示例：</p><p>从&#39；fcf&#39；const checkIfApplicationIsActive=fcf//导入FCF使用`[string]`可以定义提供给&#39；run&#39；function//`string`是fcf.if对象保留的值。如果&lt；[字符串]，字符串&gt；(值=&gt；值=&#39；可见&#39；)。则(()=&gt；{//使用可见文档返回&#39；active&#39；})//`value`这里是`string`类型。ELSE IF(值=&gt；值=&#39；隐藏&#39；)。则(()=&gt；{//使用隐藏文档RETURN&#39；STANDBY&#39；})//检查条件const{value}=checkIfApplicationIsActive。运行(文档。visibilityState)//将为&#34；字符串&#34；控制台类型。LOG(值)</p><p>const greetUserByRole=FCF.。开关(USER=&gt；用户。角色)。箱子(&#39；POWER&#39；)。则(()=&gt；{控制台。日志(&#39；早上好，高级用户)})。箱子(底座)。则(()=&gt；{控制台。log(&#39；hello base user&#39；)})。默认(()=&gt；{控制台。log(&#39；hello，无论您是谁)})const Checkuser=FCF。IF(USER=&gt；USER。isLogging)。则(user=&gt；greetUserByRole。运行(用户))。Else(()=&gt；{控制台。Log(&#39；You Not Login&#39；)})Checkuser。运行({Role：&#39；power&#39；，isLogging：true})Checkuser。运行({Role：&#39；base&#39；，isLogging：true})Checkuser。运行({Role：&#39；power&#39；，isLogging：false})。</p><p>selIf(fn：function|any)-添加必须后跟THEN调用的新条件。</p><p>THEN(fn：function)-将回调添加到上一个条件并设置Value属性。</p><p>FCF。if(False)。则(()=&gt；{控制台。日志(您永远不会到这里)})。Else(()=&gt；{控制台。日志(&#39；hello&#39；)})。运行()。</p><p>FCF。if(True)。则(()=&gt；{控制台。日志(您永远不会到这里)})。ElseIf(False)。则(()=&gt；{控制台。日志(&#39；hello&#39；)})。运行()。</p><p>FCF。如果(()=&gt；true)。则(()=&gt；{控制台。日志(您永远不会到这里)})。其他如果(()=&gt；false)。则(()=&gt；{控制台。日志(&#39；hello&#39；)})。运行()。</p><p>FCF。如果(greeting=&gt；greeting=&#39；再见&#39；)。则(()=&gt；{控制台。日志(&#39；再见&#39；)})。其他如果(greeting=&gt；greeting=&#39；hello&#39；)。则(()=&gt；{控制台。日志(&#39；hello&#39；)})。运行(&#39；hello&#39；)。</p><p>const{value}=FCF。如果(greeting=&gt；greeting=&#39；再见&#39；)。然后(()=&gt；{return&#39；再见&39；})。其他如果(greeting=&gt；greeting=&#39；hello&#39；)。然后(()=&gt；{return&#39；hello&#39；})。运行(&#39；hello&#39；)控制台。log(值)//hello</p><p>fcf.switch提供了一种替代原生Javascript switch语句的方法。它还标准化了默认的switch行为，避免了Break语句的需要：匹配的第一个case将避免对其他case求值。</p><p>FCF。切换(问候=&gt；问候)。案例(&#39；你好&#39；)。则(()=&gt；{控制台。日志(&#39；hello&#39；)})。箱子(再见)。则(()=&gt；{控制台。日志(&#39；再见&#39；)})。默认(()=&gt；{控制台。日志(&#39；\\_(ツ)_/&#39；)})。跑(&#39；再见&#39；)。</p><p>CASE(fn：function|any)-添加新案例，后面必须跟THEN调用。</p><p>THEN(fn：Function)-将回调添加到上一个Case调用，并可以设置Value属性。</p><p>FCF。切换(问候=&gt；问候)。案例(&#39；你好&#39；)。则(()=&gt；{控制台。日志(&#39；hello&#39；)})。箱子(再见)。则(()=&gt；{控制台。日志(&#39；再见&#39；)})。默认(()=&gt；{控制台。日志(&#39；\\_(ツ)_/&#39；)})。跑(&#39；再见&#39；)。</p><p>默认方法的工作方式类似于普通的switch语句：如果没有匹配的case，将调用默认方法。</p><p>FCF。切换(问候=&gt；问候)。箱子(再见)。则(()=&gt；{控制台。日志(您永远不会到这里)})。默认(greeting=&gt；{控制台。log(问候语)})。运行(&#39；hello&#39；)。</p><p>FCF。切换(问候=&gt；问候)。箱子(()=&gt；；#39；再见)。则(()=&gt；{控制台。日志(&#39；再见&#39；)})。案例(()=&gt；&#39；hello&#39；)。则(()=&gt；{控制台。日志(&#39；hello&#39；)})。运行(&#39；hello&#39；)</p><p>FCF。切换(问候=&gt；问候)。案例(问候=&gt；问候=#39；再见&#39；)。则(()=&gt；{控制台。日志(&#39；再见&#39；)})。案例(greeting=&gt；greeting=&#39；hello&#39；)。则(()=&gt；{控制台。日志(&#39；hello&#39；)})。运行(&#39；hello&#39；)。</p><p>const{value}=FCF。切换(问候=&gt；问候)。案例(问候=&gt；问候=#39；再见&#39；)。然后(()=&gt；{return&#39；再见&39；})。案例(greeting=&gt；greeting=&#39；hello&#39；)。然后(()=&gt；{return&#39；hello&#39；})。运行(&#39；hello&#39；)控制台。log(值)//hello。</p><p>fcf.while为本机Javascript While语句提供了一种替代方法，它使用requestAnimationFrame或setImmediate来运行循环，从而使其在浏览器和节点中的行为标准化。</p><p>Do(fn：function)-添加一个回调，当WhileFlow运行时将永远调用该回调。如果DO函数将返回FALSE，则会停止While流。</p><p>Break(fn？：function)-如果调用，它将停止While流。当流将停止时，它最终接受一个回调来调用。</p><p>const loggerFlow=FCF。While(True)。do(()=&gt；{控制台。日志(&#39；hello&#39；)})。run()//在1秒后停止While循环setTimeout(()=&gt；{loggerFlow.。Break()}，1000)。</p><p>fcf//它将一直记录到文档。visibilityState=&#39；可见&#39；//否则它将被停止。而(()=&gt；文档。VisibilityState=&#39；可见&#39；)。do(()=&gt；{控制台。日志(&#39；hello&#39；)})。运行()。</p><p>FCF。While(True)//它将只记录一次，然后停止While流。do(()=&gt；{控制台。log(&#39；hello&#39；)return false})。运行()</p><p>const greetUser=Fcf。开关(USER=&gt；用户。角色)。箱子(&#39；POWER&#39；)。则(()=&gt；{控制台。日志(&#39；早上好，高级用户)})。然后(底座)。则(()=&gt；{控制台。log(&#39；hello base user&#39；)})。默认(()=&gt；{控制台。log(&#39；hello base user&#39；)})fcf。While(True)。do(User=&gt；greetUser.。运行(用户))。运行(用户)</p></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://github.com/GianlucaGuarini/fcf">https://github.com/GianlucaGuarini/fcf</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/java/">#java</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/控制流/">#控制流</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/fcf/">#fcf</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1002993.html"><img src="http://img.diglog.com/img/2020/5/thumb_9e62b936a141e39fbdf5eb53cc783c82.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1002993.html">JavaScript的第三个时代</a></div><span class="my_story_list_date">2020-5-21 1:50</span></div><div class="col-sm"><div><a target="_blank" href="/story/1002747.html"><img src="http://img.diglog.com/img/2020/5/thumb_d88be342f778ae311b6e5a0efb01cc19.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1002747.html">Java.net.SocketInputStream.socketRead0中的线程卡住</a></div><span class="my_story_list_date">2020-5-19 15:9</span></div><div class="col-sm"><div><a target="_blank" href="/story/1002664.html"><img src="http://img.diglog.com/img/2020/5/thumb_67b7a85eaa8b05887a33b151c8d7f9f2.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1002664.html">JavaScript Promise.all与Promise.allSetted</a></div><span class="my_story_list_date">2020-5-19 1:2</span></div><div class="col-sm"><div><a target="_blank" href="/story/1002313.html"><img src="http://img.diglog.com/img/2020/5/thumb_fc9482f732de35ce76f0c4d07897163c.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1002313.html">JavaScript的多世界解释</a></div><span class="my_story_list_date">2020-5-16 5:38</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/app/">#app</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/病毒/">#病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/冠状病毒/">#冠状病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>