<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>如果我们一直有更好的HTML-in-JS语法会怎么样？</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">如果我们一直有更好的HTML-in-JS语法会怎么样？</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-05-11 23:34:18</div><div class="page_narrow text-break page_content"><p>⇦我有一个理论，认为1995年犯了一个严重的错误--决定不用一种整洁、简洁和声明的方式来表示JavaScript中的HTML元素。</p><p>在这篇文章中，我将描述事情的现状，展示几个对javascript语法的非常小的补充，它们可能已经产生了很大的不同，然后再谈一谈它带来的影响。在这篇文章中，我将描述目前的状况，展示几个对javascript语法的非常小的补充，它们可能会带来很大的不同，然后再谈论其影响。</p><p>const myLi=Name=&gt；`&lt；li&gt；我的名字是&lt；em&gt；${name}&lt；/em&gt；&lt；/li&gt；`const Myul=Names=&gt；`&lt；ul class=&#34；my-ul&#34；&gt；${names.map(myLi).join(&#39；&#39；)}&lt；/ul&gt；`。</p><p>这是垃圾，原因很明显--编写字符串很容易出错，没有输入/打印等等。然后我们必须将它们转换为不太优雅的元素：</p><p>当然，也有各种各样的库，从字符串模板库(如把手)到可编译的库(如.jsx)。</p><p>类型HtmlNode={Tag：String，Attributes：{[Key：String]：String|Function}，子项：(HtmlNode|String)[]}。</p><p>{Tag：&#34；Button&#34；，Attributes：{&#34；id&#34；：&#34；Baz&#34；，&#34；class&#34；：&#34；Foo bar&#34；，&#34；data&#34；：&#34；1&#34；，&#34；onclick&#34；：F，}，Children：[&#34；Hello&#34；，{tag：&#34；em&#34；，属性：{}，子项：[&#34；here&#34；]，}]}。</p><p>HTML(lang=&#34；EN&#34；)head title=pageTitle body h1.一些类Jade-node模板引擎#CONTAIN-如果(YouAreUsingJade)你很棒</p><p>这看起来不错，主要问题是我们在编程构造上有点局限，例如，我们如何使&lt；h1&gt；在某些条件下隐藏额外的类？Jade通过3种不同的方式指定类来绕过这个问题。与其想出一种特殊的模板语言，不如稍微扩展一下普通的js语法。</p><p>好的，让我们来看看上面的例子。我不会过多地强调这一点的正确性，因为我并不是建议我们更改所有代码，而只是更改可能的代码。</p><p>因此，下面是允许现有js对象语法以相当简洁的方式表示html节点的事项清单：</p><p>除了键：值对之外，对象还允许拖尾值。我想可以用foo.~或一些特殊的构造来访问它们。</p><p>它们获得一个可选标签(在本例中为按钮)。如果您做过很多JSON反序列化工作，那么标记似乎是个好主意(它们可以帮助您将数据映射到类型)，看看它们在edn-nices中是如何使用的(通过自定义命名空间)。</p><p>就是这样。我们的javascript将使用它作为主数据类型(其他所有内容都将保持不变)。也许，我们会开始(重新)编写所有类似XML的html，以便也使用这种语法。</p><p>Const Names=[&#34；Barry&34；，&#34；Lynette&34；]Const myLi=name=&gt；li{&#39；我的名字是&#39；em{name}}const Myul=Names=&gt；ul{class：[&#39；my-ul&#39；].names.map(MyLi)}app.get(&#39；/&#39；，(req，res)=&gt；res.。</p><p>正文{class：&#34；language-javascript&#34；a{href：&#34；index.html&#34；img{style：&#34；Height：2EM&#34；src：&#34；pic.png&#34；}&#34；⇦&#34；}H1{&#34；如果我们最好使用代码{&#34；html&#34；}&#34；-in-&##。}句法一直？p我有一个理论，1995年犯了一个严重的错误.&#34；}}。</p><p>JSON和HTML之间没有区别。(API设计的下游后果会是什么？)。</p><p>我们的html只是结构化的数据，这会不断地让我们目不转睛地看着我们。</p><p>我们就不会有像淘汰赛(还记得那一次吗？)那样在html中使用奇怪逻辑的年代了。</p><p>我们在1996年可能会有类似的反应，而那只会是废话，很明显，我们会像诅咒一样做这件事。(这句话的意思是：“如果是在1996年，我们可能会有类似的反应，而那只会是废话，显然我们会像诅咒一样做这件事)。”</p><p>我们本可以拥有一个可组合的库，用于日期选择器、情态函数等，而不必使用这个庞大的库。</p><p>没有人会使用handlebar/jinsa/twig string munging库来制作html(至少在节点世界中是这样)。</p><p>html&lt；form&gt；-&gt；json阻抗不匹配(尝试将嵌套数据描述为表单)现在可能已经正确排序。</p><p>本世纪初，每个人的一切都是XML的计划可能会更成功。(这会是件好事吗？)</p><p>我认为这是一个足够好的解决方案，但是它与您的标准js对象的语法不同这一事实鼓励人们将VDOM对象视为不是普通数据，但事实并非如此。记谱法本身就是一种思维工具。</p><p>我们的另类历史从未发生过，我更喜欢无聊的超级脚本风格，一切都是代码。</p></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://leontrolski.github.io/dom-syntax.html">https://leontrolski.github.io/dom-syntax.html</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/js/">#js</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/html/">#html</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/病毒/">#病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/冠状病毒/">#冠状病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/app/">#app</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>