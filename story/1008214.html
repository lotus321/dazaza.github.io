<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>BLEU得分</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">BLEU得分</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-06-25 23:52:12</div><div class="page_narrow text-break page_content"><p>BLEU是机器翻译与人工翻译对比评价的标准算法。起初，我认为它的使用应该非常简单。然而，事实证明，其中有很多警告。</p><p>在这篇博客文章中，我将详细介绍BLEU算法，并谈谈其中的注意事项。</p><p>我们对候选句子中的每个ngram进行计数，无论它是否已经在任何参考句子中显示，收集每个唯一ngram的总计数，将每个唯一ngram的总计数相加，并除以候选句子中的ngram的数量。</p><p>我们首先计算单字精确度，例如1。候选句子中的所有单字都已经在参考句子中显示出来了。</p><p>候选语句中唯一单字的计数总数为7，候选语句中的单字总数为7，实例1的单字精度为7/7=1.0。</p><p>候选句子中唯一的二元语法的计数总数为5，候选句子中的二元语法总数为6，以例1为例，二元语法精度为5/6=0.833。</p><p>我们首先计算单字精确度，例如2。候选句子中的所有单字都已经在参考句子中显示出来了。</p><p>候选语句中唯一单字的计数总数为8，候选语句中的单字总数为8，实例2的单字精度为8/8=1.0。</p><p>候选句子中唯一的二元语法的计数总数为0，候选句子中的二元语法总数为7，示例2的二元语法精度为0/7=0。</p><p>我们可以从示例1和2中看到，单字精度很容易对机器翻译的质量过于自信。为了克服这个问题，提出了限幅计数和修正精度。</p><p>对于每个独特的ngram，我们统计其在每个参照句中的最大频率。这个特殊计数和原始计数的最小值称为修剪后的计数。也就是说，裁剪后的计数不大于原始计数。然后，我们使用这个修剪后的计数代替原来的计数来计算修改后的精度。</p><p>候选语句中唯一单字的裁剪计数总数为5，候选语句中的单字总数为7，实例1的单字修改精度为5/7=0.714。</p><p>候选语句中唯一双字词的裁剪计数总数为4，候选语句中的单字字总数为6，例1的双字词修改精度为4/6=0.667。</p><p>候选句中唯一双字的修剪计数总数为0，候选语句中的单字总数为8，例2的单字修改精度为2/8=0.25。</p><p>候选句子中唯一的二元语法的剪裁计数总数为0，候选句子中的二元语法总数为7，示例2的二元语法精度为0/7=0。</p><p>与精度相比，我们发现修正的精度是一个更好的度量，至少对于unigram是这样。</p><p>其中$p_n$是$n$gram的修正精度，$\log$的基数是自然基数$e$，$w_n$是$\log p_n$和$\sum_{n=1}^{N}w_n=1$之间的权重，BP是惩罚短机器翻译的简明惩罚。</p><p>其中$c$是所有候选句子中的单字数(长度)，$r$是语料库中每个候选句子的最佳匹配长度。这里，最佳匹配长度是与候选句子最接近的参考句子长度。例如，如果有三个引用，长度分别为12、14和17个单词，并且候选翻译是简洁的13个单词，则理想情况下，最佳匹配长度可以是12或14，但我们可以随意选择较短的一个，即12。</p><p>通常，对“BLEU”的评价是在语料库上进行的，语料库中有许多从不同原文翻译过来的候选句子，每个候选句子都有几个参考句。则$c$是所有候选句子中单字(长度)的总数，而$r$是语料库中每个候选句子的最佳匹配长度之和。</p><p>不难发现，BLEU总是在0到1之间，这是因为BP，$w_n$，$p_n$总是在0到1之间，</p><p>我们计算了一些ngram的修正精度。其他的都不难计算。具体地说，我们有。</p><p>因为语料库只有一个翻译集，因此$c=7$和$r=7$。</p><p>&gt；&gt；&gt；import nltk；&gt；&gt；Reference_1=&#34；猫在垫子上。Split()&gt；&gt；&gt；reference_2=&#34；垫子上有一只猫。Split()&gt；&gt；&gt；候选人=&#34；那只猫，垫子上的那只猫。拆分()&gt；&gt；BLEU=nltk。翻译一下。BLEU得分。句子_BLEU(References=[Reference_1，Reference_2]，假设=候选项，权重=(0.25，0.25，0.25，0.25))&gt；&gt；&gt；print(BLEU)0.4671379777282001。</p><p>BLEU的值是0.467，和我们手工计算的BLEU是完全匹配的。</p><p>因为语料库只有一个翻译集，因此$c=8$和$r=7$。</p><p>当我们将这些值插入BLEU方程时，实际上我们需要计算$\log0$，这在数学上没有定义。对于$p_2$、$p_3$和$p_4$，我们使用一个小数字$10^{-100}$而不是$0$。BLEU是。</p><p>&gt；&gt；&gt；import nltk；&gt；&gt；Reference_1=&#34；猫在垫子上。Split()&gt；&gt；&gt；reference_2=&#34；垫子上有一只猫。拆分()&gt；&gt；&gt；候选人=&#34；该&#34；。拆分()&gt；&gt；BLEU=nltk。翻译一下。BLEU得分。句子_BLEU(References=[Reference_1，Reference_2]，假设=候选，权重=(0.25，0.25，0.25，0.25))&gt；&gt；&gt；print(BLEU)1.2882297539194154e-231。</p><p>BLEU的值是0，与我们手工计算的BLEU完全匹配。</p><p>请注意，在上面的两个示例中，由于候选句子很长，并且我们在语料库中只有一个翻译，因此$\text{bp}=1$。实际上，可能存在$\text{bp}&lt；1$的情况。</p><p>在一些场景中，BLEU的翻译得分不是很高，特别是那些参考句子很少的简短翻译。例如,。</p><p>&gt；&gt；&gt；import nltk；&gt；&gt；Reference_1=&#34；您准备好了吗？&#34；。Split()&gt；&gt；&gt；候选人=&#34；您准备好了吗？拆分()&gt；&gt；BLEU=nltk。翻译一下。BLEU得分。句子_BLEU(参考=[参考_1]，假设=候选，权重=[0.25，0.25，0.25，0.25])&gt；&gt；&gt；print(BLEU)1.133422688662942e-154。</p><p>对我来说，这实际上是一个非常好的机器翻译。然而，BLEU的分数是0，这意味着机器翻译是完全错误的。</p><p>&gt；&gt；&gt；import nltk；&gt；&gt；Reference_1=&#34；您准备好了吗？&#34；。Split()&gt；&gt；&gt；候选人=&#34；您准备好了吗？拆分()&gt；&gt；BLEU=nltk。翻译一下。BLEU得分。句子_BLEU(参考=[参考_1]，假设=候选，权重=[0.2 5，0.2 5，0.2 5，0.2 5]，平滑函数=nltk。翻译一下。BLEU得分。SmoothingFunction()。方法7)&gt；&gt；&gt；打印(BLEU)0.4002926439114545。</p><p>这一次，BLEU的值是0·4，比我们没有使用平滑函数计算的香草值神奇地高了。</p><p>但是，对于BLEU计算中使用的平滑函数，应该始终保持谨慎。至少我们必须确保我们正在比较的BLEU分数没有使用平滑函数，或者使用了完全相同的平滑函数。</p></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://leimao.github.io/blog/BLEU-Score/">https://leimao.github.io/blog/BLEU-Score/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/bleu/">#bleu</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/app/">#app</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/病毒/">#病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/冠状病毒/">#冠状病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>