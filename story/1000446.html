<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>所以我逆向设计了两个约会应用</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">所以我逆向设计了两个约会应用</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-05-03 11:46:12</div><div class="page_narrow text-break page_content"><p>在这篇文章中，我展示了我在Coffee Meets、Bagel和The League应用程序逆向工程过程中的一些发现。在研究过程中，我发现了几个关键漏洞，所有这些漏洞都已报告给受影响的供应商。</p><p>在这个前所未有的时代，越来越多的人逃往数字世界，以应对社会距离。在这些时期，网络安全比以往任何时候都更加重要。根据我有限的经验，很少有初创公司会注意到安全最佳实践。负责大量约会应用的公司也不例外。我开始了这个小小的研究项目，看看最新的约会应用有多安全。</p><p>此帖子中披露的所有严重漏洞都已报告给供应商。到发布时，相应的补丁已经发布，我已经独立地验证了修复已经到位。</p><p>咖啡遇见百吉饼或简称CMB，于2012年推出，以每天向用户展示有限数量的火柴而闻名。他们在2019年曾被黑客入侵过一次，600万个账户被盗。泄露的信息包括全名、电子邮件地址、年龄、注册日期和性别。近年来，中巴越来越受欢迎，是这个项目的一个很好的候选者。</p><p>联盟应用程序的口号是“智能约会”。它于2015年推出，是一款仅限会员使用的应用，基于LinkedIn和Facebook个人资料进行接受和匹配。这款应用程序比它的替代品更贵，更有选择性，但安全性与价格持平吗？</p><p>对于逆向工程，我采用静态分析和动态分析相结合的方法。对于静态分析，我主要使用apktool和jadx对APK进行反编译。对于动态分析，我使用具有SSL代理功能的MITM网络代理。</p><p>大部分测试都是在一个运行Android 8 Oreo的带根的Android模拟器中完成的。需要更多功能的测试是在运行Lineage OS16(基于Android Pie)、根植于Magisk的真实Android设备上进行的。</p><p>这两款应用都有很多跟踪器和遥测功能，但我想这就是行业现状。不过，招商银行的跟踪器比联盟还多。</p><p>该接口在每个百吉饼对象中都包含一个Pair_action字段，它是一个具有下列值的枚举：</p><p>有一个API可以在给定百吉饼ID的情况下返回百吉饼对象。百吉饼ID显示在每日百吉饼批次中。因此，如果您想查看是否有人拒绝了您，您可以尝试以下操作：</p><p>在打电话获取每日推荐的百吉饼之后，保存你喜欢的人的百吉饼ID。</p><p>这是一个无害的漏洞，但有趣的是，此字段通过API公开，但不能通过应用程序使用。</p><p>CMB显示其他用户的经度和纬度，小数点后最多2位，约为1平方英里。幸运的是，这些信息不是实时的，只有当用户选择更新他们的位置时才会更新。(我想这一定是应用程序用于配对的目的。我还没有验证这一假设。)。</p><p>该应用程序发送一个POST请求，其中包含电话号码、动态口令和持有者值，后者是一个16字节的UUID。</p><p>服务器接收请求，如果动态口令与电话号码匹配，则持有者将成为用户的登录令牌。</p><p>从这一点来看，对需要身份验证的端点的后续请求将包括头Authorization：承载SMS：{THE_UUID}。</p><p>成为承载的UUID完全由客户端生成。更糟糕的是，服务器没有验证承载器值是否为实际有效的UUID。它可能会导致碰撞和其他问题。</p><p>我建议更改登录模型，以便在服务器从客户端接收到正确的OTP后，在服务器端生成承载令牌并将其发送到客户端。</p><p>在联盟中，存在一个接受电话号码作为查询参数的未经验证的API。API会泄漏HTTP响应代码中的信息。当电话号码注册时，它返回200OK，但当号码未注册时，它返回418I&#39；m一个茶壶。它可能会以几种方式被滥用，例如，将所有号码映射到一个区号下，以查看谁在联盟，谁不在联盟。或者，当你的同事发现你在……时，可能会导致潜在的尴尬。</p><p>此后，当向供应商报告该错误时，该问题已得到修复。现在API只为所有请求返回200。</p><p>该联盟与LinkedIn集成，在用户的个人资料中显示用户的雇主和职称。有时候收集信息有点过头了。Profile API返回从LinkedIn抓取的详细职位信息，如开始年、结束年等。</p><p>虽然这款应用确实会要求用户允许阅读LinkedIn个人资料，但用户可能并不希望详细的职位信息包含在他们的个人资料中，供其他所有人查看。我不认为这类信息是应用程序运行所必需的，而且很可能可以从个人资料数据中排除这些信息。</p><p>通常用于图片</p></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://push32.com/post/dating-app-fail/">https://push32.com/post/dating-app-fail/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/app/">#app</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/逆向/">#逆向</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1000418.html"><img src="http://img.diglog.com/img/2020/5/thumb_e5cf8c3859e786c4c98017808af27b4a.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1000418.html">苹果和谷歌的冠状病毒暴露通知API：问答</a></div><span class="my_story_list_date">2020-5-3 5:48</span></div><div class="col-sm"><div><a target="_blank" href="/story/1000400.html"><img src="http://img.diglog.com/img/2020/5/thumb_24e61a8175af932d24d6bfab5f86fc71.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1000400.html">监狱用不起作用的智能手机应用程序更换脚踝手镯</a></div><span class="my_story_list_date">2020-5-3 3:56</span></div><div class="col-sm"><div><a target="_blank" href="/story/1000384.html"><img src="http://img.diglog.com/img/2020/5/thumb_1769b6a0f17c0e48c8635e328b7fa25e.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1000384.html">为什么SARS-CoV-2蓝牙联系人追踪应用程序是一个非常愚蠢的想法</a></div><span class="my_story_list_date">2020-5-3 1:20</span></div><div class="col-sm"><div><a target="_blank" href="/story/1000371.html"><img src="http://img.diglog.com/img/2020/5/thumb_546e753033663eb7f8c193f85c086183.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1000371.html">Ubuntu 20.04 LTS对抓拍的痴迷让我彻底摆脱了它</a></div><span class="my_story_list_date">2020-5-2 23:50</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/病毒/">#病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>