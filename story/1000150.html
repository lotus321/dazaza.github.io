<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Linux主目录管理即将经历重大变革</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random=2020-05-02-21:20"><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg navbar-light bg-light"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1>Linux主目录管理即将经历重大变革</h1><div class="row"><div class="col-lg-8 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time">2020-05-02 17:54:10</div><p>与systemd245一起推出的是systemd-homed。随之而来的是，Linux管理员将不得不改变他们管理用户和用户主目录的方式。</p><p>当systemd在2010年发布时，围绕Linux中服务启动方式的改变引发了一场尖酸刻薄的风暴。新的机制被吹捧为臃肿和过于复杂，没有用。从那时起，所有的企业Linux发行版都采用了systemd，大多数桌面发行版也采用了systemd。</p><p>对于那些不熟悉systemd的人来说，它可以初始化Linux平台上的所有系统。在数据中心内管理Linux的任何人都应该非常熟悉这个系统。通过提供设备管理、用户登录、网络连接和事件日志记录所需的所有控件和守护程序，systemd便于资源初始化和管理-所有这些都可以从单个入口点(Systemctl)进行。在systemd之前，每个系统和资源都经过管理.。</p><p>但其中一位创造者利安纳特·波特林(Leannart Poetling)一直认为系统d是不完整的。随着systemd245的即将发布，Poetling将使他的系统更接近完成。这一步是通过回家的方式进行的。</p><p>在我们深入研究HOMED之前，让我们先来看看/home目录。这是Linux文件系统层次结构中的一个重要目录，因为它包含所有用户数据和配置。对于某些管理员来说，此目录非常重要，通常会将其放在与操作系统不同的分区或驱动器上。通过这样做，即使操作系统崩溃，用户数据也是安全的。</p><p>但是，操作系统中处理/home的方式使得迁移/home目录并不像应该的那样容易。为什么？在当前的systemd迭代中，用户信息(如ID、全名、主目录和shell)存储在/etc/passwd中，与该用户关联的密码存储在/etc/dow中。任何人都可以查看/etc/passwd文件，而/etc/dow只能由具有管理员或sudo权限的用户查看。</p><p>如果登录成功，系统将读取用户的/etc/passwd条目以定位用户的主目录。</p><p>因此，对于简单的登录操作，需要三种机制(systemd、/etc/dow、/etc/passwd)。这是低效的，波特林已经决定做出巨大的改变。这一变化是原地踏步的。使用HOMED，所有信息都将放在每个用户的加密签名的JSON记录中。该记录将包含所有用户信息，如用户名、组成员身份和密码散列。</p><p>每个用户主目录将链接为Luk加密的容器，加密直接耦合到用户登录。在systemd-homed检测到用户已登录后，将解密关联的主目录。一旦该用户注销，主目录将自动加密。</p><p>除了包含一个大大改进的安全性之外，systemd-homed最终将启用一个真正可移植的主目录。由于/home目录将不再依赖于systemd、/etc/passwd和/etc/dow三者，因此用户和管理员将能够轻松地迁移/home中的目录。想象一下，能够将/home/user(其中user是您的用户名)目录移动到便携式闪存驱动器，并在任何使用systemd-homed的系统上使用它。你可以很容易地运送..。</p><p>这不仅适用于用户文件，还适用于个人设置、首选项，甚至身份验证信息。</p><p>这是通过使用JSON用户记录来确认用户身份来实现的。具体工作方式将取决于用于存储/访问用户主目录的机制。这些机制包括：</p><p>根据Poetling的说法，Luks是这些系统中最先进和最安全的。使用LUK时，加密卷存储在可移动设备上或环回文件中。LUKS卷包含一个以用户命名的目录，该目录将成为用户的主目录，并包含存储在LUKS标头中的用户记录的副本。当用户成功通过身份验证时，systemd-homed将解锁LUKS卷并比较存储在LUKS标头中的记录.。</p><p>与当前创建用户的过程(使用useradd或adduser命令)不同，systemd-homed将依赖于它自己的用户创建过程。幸运的是，这个过程不会非常复杂。</p><p>事实上，与许多与systemd关联的子系统一样，systemd-homed会有自己的控制命令：</p><p>其中，用户名是用户名，实名是用户的名字和姓氏。</p><p>当然，如此重大的变化并不是没有它的一份警告。在SYSTEM-HOME的情况下，这一警告是通过SSH的方式实现的。如果在用户成功登录之前对systemd托管的主目录进行加密，则用户如何能够使用SSH登录到远程计算机？这样做的大问题是.ssh目录(其中SS</p><div class="sotry_link"><a target="_blank" href="https://www.techrepublic.com/article/linux-home-directory-management-is-about-to-undergo-major-change/">https://www.techrepublic.com/article/linux-home-directory-management-is-about-to-undergo-major-change/</a></div><div class="story_tags"><button type="button" class="btn btn-light my_tag"><a href="/tag/systemd/">#systemd</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/用户/">#用户</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/user/">#user</a></button></div></div></div><div class="col-lg-4 col-0"><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/百度/">#百度</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/搜索/">#搜索</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/科学/">#科学</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/flash/">#flash</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/人像/">#人像</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/动物/">#动物</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/互联网/">#互联网</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/logo/">#logo</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/在线/">#在线</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/twitter/">#twitter</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/浏览器/">#浏览器</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/电影/">#电影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/搜索引擎/">#搜索引擎</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/雷人/">#雷人</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/腾讯/">#腾讯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/搞笑/">#搞笑</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/日本/">#日本</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/css/">#css</a></button></div></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com <div style="color:#ffffff;font-size:1px;">2020-05-02 21:20:11</div></div></div><script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script><script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script></body></html>