<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>用JavaScript构建纵横字谜生成器</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">用JavaScript构建纵横字谜生成器</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-05-08 20:15:36</div><div class="story_img_container"><img src="http://img.diglog.com/img/2020/5/d72ffe485c42f0095f2f2827dc50cf16.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></div><div class="page_narrow text-break page_content"><p>又到了JavaScript教程的时间了。这将是我到目前为止介绍的最复杂的代码，所以我希望您已经注意到了，而不仅仅是复制和粘贴！在这篇文章中，您将学习如何使用JavaScript构建纵横字谜生成器。</p><p>首先，我将介绍这个项目的灵感来源，然后我将讨论不同的组件是什么以及它们是如何组合在一起的，最后我将讨论我所做的性能优化。</p><p>您可以通过单击此链接进行试用。不过，在单击按钮后要有耐心，因为有时创建纵横字谜需要一些时间。你很快就会明白为什么。</p><p>我已经编程很多年了，一路上犯了很多错误。我喜欢把自己想象成对构建软件略知一二的人。有大量的事情我不知道，但我对我的技能和我学习新概念和技术的能力充满信心。</p><p>然而，我并不是一夜之间就有了这样的信心。我曾经相当糟糕，当我有机会查看我多年前的一些代码时，我会对我所做的愚蠢的事情感到畏缩。</p><p>所以，如果现在是你，别难过！我们都必须从头做起，才能做好任何有价值的事情。</p><p>这给我带来了一个小小的故事。我通过移植一个旧的Java程序创建了这个填字游戏生成器，这个Java程序是我刚从大学毕业时写回的。我已经很多年没有看过它了，我告诉你，它相当粗糙。如果你想嘲笑我，可以在GitHub上看看。</p><p>我通过一次使用一个Java方法开始移植过程。我用一个闪亮的新JavaScript函数替换了每一个函数，该函数复制了它的逻辑。随着我的进步，我开始重构它，修复错误，并提高性能。</p><p>最终的产品不是完全干净的代码，但它比以前好了很多。</p><p>在完成我的纵横填字游戏生成器的JavaScript版本之后，我开始想知道是否值得为它写一篇教程。我百分之百确定有比我使用的算法更好的算法，我也百分之百确定我可以做更多的可读性和效率改进。我不想教你们任何坏习惯。</p><p>最后我觉得这是个好主意。有这么多教程真的很琐碎，并且不能让您很好地了解典型的公司代码库是什么样子。这会给你一个更好的近似值。这是多个能力水平各不相同的开发人员多年来在一个相当复杂的问题上的协作。碰巧两个开发人员都是我。😂。</p><p>它还会让您有机会添加您自己的改进，这是成长为开发人员的关键。</p><p>我们正在构建一个使用JavaScript、HTML和CSS的纵横填字游戏生成器。这个想法是拿出一大串单词，随机挑选一些，然后试着用它们做一个纵横填字游戏。</p><p>我们将从在网格上放置一个单词开始。然后，我们将获得另一个可能与该单词相关联的候选单词。那么我们将对另一个单词做同样的操作。我们将在ON上继续此过程，每次放置单词或单词不适合拼图中的任何位置时，都会选择一个不同的单词。</p><p>我们什么时候才能停止试着用词呢？这是一个由两个主要因素决定的复杂答案：</p><p>一旦做好了纵横字谜，我们就会继续创造更多的纵横字谜。然后我们会找到单词交叉点最多的一个，并将其显示在屏幕上！</p><p>在这篇文章中，我不会像在以前的一些教程中那样深入研究杂草。有太多的功能和边缘案例要处理。相反，我认为如果我详细解释我们将创建的高级组件将是最有帮助的。知道所有的部件是如何组合在一起的就是成功的一半。</p><p>我真的鼓励您研究每个函数都完成了什么，同时牢记哪些变量正在更改。如果你不明白什么，评论区是一个很好的求助方式。其他人可能会为此感谢你。</p><p>在我最初的版本中，我从一个文本文件中调出了詹姆斯国王的圣经。</p><p>在更新版本中，我只是制作了一个包含大量单词的JavaScript数组。您可以在这里查看。</p><p>要将一个单词放到网格上，我们需要了解一些有关它的事情。显然，我们需要知道单词本身的文本，但我们还需要知道它的位置。我们需要一行和一列来标记它的起始位置。我们还需要一个布尔值来表示单词在方向上是水平的还是垂直的。</p><p>我们将使用我们自己创建的Word对象来表示单词。您可以在这里查看。</p><p>我们正在创建的纵横填字游戏对象是完全完成的纵横填字游戏的表示形式。每一个都有不同的功能，服务于不同的目的。下面是每个函数及其功能的综合列表：</p><p>invadingRegion：确定一个单词是否会在某个位置入侵另一个单词的领土。</p><p>覆盖HorizontalWord：确定将字符放在特定行/列是否会覆盖水平单词。</p><p>overwrite ingVerticalWord：确定将字符放在特定行/列是否会覆盖垂直字。</p><p>一旦我们有能力将单词放在网格上，我们就需要开始制作一大堆纵横填字游戏。然后，我们需要挑选最好的一个并将其显示在屏幕上。执行所有这些操作的顶级函数称为createCrosswordPutle。</p><p>createCrosswordPutle函数有几个有助于实现其目标的嵌套函数。下面是每个函数及其功能的综合列表：</p><p>temtemptToPlaceWordOnGrid：取一个给定的单词，并尝试将其放在纵横填字游戏上。</p><p>isGoodWord：根据黑板上的字母确定一个单词是否适合放在纵横字谜游戏中。</p><p>Push UsedWords：将一个单词标记为已使用，并将其字母添加到填字游戏中出现的字母列表中。</p><p>除了上述函数外，该文件还包含一些助手函数，用于获取未使用的单词和各种随机值。</p><p>我希望前面的几节已经帮助您了解了所有部分是如何组合在一起的。纵横字谜生成器不是一个微不足道的问题，但将其分解为较小的问题是解决它的一个好方法。事实上，对于任何编程任务来说，这都是一种很好的方法。</p><p>我想更详细地谈一谈另一个方面。默认情况下，此代码速度不是很快。有非常大量的嵌套循环。</p><p>我将与你们分享我为使其更快而采取的步骤。如果你知道更好的算法，我希望你能给我写个评论。这是一门毕生的手艺，我既是一名学生，也是一名教师。</p><p>我采取了4个步骤来提高性能。我会把它们称为调整输入，选择智能单词，知道什么时候退出，以及说它足够好。</p><p>有两个变量可以对程序的速度产生重大影响。一个控制要创建的网格的数量，另一个控制尝试将单词放入网格的次数。</p><p>我发现尝试次数越多，意味着我可以减少要创建的网格总数。高次数的尝试有助于确保纵横填字游戏将密密麻麻地填满单词。</p><p>自己操作这些输入，注意它们如何影响程序的速度以及纵横填字游戏的样子。我试图优化以创建一个好看的纵横填字游戏，同时不会导致页面超时。</p><p>加快速度的一种方法是将我们的单词选择限制在有机会被放入网格中的单词。</p><p>起初，我完全是随机挑选每个单词，但这导致我试图将单词放在网格上，而这些单词没有可能的匹配方式。所以我浪费了大量的时间在网格中循环，我也浪费了在网格上匹配词语的尝试。</p><p>为了解决这个问题，我开始保存一个纵横字谜上存在哪些字母的列表。这样，我可以将我的单词选择限制为仅以这些字母中的一个开头的单词。我创建了下面的函数来帮助识别要尝试的好词。它不是完美的，但它防止了一些不必要的循环。</p><p>有时候你只需要知道什么时候该放弃。随着更多的单词被添加到纵横填字游戏中，成功放置另一个单词的可能性会降低。它没有那么大的空间，而且对放置的要求也变得更加严格。</p><p>最终，我们将开始在很长一段时间内无法将一个词放到网格上。我决定在这一点上结束这件事会更好。如果我们在将单词放到网格上有困难，那么无论如何它都可能是相当满的。</p><p>下面是发生这种情况的代码部分。470这个数字相当随意。似乎就在做了一些测试之后。</p><p>提高性能的最后一步是，一旦我创建了一个至少有4个单词交叉的纵横填字游戏，就停止生成纵横填字游戏。</p><p>一个有4个单词交叉点的纵横填字游戏通常看起来很不错，所以一旦其中一个减少了我们的平均生成时间，就停止游戏。</p><p>哇，那是一篇冗长而乏味的帖子。我真的希望真的有人能读到这一步。如果你有，请给我留言。编写所有这些😂会让我感觉更好</p><p>我希望您已经能够启动并运行您自己的纵横字谜生成器。这是一个有趣的项目，有很多细节需要考虑。如果您能够自己实现它，并且了解所有部分的工作原理，那么您肯定会成为一个更好的开发人员。</p><p>一如既往，感谢您的阅读。你可以订阅我的博客，如果你想要一些关于编写函数的技巧，并希望我的下一篇帖子通过电子邮件发送给你。</p></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://mitchum.blog/building-a-crossword-puzzle-generator-with-javascript/">https://mitchum.blog/building-a-crossword-puzzle-generator-with-javascript/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/java/">#java</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/构建/">#构建</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/crossword/">#crossword</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/单词/">#单词</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1000303.html"><img src="http://img.diglog.com/img/2020/5/thumb_10d0075f0a234a5f330d3c1e530921c2.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1000303.html">Java Feature Spotlight：文本块</a></div><span class="my_story_list_date">2020-5-2 18:5</span></div><div class="col-sm"><div><a target="_blank" href="/story/technology_developers_768883.html"><img src="http://img.diglog.com/img/2013/12/thumb_d0d7d124-a057-4e84-9d7a-4e2f54cfd4be.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/technology_developers_768883.html">IntelliJ IDEA 13 发布</a></div><span class="my_story_list_date">2013-12-5 9:11</span></div><div class="col-sm"><div><a target="_blank" href="/story/technology_developers_762079.html"><img src="http://img.diglog.com/img/2013/7/thumb_2c7d6e00-70a1-4275-b5b5-5ec1bd753a63.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/technology_developers_762079.html">最受欢迎的8位Java牛人</a></div><span class="my_story_list_date">2013-7-22 11:54</span></div><div class="col-sm"><div><a target="_blank" href="/story/technology_internet_388357.html"><img src="http://img.diglog.com/img/2011/3/thumb_c08b54dd06f74e80b6291f8d2c26c237.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/technology_internet_388357.html">浏览器速度大比拼：Firefox 4 VS Internet Explorer 9 VS Chrome VS Opera</a></div><span class="my_story_list_date">2011-3-24 16:34</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/病毒/">#病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/冠状病毒/">#冠状病毒</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/app/">#app</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>