[{"category": "", "categoryclass": "", "imagename": "21376bc9b9b767aec1127e3ab41d16f8.jpg", "infoid": 1002278, "ip": "", "isanchordig": 1, "ischecked": 1, "isdelete": 0, "isneo": 1, "mark": "", "name": "", "note": "\u9ebb\u7701\u7406\u5de5\u5b66\u9662\u5a92\u4f53\u5b9e\u9a8c\u5ba4(MIT\u2018s Media Lab)\u672c\u5468\u8bc1\u5b9e\uff0c\u7531\u4e8e\u88ab\u6307\u5411\u8d5e\u52a9\u5546\u548c\u516c\u4f17\u5938\u5927\u4e86\u8be5\u9879\u76ee\u7684\u7ed3\u679c\uff0c\u8be5\u9879\u76ee\u4e8e\u4e0a\u6708\u6084\u6084\u7ed3\u675f\u3002\u8be5\u9879\u76ee\u65e8\u5728\u63a8\u5e7f\u5728\u5bb6\u4e2d\u7684\u8ff7\u4f60\u6e29\u5ba4\u91cc\u79cd\u690d\u98df\u7269\u3002\n\u9ebb\u7701\u7406\u5de5\u5b66\u9662(Massachusetts Institute Of Technology)\u8fd8\u5ba3\u5e03\uff0c\u5c06\u5411\u56fd\u52a1\u9662\u73af\u5883\u4fdd\u62a4\u90e8\u652f\u4ed81.5\u4e07\u7f8e\u5143\u7684\u7f5a\u6b3e\uff0c\u56e0\u4e3a\u8be5\u9879\u76ee\u540d\u4e3a\u5f00\u653e\u519c\u4e1a\u5021\u8bae(Open Agriculture Initiative\uff0c\u7b80\u79f0OpenAg)\uff0c\u5c06\u5316\u5b66\u7269\u8d28\u4e0d\u5f53\u5904\u7f6e\u5230\u6ce2\u58eb\u987f\u90ca\u5916\u4e00\u4e2a\u7814\u7a76\u4e2d\u5fc3\u7684\u4e00\u53e3\u4e95\u91cc\uff0c\u8be5\u7814\u7a76\u6240\u5728\u90a3\u91cc\u8fdb\u884c\u4e86\u4e00\u4e9b\u5b9e\u9a8c\u3002\u9ebb\u7701\u7406\u5de5\u5b66\u9662\u627f\u8bfa\u5173\u95ed\u6cb9\u4e95\uff0c\u56e0\u4e3aOpenAg\u5c06\u4e0d\u518d\u5728\u90a3\u91cc\u8fdb\u884c\u7814\u7a76\u3002\n\u9ebb\u7701\u7406\u5de5\u5b66\u9662\u7684\u58f0\u660e\u5305\u542b\u5728\u4e00\u5c01\u7b80\u77ed\u7684\u7535\u5b50\u90ae\u4ef6\u4e2d\uff0c\u5176\u4f9d\u636e\u662fOpenAg\u7684\u9996\u5e2d\u7814\u7a76\u79d1\u5b66\u5bb6\u51ef\u52d2\u5e03\u00b7\u54c8\u73c0(Caleb Harper)\u5df2\u4e8e4\u670830\u65e5\u505c\u6b62\u5728\u8be5\u5927\u5b66\u7684\u5de5\u4f5c\u3002\n\u201c\u5f53\u4ed6\u5728\u9ebb\u7701\u7406\u5de5\u5b66\u9662\u5a92\u4f53\u5b9e\u9a8c\u5ba4\u9886\u5bfc\u5f00\u653e\u519c\u4e1a\u8ba1\u5212\u65f6\uff0c\u9ebb\u7701\u7406\u5de5\u5b66\u9662\u5df2\u7ecf\u5173\u95ed\u4e86\uff0c\u201d\u4e00\u4f4d\u5973\u53d1\u8a00\u4eba\u5728\u7535\u5b50\u90ae\u4ef6\u4e2d\u8bf4\u3002\u8be5\u5927\u5b66\u4ee5\u4fdd\u5bc6\u4e3a\u7531\uff0c\u4e0d\u613f\u8be6\u7ec6\u8bf4\u660e\u54c8\u73c0\u79bb\u5f00\u7684\u539f\u56e0\u3002\u54c8\u73c0\u6ca1\u6709\u56de\u590d\u624b\u673a\u4e0a\u7684\u7559\u8a00\u3002\nOpenAg\u9879\u76ee\u662f\u54c8\u73c0\u7684\u521b\u610f\uff0c\u4ed6\u63d0\u8bae\u8bbe\u8ba1\u548c\u90e8\u7f72\u5c0f\u578b\u9ad8\u79d1\u6280\u6e29\u5ba4\uff0c\u4ee5\u4e2a\u4eba\u98df\u54c1\u8ba1\u7b97\u673a\u7684\u5f62\u5f0f\u9500\u552e\uff0c\u65e8\u5728\u8ba9\u519c\u4f5c\u7269\u5728\u7a00\u8584\u7684\u7a7a\u6c14\u4e2d\u8301\u58ee\u6210\u957f\uff0c\u6ca1\u6709\u571f\u58e4\u6216\u9633\u5149\uff0c\u5e76\u5728\u7cbe\u786e\u63a7\u5236\u7684\u6761\u4ef6\u4e0b\u751f\u957f\u3002\u8be5\u9879\u76ee\u8fd8\u5305\u62ec\u5728\u9a6c\u8428\u8bf8\u585e\u5dde\u7c73\u5fb7\u5c14\u987f(Middleton)\u7684\u822a\u8fd0\u96c6\u88c5\u7bb1\u4e2d\u5b89\u7f6e\u66f4\u5927\u7684\u201c\u98df\u54c1\u670d\u52a1\u5668\u201d\uff0c\u90a3\u91cc\u53d1\u751f\u4e86\u4e0d\u5f53\u5904\u7f6e\u3002\n\u8fd9\u4e2a\u60f3\u6cd5\u662f\u516c\u4f17\u53ef\u4ee5\u4f7f\u7528\u6c14\u5019\u63a7\u5236\u8bbe\u5907\u6765\u53d1\u73b0\u548c\u8ddf\u8e2a\u5404\u79cd\u4f5c\u7269\u7684\u6700\u4f73\u6761\u4ef6\u3002\u54c8\u73c0\u5c06\u4ed6\u7684\u8ba1\u5212\u63cf\u8ff0\u4e3a\u62e5\u6709\u201c\u7b2c\u56db\u6b21\u519c\u4e1a\u9769\u547d\u201d\u7684\u6f5c\u529b\uff0cOpenAg\u4eceCBS\u65b0\u95fb\u8282\u76ee\u201c60\u5206\u949f\u201d\u3001\u201c\u534e\u5c14\u8857\u65e5\u62a5\u201d\u548c\u5176\u4ed6\u5a92\u4f53\u90a3\u91cc\u83b7\u5f97\u4e86\u79ef\u6781\u7684\u5a92\u4f53\u5173\u6ce8\u3002\n\u4f46\u5728\u8be5\u5b9e\u9a8c\u5ba4\u5de5\u4f5c\u7684\u79d1\u5b66\u5bb6\u8bf4\uff0c\u8fd9\u4e9b\u8bbe\u5907\u4ece\u6765\u6ca1\u6709\u50cf\u8bbe\u8ba1\u7684\u90a3\u6837\u5de5\u4f5c\uff0c\u54c8\u73c0\u6ca1\u6709\u5411\u8d5e\u52a9\u5546\u6216\u91c7\u8bbf\u627f\u8ba4\u8fd9\u4e00\u70b9\uff0c\u800c\u662f\u575a\u79f0\u4e00\u5207\u90fd\u5f88\u597d\u3002\u6709\u65f6\uff0c\u5b9e\u9a8c\u5ba4\u6210\u5458\u88ab\u544a\u77e5\u5728\u62cd\u7167\u4e4b\u524d\u5728\u5546\u5e97\u8d2d\u4e70\u690d\u7269\uff0c\u5237\u53bb\u7070\u5c18\uff0c\u7136\u540e\u628a\u5b83\u4eec\u653e\u8fdb\u98df\u7269\u7535\u8111\u91cc\u3002\n\u901a\u8fc7\u5173\u95edOpenAg\uff0c\u9ebb\u7701\u7406\u5de5\u5b66\u9662\u5e0c\u671b\u5728\u5a92\u4f53\u5b9e\u9a8c\u5ba4\u91cd\u6574\u65d7\u9f13\uff0c\u8be5\u5b9e\u9a8c\u5ba4\u81ea9\u6708\u4efd\u4ee5\u6765\u4e00\u76f4\u6ca1\u6709\u9886\u5bfc\u8005\u3002\u524d\u5bfc\u6f14\u4f0a\u85e4\u5fe0\u4e00(Joichi Ito)\u5728\u4e0e\u53bb\u5e74\u5728\u66fc\u54c8\u987f\u76d1\u72f1\u81ea\u6740\u7684\u6027\u72af\u7f6a\u8005\u6770\u5f17\u91cc\u00b7\u7231\u6cfc\u65af\u5766(Jeffrey Epstein)\u7684\u8d22\u52a1\u8054\u7cfb\u88ab\u66dd\u5149\u540e\uff0c\u8feb\u4e8e\u538b\u529b\u8f9e\u804c\u3002\u4eca\u5e741\u6708\uff0c\u8be5\u5927\u5b66\u53d1\u5e03\u4e86\u4e00\u4efd\u62a5\u544a\uff0c\u62ab\u9732\u4e86\u4f0a\u85e4\u548c\u7231\u6cfc\u65af\u5766\u4e4b\u95f4\u7684\u516b\u6b21\u5355\u72ec\u7684\u6821\u56ed\u4f1a\u9762\uff0c\u7231\u6cfc\u65af\u5766\u603b\u5171\u5411\u5a92\u4f53\u5b9e\u9a8c\u5ba4\u6350\u8d60\u4e8652.5\u4e07\u7f8e\u5143\u3002\n2017\u5e74\uff0c\u4f0a\u85e4\u548c\u7231\u6cfc\u65af\u5766\u7684\u4e00\u6b21\u4f1a\u9762\u5305\u62ec\u54c8\u73c0\u3002\u6839\u636e\u9ebb\u7701\u7406\u5de5\u5b66\u9662\u7684\u62a5\u544a\uff0c\u7b2c\u4e8c\u5e74\uff0c\u4f0a\u85e4\u52aa\u529b\u4ece\u7231\u6cfc\u65af\u5766\u90a3\u91cc\u83b7\u5f97\u4e86150\u4e07\u7f8e\u5143\u7684\u6350\u6b3e\uff0c\u4ee5\u652f\u6301OpenAg\u7684\u7814\u7a76\u3002\u8fd9\u7b14\u6350\u6b3e\u4ece\u672a\u5151\u73b0\u3002", "note_en": "A high-profile research project at  M.I.T.\u2019s Media Lab that promoted growing food at home in mini-greenhouses was quietly closed last month  amid allegations that its results were exaggerated to sponsors and the public, the university confirmed this week.\n The Massachusetts Institute of Technology also  announced that it would pay a $15,000 fine to the State Department of Environmental Protection because the project, the Open Agricultural Initiative, or OpenAg for short, improperly disposed chemicals into a well at a research center outside Boston where it conducted some experiments. M.I.T. promised to close the well since OpenAg would no longer be conducting research there.\n M.I.T.\u2019s announcement was contained in a brief email and hinged on the fact that the principal research scientist at OpenAg, Caleb Harper, had stopped working at the university as of April 30.\n  \u201cAs he led the Open Agriculture Initiative at the M.I.T. Media Lab, it is closed at M.I.T.,\u201d a spokeswoman said in the email. The university wouldn\u2019t elaborate on why Mr. Harper was leaving, citing confidentiality. Mr. Harper did not respond to a message left on his phone.\n The OpenAg project was the brainchild of Mr. Harper, who proposed designing and deploying small high-tech greenhouses, marketed as personal food computers, meant to allow crops to thrive in thin air, without soil or sunlight and under precisely controlled conditions. The project also included larger \u201cfood servers\u201d housed in shipping containers in Middleton, Mass., where the improper disposal occurred.\n The idea was that the public could use the climate-controlled devices to discover and track the optimal conditions for various crops. Mr. Harper described his plan as holding the potential for a \u201cfourth agricultural revolution,\u201d and OpenAg received positive media attention from the CBS News program \u201c60 Minutes,\u201d The Wall Street Journal and other outlets.\n But scientists who worked at the lab said that the devices never worked as designed and that, rather than admit this to sponsors or in interviews, Mr. Harper insisted all was well. At times, members of the lab were told to buy plants at a store, brush off the dirt and place them inside the food computers before a photo shoot.\n  By closing OpenAg, M.I.T. is hoping to right the ship at the Media Lab, which has been without a leader since September. The former director, Joichi Ito,  resigned under pressure after revelations of his financial connections to Jeffrey Epstein, the convicted sex offender who killed himself in a Manhattan jail last year. In January, the university issued  a report that disclosed eight separate on-campus meetings between Mr. Ito and Mr. Epstein, who donated a total of $525,000 to the Media Lab.\n One meeting in 2017 between Mr. Ito and Mr. Epstein included Mr. Harper. The next year, according to the M.I.T. report, Mr. Ito worked to obtain a $1.5 million donation from Mr. Epstein to support research at OpenAg. The donation never materialized.", "posttime": "2020-05-16 03:32:59", "source_domain": "news.ycombinator.com", "source_name": "Hacker News", "tags": "\u79d1\u5b66\u5bb6,closes,openag", "title": "\u9ebb\u7701\u7406\u5de5\u5b66\u9662\u5728\u79d1\u5b66\u5bb6\u63d0\u51fa\u8d28\u7591\u540e\u5173\u95ed\u201c\u98df\u54c1\u8ba1\u7b97\u673a\u201d\u9879\u76ee", "title_en": "MIT Closes \u2018Food Computer\u2019 Project After Scientists Raised Doubts", "transed": 1, "url": "https://www.nytimes.com/2020/05/13/business/media/mit-closes-food-computer-project.html", "via": "", "real_tags": ["\u79d1\u5b66\u5bb6", "closes", "openag"]}, {"category": "", "categoryclass": "", "imagename": "", "infoid": 1002276, "ip": "", "isanchordig": 1, "ischecked": 1, "isdelete": 0, "isneo": 1, "mark": "", "name": "", "note": "\u5728\u8fd9\u7bc7\u6587\u7ae0\u7684\u5927\u591a\u6570\u8bc4\u8bba\u4e2d\uff0c\u6709\u4eba\u95ee\u6211\u4e3a\u4ec0\u4e48\u9009\u62e9\u56fe\u5f62\u6570\u636e\u5e93\u800c\u4e0d\u662f\u5176\u4ed6\u4e1c\u897f\uff1f\u8fd9\u662f\u4e00\u4e2a\u5f88\u96be\u56de\u7b54\u7684\u95ee\u9898\uff0c\u56e0\u4e3a\u6211\u76ee\u524d\u7684\u7ecf\u9a8c\u4ec5\u9650\u4e8e\u56fe\u5f62\u6570\u636e\u5e93\u65b9\u9762\u3002\u6211\u731c\u4f60\u4e5f\u5728\u60f3\u540c\u6837\u7684\u4e8b\u60c5\uff0c\u6240\u4ee5\u8fd9\u662f\u6211\u8fc4\u4eca\u4e3a\u6b62\u6700\u597d\u7684\u56de\u7b54\u3002\u5728\u6211\u804c\u4e1a\u751f\u6daf\u7684\u8fd9\u4e2a\u9636\u6bb5\uff0c\u5982\u679c\u6211\u5728\u7f16\u5199\u91d1\u878d\u8f6f\u4ef6\uff0c\u6211\u53ea\u4f1a\u9009\u62e9\u5173\u7cfb\u578b\u6570\u636e\u5e93\u3002\u5173\u7cfb\u6570\u636e\u5e93\u662f\u975e\u5e38\u4e25\u683c\u7684\uff0c\u6240\u4ee5\u60a8\u9700\u8981\u771f\u6b63\u786e\u4fdd\u60a8\u4e8b\u5148\u4e86\u89e3\u60a8\u7684\u6570\u636e\u3002\u66f4\u6539\u6570\u636e\u5e93\u662f\u4e00\u9879\u5f88\u5927\u7684\u5de5\u4f5c\uff0c\u4f46\u5982\u679c\u8bbe\u8ba1\u6b63\u786e\uff0c\u6570\u636e\u5e93\u5c06\u4e3a\u60a8\u63d0\u4f9b\u975e\u5e38\u9ad8\u7ea7\u522b\u7684\u5b8c\u6574\u6027\uff0c\u5e76\u4e14\u60a8\u53ef\u4ee5\u83b7\u5f97\u826f\u597d\u7684\u6027\u80fd\u3002\u8fd9\u4e9b\u6570\u636e\u5e93\u5f88\u96be\u5206\u53d1\u548c\u6269\u5c55\uff0c\u56e0\u6b64\u6700\u7ec8\u5f80\u5f80\u4f1a\u51fa\u73b0\u5355\u4e2a\u5b9e\u4f8b\uff0c\u8fd9\u4e9b\u5b9e\u4f8b\u975e\u5e38\u5927\uff0c\u9700\u8981\u8fdb\u884c\u590d\u5236\u624d\u80fd\u8fdb\u884c\u5907\u4efd\u3002\u4e91\u63d0\u4f9b\u5546\u4eca\u5929\u62e5\u6709\u5e94\u8be5\u53ef\u4ee5\u6269\u5c55\u7684\u5173\u7cfb\u6570\u636e\u5e93\uff0c\u4f46\u6211\u6ca1\u6709\u4f7f\u7528\u5b83\u4eec\u7684\u7ecf\u9a8c\u3002\u6211\u82b1\u4e867\u5e74\u65f6\u95f4\u5728MongoDB(\u6587\u6863\u6570\u636e\u5e93)\u4e0a\u6784\u5efa\u4ea7\u54c1\u3002\u8fd9\u4e9b\u6570\u636e\u5e93\u5e26\u6765\u4e86\u5206\u5e03\u5f0f\u53ef\u4f38\u7f29\u6027\u548c\u5927\u91cf\u6570\u636e\u7075\u6d3b\u6027\u7684\u627f\u8bfa\u3002\u5206\u5e03\u5f0f\u53ef\u4f38\u7f29\u6027\u975e\u5e38\u590d\u6742(\u56e0\u4e3a\u5b83\u9700\u8981\u5206\u7247)\uff0c\u800c\u4e14\u5b83\u4eec\u4ece\u672a\u50cf\u5173\u7cfb\u6570\u636e\u5e93\u90a3\u6837\u53ef\u9760\u3002\u5982\u679c\u6570\u636e\u5b8c\u6574\u6027\u4e0d\u662f\u95ee\u9898\uff0c\u5e76\u4e14\u60a8\u7684\u6570\u636e\u4e0d\u65ad\u53d8\u5316\uff0c\u90a3\u4e48\u8fd9\u4e9b\u6570\u636e\u5e93\u975e\u5e38\u68d2\u3002\u6211\u73b0\u5728\u6b63\u5728\u5b66\u4e60Dgraph(\u56fe\u5f62\u6570\u636e\u5e93)\u548cGraphQL\u3002\u6211\u771f\u7684\u5f88\u559c\u6b22\u6211\u770b\u5230\u7684\u4e1c\u897f\u3002Dgraph\u662f\u4e00\u4e2a\u5206\u5e03\u5f0f\u7684\u3001\u53ef\u4f38\u7f29\u7684\u6570\u636e\u5e93\uff0c\u5b83\u5728\u4e91\u4e2d\u5de5\u4f5c\uff0c\u5e76\u4e3a\u8be5\u73af\u5883\u4ece\u5934\u6784\u5efa\u3002\u5b83\u786e\u5b9e\u9700\u8981\u4e00\u4e2a\u6a21\u5f0f\uff0c\u4ee5\u4fbf\u60a8\u53ef\u4ee5\u83b7\u5f97\u6570\u636e\u5b8c\u6574\u6027\uff0c\u4f46\u5b83\u4e0d\u90a3\u4e48\u4e25\u683c\uff0c\u56e0\u6b64\u60a8\u53ef\u4ee5\u66f4\u7075\u6d3b\u5730\u8fdb\u884c\u66f4\u6539\u3002Dgraph\u652f\u6301\u4e8b\u52a1\uff0c\u4f46\u6211\u8fd8\u6ca1\u6709\u5c1d\u8bd5\u8fc7\u8fd9\u4e00\u70b9\u3002\u672c\u6587\u65e8\u5728\u5e2e\u52a9\u60a8\u5feb\u901f\u638c\u63e1Dgraph\u548cGraphQL\u3002\u6211\u5e0c\u671b\u8fd9\u4e2a\u5e16\u5b50\u5728\u6211\u51e0\u4e2a\u6708\u524d\u5f00\u59cb\u5de5\u4f5c\u65f6\u5c31\u5b58\u5728\u4e86\u3002GraphQL\u6709\u5f88\u591a\u6587\u6863\uff0c\u4f46\u662f\u5728\u6211\u7406\u89e3\u6211\u5c06\u5728\u8fd9\u7bc7\u6587\u7ae0\u4e2d\u4ecb\u7ecd\u7684\u6750\u6599\u4e4b\u524d\uff0c\u8fd9\u4e9b\u6587\u6863\u5bf9\u6211\u6765\u8bf4\u90fd\u6ca1\u6709\u610f\u4e49\u3002\u5728\u8fd9\u7bc7\u6587\u7ae0\u4e2d\uff0c\u6211\u5c06\u6559\u60a8\u5b9a\u4e49GraphQL\u6a21\u5f0f\u7684\u57fa\u7840\u77e5\u8bc6\uff0c\u7136\u540e\u5411\u60a8\u5c55\u793aDgraph\u4ece\u8be5\u6a21\u5f0f\u751f\u6210\u7684GraphQL CRUD API\u3002\u4e4b\u540e\uff0c\u6211\u5c06\u5411\u60a8\u5c55\u793a\u5982\u4f55\u4f7f\u7528\u79f0\u4e3aGraphQL Playround\u7684\u6f02\u4eae\u7684\u56fe\u5f62\u3001\u4ea4\u4e92\u5f0f\u3001\u6d4f\u89c8\u5668\u5185GraphQL IDE\u6765\u8bbf\u95eeAPI\u3002\u5728\u8fd9\u7bc7\u6587\u7ae0\u7684\u6700\u540e\uff0c\u6211\u5217\u51fa\u4e86\u5ba1\u67e5\u8005\u7684\u95ee\u9898\u548cDgraph\u5de5\u7a0b\u56e2\u961f\u7684\u7b54\u6848\u3002\u8fd9\u7bc7\u6587\u7ae0\u7684\u7075\u611f\u6765\u81ea\u4e8e\u6211\u4e0eDgraph\u5408\u4f5c\u7684\u4e00\u4e2a\u540d\u4e3a\u201c\u65c5\u884c\u201d\u7684\u9879\u76ee\u3002Travel\u9879\u76ee\u662f\u4e00\u4e2a\u521d\u5b66\u8005\u5de5\u5177\u5305\uff0c\u7c7b\u4f3c\u4e8e\u6211\u7528\u6765\u6559\u6388\u56f4\u68cb\u5e94\u7528\u7a0b\u5e8f\u5f00\u53d1\u7684Service\u9879\u76ee\u3002Travel\u9879\u76ee\u4e13\u6ce8\u4e8e\u5b66\u4e60\u5982\u4f55\u4f7f\u7528Dgraph\u548cGraphQL\u5728\u56f4\u68cb\u4e2d\u7f16\u5199\u751f\u4ea7\u5e94\u7528\u7a0b\u5e8f\u3002\u65c5\u6e38\u9879\u76ee\u63d0\u4f9b\u4e86\u4e00\u4e2a\u57ce\u5e02\u7684\u4fe1\u606f\uff0c\u5728\u90a3\u91cc\u6536\u96c6\u4e86\u56db\u4e2a\u70b9\u7684\u6570\u636e\u5e76\u8fdb\u884c\u4e86\u76f8\u5173\u3002\u6e05\u53551 TYPE City{id\uff1aid\uff01#MANDIRED\uff0c\u6807\u91cfTYPE\uff0cLookup Lat\uff1aFloat\uff01#MANDIRED\uff0c\u6807\u91cf\u7c7b\u578bLNG\uff1aFLOAT\uff01#MANDIRED\uff0c\u6807\u91cf\u7c7b\u578b\u540d\u79f0\uff1aString\uff01@Search(by\uff1a[Exact])#MANDIRED\uff0c\u6807\u91cf\u7c7b\u578b\uff0c\u53ef\u641c\u7d22\u54a8\u8be2\uff1a\u54a8\u8be2#\u975e\u5f3a\u5236\uff0c\u81ea\u5b9a\u4e49\u7c7b\u578b\u5929\u6c14\uff1a\u5929\u6c14#\u975e\u5f3a\u5236\uff0c\u81ea\u5b9a\u4e49\u7c7b\u578b\u5730\u70b9\uff1a[Place]#\u975e\u5f3a\u5236\uff0c\u81ea\u5b9a\u4e49\u7c7b\u578b\uff0c\u5217\u8868}\u7c7b\u578b\u54a8\u8be2{id\uff1aid\uff01#MANDIRED\uff0c\u6807\u91cf\u7c7b\u578b\uff0c\u67e5\u627e\u5927\u9646\uff1aString\uff01#MANDIRED\u3002\u6807\u91cf\u7c7b\u578bCOUNTRY_CODE\uff1aSTRING\uff01#MANDIRED\uff0c\u6807\u91cf\u7c7b\u578bLAST_UPDATED\uff1aSTRING#NOT-MANDIRED\uff0c\u6807\u91cf\u7c7b\u578b\u6d88\u606f\uff1aSTRING#NOT-MANDIRED\uff0c\u6807\u91cf\u7c7b\u578bSCORE\uff1aFLOAT\uff01#MANDIRED\uff0c\u6807\u91cf\u7c7b\u578b\u6765\u6e90\uff1aString#NOT-MANDITY\uff0c\u6807\u91cf\u7c7b\u578b}\u7c7b\u578b\u4f4d\u7f6e{id\uff1aid\uff01#MANDRED\uff0c\u6807\u91cf\u7c7b\u578b\u67e5\u627e\u5730\u5740\uff1aString#NOT-MANDIRED\uff0c\u6807\u91cf\u7c7b\u578bAVG_USER_RATING\uff1aFLOAT#NOT-MANDITY\uff0c\u6807\u91cf\u7c7b\u578bCITY_NAME\uff1aSTRING\uff01#\u3002\u6807\u91cf\u7c7b\u578bLNG\uff1aFLOAT\uff01#MANDIRED\uff0c\u6807\u91cf\u7c7b\u578bLOCATION_TYPE\uff1a[string]#NOT-MANDIRED\uff0c\u6807\u91cf\u7c7b\u578b\uff0c\u5217\u8868\u540d\u79f0\uff1aSTRING\uff01@search(by\uff1a[Exact])#MANDIRED\uff0c\u53ef\u641c\u7d22NO_USER_RATING\uff1aINT#NOT-MANDIRED\uff0c\u6807\u91cf\u7c7b\u578bPLACE_ID\uff1aSTRING\uff01#MANDIRED\uff0c\u6807\u91cf\u7c7b\u578bPHOTO_ID\uff1aString#NOT-MANDIRED\uff0c\u6807\u91cf\u7c7b\u578b}\u7c7b\u578b\u5929\u6c14{id\uff1aid\uff01#MANDIRED\uff0c\u6807\u91cf\u7c7b\u578b\uff0cLOOKUP CITY_NAME\uff1aSTRING\uff01\u6807\u91cf\u7c7b\u578bFeel_Like\uff1aFLOAT#\u975e\u5f3a\u5236\uff0c\u6807\u91cf\u7c7b\u578b\u6e7f\u5ea6\uff1aINT#\u975e\u5f3a\u5236\uff0c\u6807\u91cf\u7c7b\u578b\u538b\u529b\uff1aINT#\u975e\u5f3a\u5236\uff0c\u6807\u91cf\u7c7b\u578b\u65e5\u51fa\uff1aINT#\u975e\u5f3a\u5236\uff0c\u6807\u91cf\u7c7b\u578b\u65e5\u843d\uff1aINT#\u975e\u5f3a\u5236\uff0c\u6807\u91cf\u7c7b\u578bTEMP\uff1aFLOAT#\u975e\u5f3a\u5236\uff0c\u6807\u91cf\u7c7b\u578bTEMP_MIN\uff1aFLOAT#\u975e\u5f3a\u5236\uff0c\u6807\u91cf\u7c7b\u578bTEMP_MAX\uff1aFLOAT#\u975e\u5f3a\u5236\uff0c\u6807\u91cf\u7c7b\u578b\u53ef\u89c1\u6027\uff1aString#NOT-MAND\uff0c\u6807\u91cf\u7c7b\u578bWIND_DIRECTION\uff1aINT#NOT\u3002\n\u6e05\u53551\u663e\u793a\u4e86\u5e94\u7528\u7a0b\u5e8f\u7684\u5b8c\u6574GraphQL\u6a21\u5f0f\u3002\u6211\u5df2\u7ecf\u6dfb\u52a0\u4e86\u6ce8\u91ca\uff0c\u8fd9\u4e9b\u6ce8\u91ca\u5206\u89e3\u4e86\u6a21\u5f0f\u5b9a\u4e49\u4e2d\u7684\u6bcf\u4e2a\u5b57\u6bb5(\u8c13\u8bcd)\u3002\u8fd9\u5e94\u8be5\u4e3a\u60a8\u7406\u89e3SYNT\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5f88\u597d\u7684\u8d77\u70b9\n\u6e05\u535512\u663e\u793a\u4e86\u7528\u4e8e\u542f\u52a8\u548c\u8fd0\u884cDgraph\u7684docker run\u547d\u4ee4\u3002\u8bf7\u6ce8\u610f\uff0c\u6b64\u7248\u672c\u7684Dgraph\u4e0d\u662f\u7528\u4e8e\u751f\u4ea7\u7684\u6d88\u606f\u3002\u4f7f\u7528\u6b64\u7248\u672c\u8fdb\u884c\u672c\u5730\u5f00\u53d1\u548c\u6d4b\u8bd5\u3002\u7aef\u53e38080\u662f\u4e3aGraphQL\u516c\u5f00\u7684\u7aef\u53e3\u3002Dgraph\u542f\u52a8\u5e76\u8fd0\u884c\u540e\uff0c\u4e0b\u4e00\u6b65\u662f\u521b\u5efa\u6a21\u5f0f\u3002\u521b\u5efa\u6a21\u5f0f\u7684\u6700\u5feb\u65b9\u6cd5\u662f\u8fd0\u884ccurl\u547d\u4ee4\u3002\u6e05\u535513curl-H&#34\uff1bContent-Type\uff1aApplication/json&#34\uff1bhttp://localhost:8080/admin/schema-XPOST-d$&#39\uff1btype City{id\uff1aid\uff01\u54a8\u8be2\uff1a\u54a8\u8be2LAT\uff1a\u5f69\u8f66\uff01\u6db2\u5316\u5929\u7136\u6c14\uff1a\u6f02\u6d6e\uff01\u540d\u79f0\uff1astring\uff01@search(by\uff1a[Exact])\u5730\u70b9\uff1a[place]weet\uff1aweet}\u7c7b\u578b\u54a8\u8be2{id\uff1aid\uff01\u5927\u9646\uff1a\u5f26\uff01\u56fd\u5bb6\uff1a\u5b57\u7b26\u4e32\uff01COUNTRY_CODE\uff1a\u5b57\u7b26\u4e32\uff01LAST_UPDATED\uff1aString\u6d88\u606f\uff1aString\u5206\u6570\uff1aFloat\uff01\u6765\u6e90\uff1astring}\u7c7b\u578bPlace{id\uff1aid\uff01\u5730\u5740\uff1astring AVG_USER_RATING\uff1aFLOAT CITY_NAME\uff1aSTRING\uff01gaps_url\uff1astring lat\uff1aFloat\uff01\u6db2\u5316\u5929\u7136\u6c14\uff1a\u6f02\u6d6e\uff01location_type\uff1a[string]name\uff1astring\uff01@search(by\uff1a[Exact])no_user_Rating\uff1aint place_id\uff1astring\uff01Photo_id\uff1aString}\u7c7b\u578b\u5929\u6c14{id\uff1aid\uff01CITY_NAME\uff1a\u5b57\u7b26\u4e32\uff01\u63cf\u8ff0\uff1astring Feel_Like\uff1a\u6d6e\u52a8\u6e7f\u5ea6\uff1aINT\u538b\u529b\uff1aINT\u65e5\u51fa\uff1aINT\u65e5\u843d\uff1aINT TEMP\uff1aFLOAT TEMP_MIN\uff1aFLOAT TEMP_MAX\uff1aFLOAT\u53ef\u89c1\u6027\uff1aSTRING WIND_DIRECTION\uff1aINT WIND_SPEED\uff1aFloat}&#39\uff1bOUTPUT{&#34\uff1bdata&#34\uff1b\uff1a{&#34\uff1bcode&#34\uff1b\uff1a&#34\uff1bSuccess&#34\uff1b\uff0c&#34\uff1bMessage&#34\uff1b\uff1a&#34\uff1bDone&#34\uff1b}}\u3002\n\u6e05\u535513\u663e\u793a\u4e86\u521b\u5efa\u6a21\u5f0f\u7684curl\u547d\u4ee4\u3002\u590d\u5236\u3001\u7c98\u8d34\u5e76\u5728\u7ec8\u7aef\u4e2d\u8fd0\u884ccurl\u547d\u4ee4\u3002\u5b8c\u6210\u540e\uff0c\u60a8\u5e94\u8be5\u4f1a\u770b\u5230\u663e\u793a\u7684\u8f93\u51fa\u3002GraphQL\u6e38\u4e50\u573a\u662f\u4e00\u4e2a\u56fe\u5f62\u5316\u3001\u4ea4\u4e92\u5f0f\u3001\u6d4f\u89c8\u5668\u5185\u7684GraphQL IDE\uff0c\u7531Prisma\u521b\u5efa\uff0c\u57fa\u4e8eGraphiQL\u3002\u8fd9\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u5de5\u5177\uff0c\u7528\u4e8e\u9a8c\u8bc1\u6a21\u5f0f\u548c\u6570\u636e\u5728\u6570\u636e\u5e93\u4e2d\u662f\u5426\u5f97\u5230\u6b63\u786e\u7ba1\u7406\u3002\u8be5\u94fe\u63a5\u63d0\u4f9b\u5bf9\u4e09\u5927\u64cd\u4f5c\u7cfb\u7edf\u7684\u684c\u9762\u5e94\u7528\u7a0b\u5e8f\u7684\u8bbf\u95ee\u3002\u4e0b\u8f7d\u5e94\u7528\u7a0b\u5e8f\u5e76\u4f7f\u5176\u8fd0\u884c\u540e\uff0c\u60a8\u5e94\u8be5\u4f1a\u770b\u5230\u4ee5\u4e0b\u5185\u5bb9\u3002\u56fe1\u9009\u62e9URL\u7aef\u70b9\u9009\u9879\u5e76\u5728\u6587\u672c\u6846\u4e2d\u952e\u5165http://localhost:8080\uff0c\u5982\u56fe1\u6240\u793a\uff0c\u7136\u540e\u70b9\u51fbOpen\u6309\u94ae\u3002\u56fe2\u5047\u8bbe\u60a8\u8ba9Dgraph\u5728\u6e05\u535512\u4e2d\u8fd0\u884c\uff0c\u60a8\u5e94\u8be5\u770b\u5230\u6ca1\u6709\u8fde\u63a5\u9519\u8bef\u3001\u4e00\u4e2a\u7a7a\u7684\u5de5\u4f5c\u533a\u548c\u53f3\u4fa7\u7684\u4e24\u4e2a\u9009\u9879\u5361\uff0c\u5982\u56fe2\u6240\u793a\u3002\u7531\u4e8e\u201c\u6697\u201d\u4e3b\u9898\u975e\u5e38\u6697\uff0c\u6211\u5c06\u628a\u4e3b\u9898\u66f4\u6539\u4e3a\u201c\u4eae\u201d\u3002\u4e3a\u6b64\uff0c\u8bf7\u9009\u62e9\u5e94\u7528\u7a0b\u5e8f\u53f3\u4e0a\u89d2\u7684\u9f7f\u8f6e\u56fe\u6807\uff0c\u5e76\u5c06\u7f16\u8f91\u5668\u7684\u4e3b\u9898\u8bbe\u7f6e\u4ece&#34\uff1b\u6697&#34\uff1b\u66f4\u6539\u4e3a&#34\uff1b\u4eae&#34\uff1b\uff0c\u7136\u540e\u5355\u51fb\u4fdd\u5b58\u3002\u6e05\u535514\u66f4\u6539\u4e3b\u9898\u540e\uff0cGraphQL\u6e38\u4e50\u573a\u5e94\u8be5\u5982\u4e0b\u6240\u793a\u3002\u56fe3\u56fe3\u663e\u793a\u4e86\u5c06\u4e3b\u9898\u66f4\u6539\u4e3a\u706f\u5149\u540eGraphQL\u6e38\u4e50\u573a\u5e94\u8be5\u662f\u4ec0\u4e48\u6837\u5b50\u3002\u53f3\u4fa7\u7684\u4e24\u4e2a\u9009\u9879\u5361DOCS\u548cSCHEMA\u63d0\u4f9b\u6a21\u5f0f\u4fe1\u606f\u3002DOCS\u9009\u9879\u5361\u662fCRUD API\u7684\u4ea4\u4e92\u5f0f\u8d85\u94fe\u63a5\u89c6\u56fe\u3002\u6a21\u5f0f\u9009\u9879\u5361\u63d0\u4f9b\u6574\u4e2a\u6a21\u5f0f\u7684\u5e73\u9762\u89c6\u56fe\u3002\u56fe4\u56fe4\u663e\u793a\u4e86Schema\u9009\u9879\u5361\u4e2d\u5e73\u9762\u6a21\u5f0f\u7684\u90e8\u5206\u89c6\u56fe\u3002\u8be5\u6a21\u5f0f\u4e0d\u4ec5\u663e\u793a\u60a8\u63d0\u4f9b\u7684\u6570\u636e\u5b9a\u4e49\uff0c\u8fd8\u663e\u793a\u7531Drgaph\u751f\u6210\u7684\u6240\u6709\u7c7b\u578b\u548cCRUD API\u3002\u6709\u4e24\u79cd\u7c7b\u578b\u5f88\u91cd\u8981\uff0c\u56e0\u4e3a\u5b83\u4eec\u8868\u793aCRUD API\u3002\u6e05\u535515\u7c7b\u578b\u7a81\u53d8{addCity(input\uff1a[AddCityInput\uff01]\uff01)\uff1aAddCityPayload updateCity(input\uff1aUpdateCityInput\uff01)\uff1aUpdateCityPayload delete City(filter\uff1aCityFilter\uff01)\uff1aDeleteCityPayload addConsulting(input\uff1a[AddAdvisoryInput\uff01]\uff01)\uff1aAddAdvisoryPayload updateConsulting(input\uff1aUpdateAdvisoryInput\uff01)\uff1aUpdateAdvisoryPput\uff01\n\u6e05\u535515\u663e\u793a\u4e86\u5305\u542b\u57fa\u4e8e\u6a21\u5f0f\u751f\u6210\u7684\u7a81\u53d8API\u7684\u7a81\u53d8\u7c7b\u578b\u3002\u60a8\u4f1a\u6ce8\u610f\u5230\uff0c\u6bcf\u79cd\u7c7b\u578b\u90fd\u6709\u4e00\u4e2a\u6dfb\u52a0\u3001\u66f4\u65b0\u548c\u5220\u9664\u529f\u80fd\u3002\u8fd9\u662f\u56e0\u4e3aID\u8c13\u8bcd\u5df2\u6dfb\u52a0\u5230\u67b6\u6784\u4e2d\u7684\u6bcf\u79cd\u7c7b\u578b\u3002\u6e05\u535516type query{getCity(id\uff1aid\uff01)\uff1aCity queryCity(filter\uff1aCityFilter Order\uff1aCityOrder First\uff1aInt Offset\uff1aInt)\uff1a[City]getConsulting(id\uff1aid\uff01)\uff1aAdvisoryFilter Order\uff1aAdvisoryOrder First\uff1aInt Offset\uff1a\uff1a[AdvisoryOrder First\uff1aInt Offset\uff1aInt)\uff1a[AdvisorygetPlace(id\uff1aid\uff01)\uff1aPlace queryPlace(Filter\uff1aPlaceFilter Order\uff1aPlaceOrder First\uff1aInt Offset\uff1aInt)\uff1a[\u3002\n\u6e05\u535516\u663e\u793a\u4e86\u5305\u542b\u57fa\u4e8e\u6a21\u5f0f\u751f\u6210\u7684\u67e5\u8be2API\u7684\u67e5\u8be2\u7c7b\u578b\u3002\u60a8\u53ef\u4ee5\u770b\u5230\uff0c\u6bcf\u79cd\u7c7b\u578b\u90fd\u6709\u4e00\u4e2a\u83b7\u53d6\u548c\u67e5\u8be2\u51fd\u6570\u3002GET\u51fd\u6570\u4e4b\u6240\u4ee5\u5b58\u5728\uff0c\u662f\u56e0\u4e3a\u5411\u67b6\u6784\u4e2d\u7684\u6bcf\u4e2a\u7c7b\u578b\u6dfb\u52a0\u4e86ID\u8c13\u8bcd\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6bcf\u79cd\u7c7b\u578b\u90fd\u6709\u4e00\u4e2a\u67e5\u8be2\u529f\u80fd\u3002\u4e0d\u7528\u62c5\u5fc3\u7d22\u5f15\uff0c\u5f53\u67e5\u8be2\u51fd\u6570\u7b2c\u4e00\u6b21\u5728\u7279\u5b9a\u8c13\u8bcd\u4e0a\u8fd0\u884c\u65f6\uff0c\u4f1a\u521b\u5efa\u7d22\u5f15\u3002", "note_en": "In most of the reviews for this post, I was asked why choose a  graph database over something else? This is a hard question to answer since my experience right now is limited on the graph database side. My guess is you\u2019re wondering the same thing, so this is my best answer to date. At this point in my career, I would only choose a  relational database if I was writing financial software. Relational databases are very rigid so you need to really make sure you understand your data upfront. Changing the database is a big effort, but the database when designed correctly will give you very high levels of integrity and you can get good performance. These databases are hard to distribute and scale so you tend to end up with single instances that are very large and require replication for backup. The cloud providers have relational databases today that are supposed to scale, but I have no experience with them. I spent 7 years building products on MongoDB ( document database). These databases come with the promise of distributed scalability and lots of data flexibility. The distributed scalability is very complicated (since it requires sharding) and they have never been as reliable as the relational databases. If data integrity is not an issue and your data is constantly changing, these databases are great. I am now learning Dgraph (graph database) and GraphQL. I am really liking what I see. Dgraph is a distributed scalable database that works in the cloud and built from the ground up for that environment. It does require a schema so you can get the data integrity, but it\u2019s not as rigid so you have more flexibility to make changes. Dgraph supports transactions, but I have not played with that yet.  This post is intended to help you get up and running quickly with Dgraph and GraphQL. I wish this post existed when I started several months ago. There is a world of documentation out there for GraphQL, but none of it made sense to me until I understood the material I will present in this post. In this post, I will teach you the basics of defining a GraphQL schema, and then show you the GraphQL CRUD API that Dgraph generates from that schema. After that, I will show you how to access the API using a nice graphical, interactive, in-browser GraphQL IDE called  GraphQL Playground. At the end of this post, I listed questions reviewers had and answers from the Dgraph engineering team.  The inspiration for this post is a project I\u2019ve been working on with Dgraph called  Travel. The Travel project is a starter kit similar to the  Service project I use to teach application development in  Go. The Travel project is focused on learning how to write production applications in Go using Dgraph and GraphQL. The Travel project provides information for a city where four points of data are gathered and related. Listing 1 type City { id: ID! # mandatory, scalar type, lookup lat: Float! # mandatory, scalar type lng: Float! # mandatory, scalar type name: String! @search(by: [exact]) # mandatory, scalar type, searchable advisory: Advisory # not-mandatory, custom type weather: Weather # not-mandatory, custom type places: [Place] # not-mandatory, custom type, list}type Advisory { id: ID! # mandatory, scalar type, lookup continent: String! # mandatory, scalar type country: String! # mandatory, scalar type country_code: String! # mandatory, scalar type last_updated: String # not-mandatory, scalar type message: String # not-mandatory, scalar type score: Float! # mandatory, scalar type source: String # not-mandatory, scalar type}type Place { id: ID! # mandatory, scalar type, lookup address: String # not-mandatory, scalar type avg_user_rating: Float # not-mandatory, scalar type city_name: String! # mandatory, scalar type gmaps_url: String # not-mandatory, scalar type lat: Float! # mandatory, scalar type lng: Float! # mandatory, scalar type location_type: [String] # not-mandatory, scalar type, list name: String! @search(by: [exact]) # mandatory, scalar type, searchable no_user_rating: Int # not-mandatory, scalar type place_id: String! # mandatory, scalar type photo_id: String # not-mandatory, scalar type}type Weather { id: ID! # mandatory, scalar type, lookup city_name: String! # mandatory, scalar type description: String # not-mandatory, scalar type feels_like: Float # not-mandatory, scalar type humidity: Int # not-mandatory, scalar type pressure: Int # not-mandatory, scalar type sunrise: Int # not-mandatory, scalar type sunset: Int # not-mandatory, scalar type temp: Float # not-mandatory, scalar type temp_min: Float # not-mandatory, scalar type temp_max: Float # not-mandatory, scalar type visibility: String # not-mandatory, scalar type wind_direction: Int # not-mandatory, scalar type wind_speed: Float # not-mandatory, scalar type}\n Listing 1 shows the complete GraphQL schema for the application. I have added comments that break down each field (predicate) in the schema definition. That should give you a good starting point for understanding the syntax you see. I will break down each of the unique aspects of the syntax a bit more. GraphQL has a set of default  scalar types. Listing 2 Int: Signed 32\u2010bit integer.Float: Signed double-precision floating-point value.String: UTF\u20108 character sequence.DateTime: string in RFC3339 formatBoolean: true or false.ID: Auto-generated unique id.\n Listing 2 shows the set of default scalar types provided by GraphQL. These are the basic types provided by any database or programming language. Listing 3  Listing 3 shows the declaration of the  id predicate using the scalar type  ID. This scalar type auto-generates a unique ID for any node of data that is added to the database. Dgraph physically organizes the data based on this ID so a lookup can be performed quickly. This type is also a marker that Dgraph uses to build a full GraphQL CRUD API for the type. Listing 4 type City { id: ID! # mandatory, scalar type, lookup lat: Float! # mandatory, scalar type}type Advisory { continent: String! # mandatory, scalar type}\n Listing 4 shows three predicates in the schema using the exclamation point ( !). This indicates to the database that data for these predicates is required for any add or update operation. When the exclamation point is missing, the predicate is allowed to be null. Listing 5 type City { places: [Place] # not-mandatory, custom type, list}type Place { location_type: [String] # not-mandatory, scalar type, list}\n Listing 5 shows two predicates declared as a list by using square brackets around the type declaration. Listing 6  Listing 6 shows a field declared as searchable by an exact string  search. There are other options to choose from. Listing 7 input StringExactFilter { eq: String # Equal to le: String # Less than or equal lt: String # Less than ge: String # Greater than or equal gt: String # Greater than}input StringTermFilter { allofterms: String # Match all words provided: &#34;sydney melbourne&#34; anyofterms: String # Match any words provided: &#34;sydney melbourne&#34;}input StringFullTextFilter { alloftext: String # Match all words provided: &#34;sydney melbourne&#34; anyoftext: String # Match any words provided: &#34;sydney melbourne&#34;}input StringRegExpFilter { regexp: String # Match any city with ney: &#34;/.*ney.*/&#34;}\n Listing 7 shows the different string-type searches you can choose from based on  input types defined by Dgraph. When a field is searchable, Dgraph builds GraphQL query API\u2019s for the type based on the search filter selected. Listing 8  Listing 8 shows you how to define searchable predicates for some of the other scalar types. Listing 9 input FloatFilter { eq: Float le: Float lt: Float ge: Float gt: Float}input IntFilter { eq: Int le: Int lt: Int ge: Int gt: Int}Boolean doesn\u2019t have a special input filter type.\n Listing 9 shows the other scalar type searches you can choose from based on  input types that are defined by Dgraph. The  Boolean type does not have a special  input type defined.  The best way to run Dgraph on your local machine is to use Docker. If you don\u2019t have Docker installed yet, then please follow this  guide from Docker. As of the writing of this post, version 20.03.1 is the latest release of Dgraph. To download this version of Dgraph, just use the  docker pull command. Listing 10 $ docker pull dgraph/standalone:v20.03.1OUTPUTv20.03.1: Pulling from dgraph/standalone5bed26d33875: Pull completef11b29a9c730: Pull complete930bda195c84: Pull complete78bf9a5ad49e: Pull complete56d14a4dc4d7: Pull completeb2e6192c62a3: Pull complete02dca55cd04c: Pull completeca9eba547da7: Pull completee4c262d6c0b0: Pull completeDigest: sha256:22d2b55b3cb4d23032de2aa8b484ca83bebcfbba102010c259b332a239b676a6Status: Downloaded newer image for dgraph/standalone:v20.03.1docker.io/dgraph/standalone:v20.03.1\n Listing 10 shows the  docker pull command that downloads a standalone version of Dgraph and prepares Dgraph to run inside a container. Once all the different file layers are downloaded, run the  docker images command to validate the pull. Listing 11  Listing 11 shows the call to  docker images and the expected output for the Dgraph image. To validate this image works, spin up a container. Listing 12 $ docker run -it -p 8080:8080 dgraph/standalone:v20.03.1OUTPUTWarning: This standalone version is meant for quickstart purposes only. It is NOT RECOMMENDED for production environments.2020/04/10 14:07:40 Listening on :8000...[Decoder]: Using assembly version of decoder\n Listing 12 shows the  docker run command to use to get Dgraph up and running. Notice the message saying this version of Dgraph is not meant for production use. Use this version for local development and testing. Port  8080 is the port exposed for GraphQL.  With Dgraph up and running, the next step is to create a schema. The quickest way to create the schema is to run a  curl command. Listing 13 curl -H &#34;Content-Type: application/json&#34; http://localhost:8080/admin/schema -XPOST -d $&#39;type City { id: ID! advisory: Advisory lat: Float! lng: Float! name: String! @search(by: [exact]) places: [Place] weather: Weather}type Advisory { id: ID! continent: String! country: String! country_code: String! last_updated: String message: String score: Float! source: String}type Place { id: ID! address: String avg_user_rating: Float city_name: String! gmaps_url: String lat: Float! lng: Float! location_type: [String] name: String! @search(by: [exact]) no_user_rating: Int place_id: String! photo_id: String}type Weather { id: ID! city_name: String! description: String feels_like: Float humidity: Int pressure: Int sunrise: Int sunset: Int temp: Float temp_min: Float temp_max: Float visibility: String wind_direction: Int wind_speed: Float}&#39;OUTPUT{&#34;data&#34;:{&#34;code&#34;:&#34;Success&#34;,&#34;message&#34;:&#34;Done&#34;}}\n Listing 13 shows the  curl command that creates the schema. Copy, paste, and run that  curl command in your terminal. After it completes, you should see the output as presented.  The  GraphQL Playground is a graphical, interactive, in-browser GraphQL IDE, created by  Prisma and based on  GraphiQL. This is a nice tool for verifying that the schema and data are properly managed in the database. The link provides access to desktop apps for the three major operating systems. Once you download the application and get it running, you should see this. Figure 1  Select the  URL ENDPOINT option and type  http://localhost:8080 in the text box as seen in figure 1. Then hit the  OPEN button. Figure 2   Assuming you left Dgraph running at listing 12, you should see no connection errors, an empty workspace, and two tabs on the right as shown in figure 2. Since the \u201cdark\u201d theme is very dark, I am going to change the theme to \u201clight\u201d. To do that, select the gear icon in the top right corner of the application and change the  editor.theme setting from  &#34;dark&#34; to  &#34;light&#34; and hit save. Listing 14  After changing the theme, the GraphQL Playground should look like this. Figure 3   Figure 3 shows how GraphQL Playground should look after changing the theme to  &#34;light&#34;. The two tabs on the right,  DOCS and  SCHEMA provide schema information. The  DOCS tab is an interactive, hyper-linked view of the CRUD API. The  SCHEMA tab provides a flat view of the entire schema. Figure 4   Figure 4 shows you a partial view of the flat schema from the  SCHEMA tab. This schema not only shows the data definitions you provided, but all the types and the CRUD API generated by Drgaph.  There are two types that are important since they represent the CRUD API. Listing 15 type Mutation { addCity(input: [AddCityInput!]!): AddCityPayload updateCity(input: UpdateCityInput!): UpdateCityPayload deleteCity(filter: CityFilter!): DeleteCityPayload addAdvisory(input: [AddAdvisoryInput!]!): AddAdvisoryPayload updateAdvisory(input: UpdateAdvisoryInput!): UpdateAdvisoryPayload deleteAdvisory(filter: AdvisoryFilter!): DeleteAdvisoryPayload addPlace(input: [AddPlaceInput!]!): AddPlacePayload updatePlace(input: UpdatePlaceInput!): UpdatePlacePayload deletePlace(filter: PlaceFilter!): DeletePlacePayload addWeather(input: [AddWeatherInput!]!): AddWeatherPayload updateWeather(input: UpdateWeatherInput!): UpdateWeatherPayload deleteWeather(filter: WeatherFilter!): DeleteWeatherPayload}\n Listing 15 shows the  Mutation type that contains the mutation API that was generated based on the schema. You\u2019ll notice there is an  add,  update, and  delete function for each type. This is because the  ID predicate was added to each type in the schema. Listing 16 type Query { getCity(id: ID!): City queryCity(filter: CityFilter order: CityOrder first: Int offset: Int): [City] getAdvisory(id: ID!): Advisory queryAdvisory(filter: AdvisoryFilter order: AdvisoryOrder first: Int offset: Int): [Advisory] getPlace(id: ID!): Place queryPlace(filter: PlaceFilter order: PlaceOrder first: Int offset: Int): [Place] getWeather(id: ID!): Weather queryWeather(filter: WeatherFilter order: WeatherOrder first: Int offset: Int): [Weather]}\n Listing 16 shows the  Query type that contains the query API that was generated based on the schema. You can see there is a  get and  query function for each type. The  get function exists because the  ID predicate was added to each type in the schema. Each type will get a  query function by default. Don\u2019t worry about indexes, the first time a  query function runs on a specific predicate, an index is created.It\u2019s important to note that all interaction with the database will be through the GraphQL CRUD API. If you don\u2019t have a function that you need, you will need to change the schema to have Dgraph generate it for you or you will need to add a custom function yourself.  Now I will execute the  addCity,  getCity and  queryCity functions from inside the GraphQL Playground to show you how to access this API in a GraphQL format. Listing 17 mutation { addCity(input: [{ name: &#34;sydney&#34; lat: -33.865143 lng: 151.209900 }]) { city { id name lat lng } }}\n Listing 17 shows how to call the  addCity function to add a city to the database. Notice how the API is structured around the type system defined by Dgraph in the schema. Listing 18 type Mutation { addCity(input: [AddCityInput!]!): AddCityPayload}input AddCityInput { advisory: AdvisoryRef lat: Float! lng: Float! name: String! places: [PlaceRef] weather: WeatherRef}type AddCityPayload { city(filter: CityFilter, order: CityOrder, first: Int, offset: Int): [City] numUids: Int}input CityFilter { id: [ID!] name: StringExactFilter and: CityFilter or: CityFilter not: CityFilter}\n Listing 18 shows all the supporting types used to define the  addCity function. Having access to the schema and knowing how the APIs are structured will help you understand how to use the full API generated by Dgraph. Copy and paste the code in listing 17 into GraphQL Playground and click the play button. Figure 5   Figure 5 shows the  addCity function call and the result in the GraphQL Playground. To retrieve the city from the database, there is a lookup function named  getCity, and a query function named  queryCity. Listing 19  Listing 19 shows the  getCity function call. Copy and paste this call into the GraphQL Playground and click the play button. Figure 6   Figure 6 shows the  getCity function call and the result in the GraphQL Playground. Listing 20 query { queryCity(filter: { name: { eq: &#34;sydney&#34; } }) { id name lat lng }}\n Listing 20 shows the  queryCity function call. Copy and paste this call into the GraphQL Playground and hit the play button. Figure 7   Figure 7 shows the  queryCity function call and the result in the GraphQL Playground.  To shutdown the database, find the container id and then use the  docker stop command. Listing 21  Listing 21 shows how to find the id of the running Dgraph container and then stop and remove it. You can also hit  C in the terminal window running Dgraph to perform these same actions.  In this post, I showed you how to run Dgraph locally, the basics of defining a GraphQL schema, how to use the generated GraphQL CRUD API, and how to install and use a tool called GraphQL Playground. All these things are necessary to get up and running with Dgraph for application development. In future posts, I will show you how to leverage Dgraph, GraphQL, and the auto-generated CRUD API to build production based applications in Go. I\u2019ll do that with the  Travel project that is available today. For now, take the time to generate your own schema and look deeper at the  schema documentation provided by Dgraph. There are interfaces, enumerations, and inverse edges that I didn\u2019t cover in this post. There are other interesting types and details in the documentation so do take a look.  Do we need to add an ID predicate on every type we are defining? You aren\u2019t required to add an ID to a type. Types with IDs are provided a  get query function and  update mutation function because they can be identified uniquely. Given a type in the schema named  Product with an ID predicate: Query Functions Provided: - getProduct - queryProduct Mutation Functions Provided: - addProduct - updateProduct - deleteProduct Given a type in the schema named  Product without an ID predicate: Query Functions Provided: - queryProduct Mutation Functions Provided: - addProduct Is there a way to have a user defined ID? You can use  @id on a  String! field for user-defined IDs. See the example in  https://graphql.dgraph.io/docs/walk-through-example/. This ensures that 1) the field is unique and 2) automatically adds the hash index to the field for searching. How would user defined ID\u2019s affect performance and api generation? User-defined IDs\u2019s  get query would take the  String as input for the query. Mutations would require an internal lookup of the user-defined ID to find the node. The GraphQL API would allow you to query and mutate the type based on your user-defined ID instead of a hexadecimal number for the ID. Is the mutation and Query API a standard GraphQL API setup or is this something special in Dgraph? Query and Mutation are standard operations in GraphQL. Do all databases that support GraphQL provide the CRUD api\u2019s like Dgraph? With Dgraph, you\u2019ll define your GraphQL schema and Dgraph automatically generates a full GraphQL API to access the database. With other database systems, GraphQL support is typically done outside the database where you must also set up your own custom resolvers to translate GraphQL queries into the underlying database query language.", "posttime": "2020-05-16 02:16:51", "source_domain": "news.ycombinator.com", "source_name": "Hacker News", "tags": "graphql,\u7c7b\u578b", "title": "Dgraph\u3001GraphQL\u3001Schemas\u548cCRUD-Ardan\u5b9e\u9a8c\u5ba4", "title_en": "Dgraph, GraphQL, Schemas, & CRUD \u2013 Ardan Labs", "transed": 1, "url": "https://www.ardanlabs.com/blog/2020/05/dgraph-graphql-schemas-crud.html", "via": "", "real_tags": ["graphql", "\u7c7b\u578b"]}, {"category": "", "categoryclass": "", "imagename": "197f59c8f156409ce6f6503d7d5fa50d.jpg", "infoid": 1002275, "ip": "", "isanchordig": 1, "ischecked": 1, "isdelete": 0, "isneo": 1, "mark": "", "name": "", "note": "\u63d0\u4ea4\u6b64\u8868\u683c\u5373\u8868\u793a\u60a8\u786e\u8ba4\u5df2\u9605\u8bfb\u5e76\u540c\u610f\u6211\u4eec\u7684\u9690\u79c1\u653f\u7b56\u3002\nZeoTap\u662f\u4e00\u4e2a\u5ba2\u6237\u667a\u80fd\u5e73\u53f0\uff0c\u4f7f\u54c1\u724c\u80fd\u591f\u66f4\u597d\u5730\u4e86\u89e3\u5ba2\u6237\u5e76\u66f4\u597d\u5730\u9884\u6d4b\u4ed6\u4eec\u7684\u884c\u4e3a\u3002\u5b83\u4eec\u8de8\u591a\u4e2a\u793e\u4ea4\u5a92\u4f53\u3001\u5e7f\u544a\u6280\u672f\u3001Martech\u548cCRM\u5e73\u53f0\u96c6\u6210\u548c\u5173\u8054\u6570\u636e\u3002\u8be5\u516c\u53f8\u603b\u90e8\u8bbe\u5728\u5fb7\u56fd\uff0c\u5f3a\u8c03\u6d88\u8d39\u8005\u9690\u79c1\u548c\u6570\u636e\u5b89\u5168\uff0c\u62e5\u6709\u591a\u79cd\u8ba4\u8bc1(\u5982GDPR)\uff0c\u4ee5\u786e\u4fdd\u8de8\u5e02\u573a\u7684\u7aef\u5230\u7aef\u5408\u89c4\u6027\u3002\n\u5728\u6211\u4eec\u7684Scylla\u5cf0\u4f1a\u4e0a\uff0cZeoTap\u5de5\u7a0b\u526f\u603b\u88c1Sathish K S\u548c\u9996\u5e2d\u6570\u636e\u5de5\u7a0b\u5e08Saurabh Verma\u5206\u4eab\u4e86ZeoTap\u5982\u4f55\u5e94\u5bf9\u8eab\u4efd\u89e3\u6790\u548c\u96c6\u6210\u7684\u6311\u6218\u3002\u4ed6\u4eec\u5c55\u793a\u4e86Saurabh\u6240\u8bf4\u7684\u201c\u7531Scylla\u652f\u6301\u7684\u4e16\u754c\u4e0a\u6700\u5927\u7684\u539f\u751fJanusGraph\u6570\u636e\u5e93\u201d\uff0c\u4ee5\u6ee1\u8db3\u8ddf\u8e2a\u548c\u5173\u8054200\u4ebf\u4e2a\u7528\u6237\u53ca\u5176\u8bbe\u5907ID\u7684\u9700\u6c42\u3002\nZeoTap\u4f7f\u7528Scylla\u548cJanusGraph\u4f5c\u4e3a\u5176Connect\u4ea7\u54c1\u7684\u4e00\u90e8\u5206\uff0c\u8fd9\u662f\u4e00\u4e2a\u786e\u5b9a\u6027\u8eab\u4efd\u89e3\u51b3\u65b9\u6848\uff0c\u53ef\u4ee5\u5c06\u79bb\u7ebf\u5ba2\u6237CRM\u6570\u636e\u4e0e\u5728\u7ebf\u6570\u5b57\u6807\u8bc6\u7b26\u5173\u8054\u8d77\u6765\u3002ZeoTAP\u4ece80\u591a\u4e2a\u5408\u4f5c\u4f19\u4f34\u90a3\u91cc\u83b7\u53d6\u6570\u636e\uff0c\u5c06\u8fd9\u4e9b\u6570\u636e\u5206\u53d1\u523040\u591a\u4e2a\u76ee\u7684\u5730\u3002\n\u4f5c\u4e3a\u8eab\u4efd\u89e3\u6790\u7684\u4e00\u4e2a\u4f8b\u5b50\uff0cSathish\u4e3e\u4e86\u4e00\u4e2a\u4eba\u7684\u4f8b\u5b50\uff0c\u4ed6\u53ef\u80fd\u6709\u4e00\u5230\u4e24\u90e8\u624b\u673a\u3001\u4e00\u53f0\u5e73\u677f\u7535\u8111\u3001\u4e00\u53f0IP\u7535\u89c6\uff0c\u5e76\u4e14\u53ef\u80fd\u5c5e\u4e8e\u4efb\u4f55\u6570\u91cf\u7684\u5fe0\u8bda\u5ea6\u8ba1\u5212\u6216\u4ff1\u4e50\u90e8\u3002\u8fd9\u4e9b\u8bbe\u5907\u548c\u7a0b\u5e8f\u4e2d\u7684\u6bcf\u4e00\u4e2a\u90fd\u5c06\u4e3a\u60a8\u751f\u6210\u4e00\u4e2a\u6807\u8bc6\u7b26\uff0c\u5916\u52a0\u60a8\u8bbf\u95ee\u7684\u6bcf\u4e2a\u7ad9\u70b9\u7684\u6240\u6709\u8bbe\u5907\u4e0a\u7684Cookie\u6807\u8bc6\u7b26\u3002\n\u8428\u8482\u4ec0\u5f3a\u8c03\uff0c\u201c\u8eab\u4efd\u4e4b\u95f4\u7684\u8054\u7cfb\uff0c\u6216\u8005\u8bf4\u8054\u7cfb\uff0c\u6bd4\u4e2a\u4eba\u8eab\u4efd\u66f4\u6709\u4ef7\u503c\u3002\u201d\u8fd9\u80cc\u540e\u7684\u5546\u4e1a\u6848\u4f8b\uff0c\u5339\u914d\u6d4b\u8bd5\u548c\u5bfc\u51fa\u8fd9\u4e9bID\u7684\u80fd\u529b\uff0c\u90fd\u662fZeoTap\u53ef\u4ee5\u8d5a\u94b1\u7684\u3002\u4f8b\u5982\uff0c\u5ba2\u6237\u53ef\u4ee5\u63d0\u4f9b\u4e00\u7ec4100\u4e07\u4e2a\u7535\u5b50\u90ae\u4ef6\u5730\u5740\uff0c\u5e76\u8be2\u95ee\u5176\u4e2d\u6709\u591a\u5c11\u767e\u5206\u6bd4\u53ef\u4ee5\u4e0eZeoTap\u7684\u5df2\u77e5\u7528\u6237\u6570\u636e\u8fdb\u884c\u5339\u914d\u3002\u4ed6\u4eec\u8fd8\u53ef\u4ee5\u5efa\u7acb\u5230\u8868\u793a\u8be5\u5df2\u77e5\u7528\u6237\u7684\u5176\u4ed6\u6807\u8bc6\u7b26\u7684\u4f20\u9012\u94fe\u63a5\u3002\u7136\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5c06\u8be5\u6570\u636e\u5bfc\u51fa\u5230\u4ed6\u4eec\u81ea\u5df1\u7684\u7cfb\u7edf\u3002\n\u6700\u91cd\u8981\u7684\u662f\uff0cZeoTap\u7ef4\u62a4\u7740\u5b8c\u6574\u7684\u62a5\u544a\u548c\u5408\u89c4\u673a\u5236\uff0c\u5305\u62ec\u652f\u6301\u9009\u62e9\u9000\u51fa\u3002\u4ed6\u4eec\u8fd8\u5fc5\u987b\u786e\u4fdd\u8eab\u4efd\u8d28\u91cf\uff0c\u5e76\u5c06\u5176\u6570\u636e\u4e0e\u591a\u4e2a\u7b2c\u4e09\u65b9\u96c6\u6210\uff0c\u540c\u65f6\u4fdd\u6301\u6570\u636e\u201c\u65b0\u9c9c\u5ea6\u201d\u7684\u77ed\u671f\u670d\u52a1\u7ea7\u522b\u534f\u8bae\u3002\u201c\u8fd9\u610f\u5473\u7740\u60a8\u9700\u8981\u5177\u6709\u771f\u6b63\u5feb\u901f\u7684\u63a5\u6536\u548c\u771f\u6b63\u5feb\u901f\u7684\u67e5\u8be2\u6027\u80fd\u3002\u201d\n\u4ed6\u4eec\u6700\u521d\u7684MVP\u5b9e\u73b0\u4f7f\u7528Apache Spark\u6279\u5904\u7406\u6765\u5173\u8054\u4ed6\u4eec\u6240\u6709\u7684\u5408\u4f5c\u4f19\u4f34\u6570\u636e\uff0c\u5e76\u5c06\u8f93\u51fa\u7ed3\u679c\u5b58\u50a8\u5230S3\u3002\u7136\u540e\uff0c\u7528\u6237\u901a\u8fc7Amazon Athena\u67e5\u8be2\u548c\u5176\u4ed6\u9488\u5bf9Amazon RedShift\u6570\u636e\u4ed3\u5e93\u7684Apache Spark\u4f5c\u4e1a\u8bbf\u95ee\u6570\u636e\uff0c\u4ee5\u751f\u6210\u5339\u914d\u6d4b\u8bd5\u3001\u5bfc\u51fa\u548c\u62a5\u544a\u3002\u4f46\u662f\uff0c\u5f53ZeoTap\u5f00\u59cb\u8de8\u8d8a30\u4ebfID\u7684\u89c4\u6a21\u65f6\uff0c\u4ed6\u4eec\u770b\u5230\u4ed6\u4eec\u7684\u5904\u7406\u65f6\u95f4\u8d85\u8fc7\u4e86\u4e00\u6574\u5929(24\u5c0f\u65f6)\uff0c\u800c\u4ed6\u4eec\u7684SLA\u901a\u5e38\u57282\u52306\u5c0f\u65f6\u7684\u8303\u56f4\u5185\u3002\nZeoTap\u67e5\u770b\u4e86\u4ed6\u4eec\u7684\u8981\u6c42\u3002\u4ed6\u4eec\u9700\u8981\u4e00\u4e2a\u540c\u65f6\u652f\u6301\u9ad8\u7ea7\u522b\u8bfb\u53d6\u548c\u5199\u5165\u7684\u7cfb\u7edf\u3002\u56e0\u4e3a\u5373\u4f7f\u5728\u5206\u6790\u6570\u636e\u7684\u540c\u65f6\uff0c\u60a8\u4ecd\u7136\u53ef\u4ee5\u6709\u66f4\u591a\u7684\u6570\u636e\u6d8c\u5165\u7cfb\u7edf\u3002\u5728\u4ed6\u4eec\u62e5\u670930\u4ebf\u4e2aID\u7684\u65f6\u5019\uff0c\u4ed6\u4eec\u7684SLA\u6700\u4f4e\u4e3a\u6bcf\u79d250k\u6b21\u5199\u5165\u3002\u4ed6\u4eec\u8fd8\u5728\u5bfb\u627e\u4e00\u79cd\u80fd\u591f\u4e3a\u6570\u636e\u63d0\u4f9b\u5f00\u7bb1\u5373\u7528\u7684\u751f\u5b58\u65f6\u95f4(TTL)\u7684\u6570\u636e\u5e93\u89e3\u51b3\u65b9\u6848\u3002\n\u5bf9\u4e8e\u8bfb\u53d6\u5de5\u4f5c\u8d1f\u8f7d\uff0cZeoTap\u9700\u8981\u8fdb\u884c\u5927\u91cf\u5206\u6790\u6765\u5339\u914dID\u5e76\u68c0\u7d22(\u5bfc\u51fa)\u94fe\u63a5ID\u4e0a\u7684\u6570\u636e\uff0c\u901a\u5e38\u57fa\u4e8eID\u7c7b\u578b(Android\u3001iOS\u3001\u7f51\u7ad9cookie)\u6216\u5c5e\u6027(\u65b0\u8fd1\u3001\u8d28\u91cf\u5206\u6570\u6216\u56fd\u5bb6)\u7b49\u6761\u4ef6\u3002\n\u8428\u8482\u4ec0\u968f\u540e\u8c08\u5230\u4e86\u4ed6\u4eec\u7684\u5546\u4e1a\u6a21\u5f0f\u3002ZeoTap\u4e0d\u4f1a\u4ece\u4ed6\u4eec\u7684\u5408\u4f5c\u4f19\u4f34\u90a3\u91cc\u8d2d\u4e70\u6570\u636e\u3002\u53d6\u800c\u4ee3\u4e4b\u7684\u662f\uff0c\u4ed6\u4eec\u63d0\u4f9b\u4e86\u6536\u5165\u5206\u4eab\u534f\u8bae\u3002\u56e0\u6b64\uff0c\u6240\u6709\u6570\u636e\u90fd\u5fc5\u987b\u6807\u8bb0\uff0c\u4ee5\u6ce8\u660e\u662f\u54ea\u4e2a\u6570\u636e\u5408\u4f5c\u4f19\u4f34\u63d0\u4f9b\u7684\u3002\u5f53\u5408\u4f5c\u4f19\u4f34\u7684\u6570\u636e\u88ab\u8bbf\u95ee\u65f6\uff0c\u4ed6\u4eec\u5c06\u83b7\u5f97ZeoTap\u8d5a\u53d6\u7684\u6536\u5165\u7684\u4e00\u90e8\u5206\u3002\u8ba1\u6570\u5668\u5bf9\u4e8e\u8ba1\u7b97\u5408\u4f5c\u4f19\u4f34\u4ece\u6570\u636e\u5229\u7528\u4e2d\u83b7\u5f97\u7684\u6536\u5165\u81f3\u5173\u91cd\u8981\u3002\n\u6df1\u5ea6\u8fc7\u6ee4\u5668\u662f\u4e00\u79cd\u8ba1\u7b97\u5728\u7ed3\u675f\u4e00\u6761\u8fde\u63a5\u7ebf\u4e4b\u524d\u904d\u5386\u56fe\u5f62\u7684\u8ddd\u79bb\u7684\u65b9\u6cd5\u3002\u56e0\u6b64\uff0c\u4ed6\u4eec\u7684\u5ba2\u6237\u53ef\u4ee5\u8bbe\u7f6e\u9650\u5236-\u5728\u95f4\u63a5\u6df1\u5ea6\u4e3a4\u30015\u621610\u4e4b\u540e\u505c\u6b62\u626b\u63cf\u3002\n\u201c\u662f\u65f6\u5019\u6539\u53d8\u4e86\u3002\u5982\u679c\u4f60\u770b\u770b\u6211\u4e00\u76f4\u5728\u8bf4\u7684\uff0c\u50cf\u201c\u4f20\u9012\u6027\u201d\uff0c\u201c\u6df1\u5ea6\u201d\uff0c\u201c\u8054\u7cfb\u201d\uff0c\u201c\u8054\u7cfb\u201d\u4e4b\u7c7b\u7684\u672f\u8bed--\u8fd9\u4e9b\u90fd\u662f\u4f60\u4eec\u5728\u5927\u5b66\u91cc\u5b66\u7684\u56fe\u8bba\u3002\u6240\u4ee5\u6211\u4eec\u60f3\uff0c\u2018\u6709\u6ca1\u6709\u4e00\u79cdID\u56fe\u53ef\u4ee5\u76f4\u63a5\u53d6\u4ee3\u6211\u7684\u5b58\u50a8\uff0c\u5e76\u63d0\u4f9b\u6240\u6709\u5f00\u7bb1\u5373\u7528\u7684\u4e1c\u897f\uff1f\u2019\u8fd9\u5c31\u662fZeoTap\u5f00\u59cb\u8bc4\u4f30\u56fe\u5f62\u6570\u636e\u5e93\u7684\u8fc7\u7a0b\u3002\nZeoTap\u4f9d\u9760Apache Spark\u5904\u7406\u6765\u81ea\u5176\u5408\u4f5c\u4f19\u4f34\u7684\u6570\u636e\uff0c\u5e76\u6839\u636eID\u96c6\u4e3a\u5176\u5ba2\u6237\u63d0\u4f9b\u5206\u6790\u4ee5\u6d4b\u8bd5\u5339\u914d\uff0c\u5e76\u57fa\u4e8e\u5176\u94fe\u63a5\u5bfc\u51fa\u3002\u4ed6\u4eec\u7684\u95ee\u9898\u662f\u56fe\u5f62\u6570\u636e\u5e93\u662f\u5426\u80fd\u591f\u8fdb\u884c\u6269\u5c55\u4ee5\u6ee1\u8db3\u5176\u82db\u523b\u7684\u5de5\u4f5c\u8d1f\u8f7d\u3002\nSaurabh\u968f\u540e\u63cf\u8ff0\u4e86\u67e5\u627e\u672c\u5730\u56fe\u5f62\u6570\u636e\u5e93\u7684\u8fc7\u7a0b\u3002\u4ed6\u4eec\u7684\u89e3\u51b3\u65b9\u6848\u9700\u8981\u63d0\u4f9b\u56db\u4e2a\u5c5e\u6027\uff1a\nSaurabh\u518d\u6b21\u5f3a\u8c03\uff0c\u94fe\u63a5(\u8fb9)\u6bd4\u9876\u70b9\u66f4\u91cd\u8981\u3002\u8fd9\u4e9b\u94fe\u63a5\u6709\u5f88\u591a\u5143\u6570\u636e\u3002\u94fe\u63a5\u591a\u4e45\u4e86\uff1f\u54ea\u4e2a\u6570\u636e\u5408\u4f5c\u4f19\u4f34\u5411\u6211\u4eec\u63d0\u4f9b\u4e86\u6b64\u4fe1\u606f\uff1f\u8d28\u91cf\u5206\u6570\u4e5f\u662f\u94fe\u63a5\u5c5e\u6027\u3002\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u4ed6\u4eec\u9700\u8981\u8054\u7cfb\u624d\u80fd\u6210\u4e3a\u4e00\u7b49\u516c\u6c11\u7684\u539f\u56e0\u3002\n\u6b64\u5916\uff0c\u770b\u770b\u4ed6\u4eec\u7684\u6570\u636e\u5206\u6790\u5e08\u56e2\u961f\uff0c\u4ed6\u4eec\u60f3\u8981\u7684\u4e1c\u897f\u5bf9\u4ed6\u4eec\u6765\u8bf4\u662f\u53ef\u4ee5\u7406\u89e3\u7684\u3002\u8fd9\u5c31\u662f\u4ed6\u4eec\u5173\u6ce8Apache Gremlin/Tinkerop\u7684\u539f\u56e0\u3002\u5728\u8fc7\u53bb\uff0c\u6267\u884cSQL\u67e5\u8be2\u610f\u5473\u7740\u4ed6\u4eec\u5fc5\u987b\u8fdb\u884c\u66f4\u590d\u6742\u7684\u91cd\u91cf\u7ea7\u8fde\u63a5\uff0c\u4ee5\u4fbf\u66f4\u6df1\u5165\u5730\u904d\u5386\u3002\u4f7f\u7528Gremlin\uff0c\u67e5\u8be2\u975e\u5e38\u76f8\u4f3c\uff0c\u4e5f\u66f4\u5bb9\u6613\u7406\u89e3\u3002\n(SELECT*FROM IDMVP WHERE ID1=&#39\uff1b75d630a9-2d34-433e-b05f-2031a0342e42&#39\uff1b\uff0cIDTYPE1=&#39\uff1bid_MID_13&#39\uff1b\u4ee5\u53caID2=&#39\uff1b5c557df3-df47-4603-64bc-5a9a63f22245&#39\uff1b\uff0cIDTYPE2=&#39\uff1bid_MID_4&#39\uff1b)//\u6df1\u5ea6=1\u8054\u5408(SELECT*FROM IDMPT1\uff0cIDMVP T2 WHERE t1.id1=&#39\uff1b75d630a9-2d34-433e-b05f-2031a0342e42&#39\uff1b\uff0ct1.idtype1=&#39\uff1bID_MID_13&#39\uff1b\u4ee5\u53cat2.id2=&#39\uff1b5c557df3-df47-4603-64bc-5a9a63f22245&#39\uff1b\u548ct2.idtype2=&#39\uff1bid_MID_4&#39\uff1b)//Depth=2\u8054\u5408(SELECT*FROM IDMVP T1\uff0cIDMVP T2\uff0cIDMVP T3\uff0c\u5176\u4e2dt1.id1=&#39\uff1b75d630a9-2d34-433e-b05f-2031a0342e42&#39\uff1b\u548ct1.idtype1=&#39\uff1bid_MID_13&#39\uff1b\u4ee5\u53cat3.id2=&#39\uff1b5c557df3-df47-4603-64bc-5a9a63f22245&#39\uff1b\u548ct3.idtype2=&#39\uff1bID_MID_4&#39\uff1b)//\u6df1\u5ea6=3\uff1f\nSQL\u67e5\u8be2\u4e0eGremlin\u67e5\u8be2\u7684\u5e76\u5217\u6bd4\u8f83\u3002SQL\u67e5\u8be2\u5305\u542b629\u4e2a\u5b57\u7b26\uff0c\u800cGremlin\u67e5\u8be2\u53ea\u6709229\u4e2a\u5b57\u7b26\u3002\u5982\u679c\u9700\u8981\u66f4\u591a\u7ea7\u522b\u7684\u67e5\u8be2\u6df1\u5ea6\uff0c\u5219SQL\u67e5\u8be2\u5c06\u663e\u8457\u66f4\u957f\u3002\nZeoTAP\u968f\u540e\u4ece2018\u5e748\u6708\u5f00\u59cb\u8fdb\u884c\u6982\u5ff5\u9a8c\u8bc1(POC)\uff0c\u8003\u8651\u9002\u5f53\u7684\u5e95\u5c42AWS EC2\u670d\u52a1\u5668\u7fa4\u96c6\u4e0a\u7684\u4e00\u7cfb\u5217\u5f00\u6e90\u6570\u636e\u5e93\uff1a\n\u5bf9\u4e8ePoC\uff0c\u6240\u6709\u8fd9\u4e9b\u7fa4\u96c6\u7684\u590d\u5236\u7cfb\u6570\u4ec5\u4e3a1\u3002\u4ed6\u4eec\u8fd8\u57283x c5.18xLarge\u5b9e\u4f8b\u4e0a\u521b\u5efa\u4e86\u5ba2\u6237\u7aef\u7fa4\u96c6\u914d\u7f6e\u3002\n\u867d\u7136Aerospike\u4e0d\u662f\u4e00\u4e2a\u539f\u751f\u56fe\u5f62\u6570\u636e\u5e93\uff0c\u4f46ZeoTap\u5bf9\u5b83\u5f88\u719f\u6089\uff0c\u5e76\u5c06\u5176\u4f5c\u4e3a\u201cB\u8ba1\u5212\u201d\u9009\u9879\uff0c\u5229\u7528Aerospike\u4e2d\u7684UDF\u3002\n\u4ed6\u4eec\u7684\u76ee\u6807\u662f\u6d4b\u8bd5\u4ee3\u8868\u5176\u5f53\u65f6\u73b0\u6709\u751f\u4ea7\u5de5\u4f5c\u8d1f\u8f7d\u4e09\u500d\u7684\u5de5\u4f5c\u8d1f\u8f7d\uff0c\u4ee5\u4fbf\u80fd\u591f\u6839\u636e\u5f53\u524d\u7684\u589e\u957f\u9884\u671f\u8fdb\u884c\u6269\u5c55\u3002\u7136\u800c\uff0cSaurabh\u518d\u6b21\u63d0\u9192\u89c2\u4f17\uff0c\u81ea\u90a3\u4ee5\u540e\uff0c\u4ed6\u4eec\u5df2\u7ecf\u589e\u957f\u5230\u8d85\u8fc7150\u4ebf\u4e2aID\u3002\n\u4ed6\u4eec\u7684\u5de5\u4f5c\u4e0e\u6807\u7b7e\u5c5e\u6027\u56fe(LPG)\u6a21\u578b\u975e\u5e38\u4e00\u81f4\uff0c\u800c\u4e0d\u662f\u8d44\u6e90\u63cf\u8ff0\u6846\u67b6(RDF)\u6a21\u578b\u3002(\u5982\u679c\u60a8\u4e0d\u719f\u6089\u5176\u4e2d\u7684\u533a\u522b\uff0c\u53ef\u4ee5\u5728\u6b64\u5904\u9605\u8bfb\u6709\u5173\u5b83\u4eec\u7684\u66f4\u591a\u4fe1\u606f\u3002)\u3002LPG\u6a21\u5f0f\u8fbe\u5230\u4e86\u4ed6\u4eec\u7684\u9884\u671f\uff0c\u964d\u4f4e\u4e86\u6570\u636e\u7684\u57fa\u6570\u3002\nZeoTap\u7814\u7a76\u4e86\u6574\u4e2a\u7cfb\u7edf\u7684\u6210\u672c\u3002Aerospike\u89e3\u51b3\u65b9\u6848\u7684\u6210\u672c\u4f1a\u66f4\u9ad8\uff0c\u56e0\u4e3a\u5b83\u7684\u5185\u5b58(RAM)\u4f7f\u7528\u7387\u5f88\u9ad8\u3002\u6700\u7ec8\uff0c\u4ed6\u4eec\u51b3\u5b9a\u5c06ScyllaDB\u652f\u6301\u7684JanusGraph\u5b89\u88c5\u5728SSD\u4e0a\uff0c\u56e0\u4e3a\u5b83\u4ef7\u683c\u5b9e\u60e0\u3002\n\u201c\u56fe\u5f62DB\u6570\u636e\u6a21\u578b\u627f\u8bfa\u4e86\u4e24\u4ef6\u4e8b\uff1a\u4e00\u662f\u6a21\u5f0f\u6f14\u5316\u65b9\u9762\u7684\u6781\u7aef\u7075\u6d3b\u6027\uff0c\u4e8c\u662f\u9886\u57df\u7684\u8868\u73b0\u529b\uff0c\u201dSathish\u63d2\u8bdd\u8bf4\u3002\u7136\u540e\uff0c\u4e3a\u4e86\u8bc1\u660e\u8fd9\u4e00\u70b9\uff0cSaurabh\u5206\u4eab\u4e86ZeoTap\u6570\u636e\u6a21\u578b\u7684\u8fd9\u4e2a\u4f8b\u5b50\uff1a\n\u6bcf\u4e2a\u9876\u70b9(\u767d\u6846)\u4ee3\u8868\u7528\u6237\u7684\u6570\u5b57\u8eab\u4efd\uff0c\u4e0e\u5176\u5c5e\u6027\u4e00\u8d77\u5b58\u50a8\u5728JanusGraph\u4e2d\u3002\u5b83\u4eec\u53ef\u4ee5\u5305\u62ec\u8bbe\u5907\u7684\u64cd\u4f5c\u7cfb\u7edf(Android\u6216iOS)\u3001\u56fd\u5bb6(\u4e0a\u9762\u6709\u897f\u73ed\u7259\u548c\u610f\u5927\u5229\u7684\u6570\u636e\u70b9)\u7b49\u7b49\u3002\n\u8fb9\u7f18(\u8fde\u63a5\u65b9\u6846\u7684\u7ebf)\u8868\u793aZeoTap\u7684\u5408\u4f5c\u4f19\u4f34\u63d0\u4f9b\u7684\u94fe\u63a5\u3002\u5728\u8fd9\u4e9b\u6587\u4ef6\u4e2d\uff0c\u60a8\u53ef\u4ee5\u770b\u5230\u5171\u4eab\u8be5\u7279\u5b9a\u94fe\u63a5\u7684\u6570\u636e\u5408\u4f5c\u4f19\u4f34\u7684ID(DP1\u3001DP2\u7b49)\u3002\u5728\u7279\u5b9a\u65f6\u95f4(T1\u3001T2\u7b49)\u3002\u4ed6\u4eec\u8fd8\u4f1a\u7ed9\u51fa\u4e00\u4e2a\u8d28\u91cf\u5206\u6570\u3002\n\u7b2c\u4e00\u4e2a\u662f\u53ca\u7269\u94fe\u3002ZeoTap\u4e0d\u5b58\u50a8\u9884\u8ba1\u7b97\u94fe\u63a5\u3002\u6bcf\u4e2a\u67e5\u8be2\u90fd\u662f\u5728\u904d\u5386\u65f6\u5904\u7406\u7684\u3002\n\u7b2c\u4e8c\u79cd\u662f\u57fa\u4e8e\u5b58\u50a8\u5728\u9876\u70b9\u548c\u8fb9\u4e2d\u7684\u5143\u6570\u636e\u8fc7\u6ee4\u904d\u5386\u3002\u4f8b\u5982\uff0c\u57fa\u4e8e\u56fd\u5bb6/\u5730\u533a\u7684\u8fc7\u6ee4\u5bf9\u4e8e\u7ef4\u62a4GDPR\u5408\u89c4\u6027\u81f3\u5173\u91cd\u8981\u3002\u540c\u6837\u7684\u505a\u6cd5\u4e5f\u53ef\u4ee5\u57fa\u4e8e\u8d28\u91cf\u5206\u6570\u6765\u5b8c\u6210\u3002\u5ba2\u6237\u53ef\u80fd\u53ea\u60f3\u901a\u8fc7\u9ad8\u8d28\u91cf\u7684\u94fe\u63a5\u83b7\u5f97\u7ed3\u679c\u3002\n\u4e09\u662f\u6570\u636e\u6a21\u578b\u7684\u53ef\u6269\u5c55\u6027\u3002\u4ed6\u4eec\u4e0d\u80fd\u62e5\u6709\u8981\u6c42\u4ed6\u4eec\u6839\u636e\u6570\u636e\u6a21\u578b\u7684\u66f4\u6539\u505c\u6b62\u548c\u91cd\u65b0\u542f\u52a8\u6570\u636e\u5e93\u7684\u6570\u636e\u5e93\u3002\u6240\u6709\u66f4\u6539\u90fd\u9700\u8981\u80fd\u591f\u5728\u8fd0\u884c\u4e2d\u5b8c\u6210\u3002\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u201clinkSource\u201d\u88ab\u6dfb\u52a0\u5230\u5176\u4e2d\u4e00\u6761\u8fb9\u3002\u5982\u679c\u4e0d\u662f\u6570\u636e\u5408\u4f5c\u4f19\u4f34\uff0c\u800c\u662fZeoTap\u81ea\u5df1\u7684\u542f\u53d1\u5f0f\u65b9\u6cd5\u63d0\u4f9b\u4e86\u8054\u7cfb\uff0c\u4ed6\u4eec\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e00\u70b9\u3002\n\u5728\u751f\u4ea7\u4e2d\uff0cZeoTap\u5728\u591a\u4e2a\u533a\u57df\u7684AWS i3.4x\u5927\u578b\u8282\u70b9\u4e0a\u8fd0\u884c\uff0c\u6bcf\u4e2a\u533a\u57df\u6709\u4e09\u4e2a\u6216\u56db\u4e2a\u8282\u70b9\u3002\nZeoTap\u5728\u4ed6\u4eec\u7684MVP\u4e2d\u5f00\u59cb\u662f\u4e00\u4e2a\u6279\u91cf\u6444\u53d6\u8fc7\u7a0b\uff0c\u4f46\u5728\u9996\u5148\u901a\u8fc7\u6570\u636e\u7684\u91cd\u590d\u6570\u636e\u6d88\u9664\u548c\u4e30\u5bcc\u8fc7\u7a0b\u540e\uff0c\u53d8\u6210\u4e86\u6df7\u5408\u6d41\u548c\u4f7f\u7528Apache Kafka\u6279\u91cf\u6444\u53d6\u5230JanusGraph\u4e2d\u3002\u8fd9\u4ece\u6700\u521d\u7684\u4ec5\u6279\u5904\u7406\u6d41\u7a0b\u4e2d\u6d88\u9664\u4e86\u8bb8\u591a\u4ee4\u4eba\u75db\u82e6\u7684\u5931\u8d25\uff0c\u5e76\u6781\u5927\u5730\u51cf\u5c11\u4e86\u6bcf\u5929\u63a5\u6536\u6570\u4ebf\u4e2a\u65b0\u6570\u636e\u70b9\u6240\u9700\u7684\u65f6\u95f4\u3002\n\u4ed6\u4eec\u8fd8\u53d1\u73b0\uff0c\u5c06\u9876\u70b9\u548c\u8fb9\u8d1f\u8f7d\u62c6\u5206\u6210\u5355\u72ec\u7684Kafka\u6d41\u5bf9\u4e8e\u5b9e\u73b0\u66f4\u9ad8\u7ea7\u522b\u7684\u6bcf\u79d2\u67e5\u8be2(QPS)\u975e\u5e38\u91cd\u8981\uff0c\u56e0\u4e3a\u5199\u5165\u884c\u4e3a\u662f\u4e0d\u540c\u7684\u3002\u9876\u70b9\u662f\u5355\u6b21\u5199\u5165\uff0c\u800c\u8fb9\u662f\u67e5\u627e\u548c\u5199\u5165(\u5148\u8bfb\u540e\u5199)\u3002\nZeoTAP\u5de5\u7a0b\u5e08\u4e0d\u4ec5\u5f00\u59cb\u6d4b\u91cf\u6bcf\u4e2a\u8282\u70b9\u7684\u6027\u80fd\uff0c\u8fd8\u5f00\u59cb\u6df1\u5165\u7814\u7a76CPU\u5229\u7528\u7387\u3002\u4ed6\u4eec\u89c2\u5bdf\u5230\u6bcf\u4e2a\u670d\u52a1\u5668\u6838\u5fc3\u6bcf\u79d2\u5904\u74065k\u4e2a\u4e8b\u52a1(TPS)\u3002\n\u5bf9\u4e8e\u904d\u5386\uff0cSathish\u8b66\u544a\u7528\u6237\u8981\u6ce8\u610f\u4ed6\u4eec\u7684\u201c\u8d85\u7ea7\u8282\u70b9\u201d\uff0c\u4ed6\u5c06\u5176\u5206\u4e3a\u4e24\u7c7b\u3002\u7b2c\u4e00\u79cd\u60c5\u51b5\u662f\u8fde\u63a5\u5230\u8bb8\u591a\u5176\u4ed6\u8282\u70b9\u7684\u8282\u70b9\u3002\u7b2c\u4e8c\u4e2a\u662f\u5b83\u7684\u6df1\u5ea6\u4e0d\u65ad\u589e\u52a0\u7684\u5730\u65b9\u3002\n\u8428\u8482\u4ec0\u63d0\u4f9b\u7684\u53e6\u4e00\u6761\u5efa\u8bae\u662f\u73a9\u5f04\u4f60\u7684\u538b\u7f29\u7b56\u7565\u3002\u4f7f\u7528LevelTiered\uff0cZeoTap\u6bcf\u79d2\u80fd\u591f\u83b7\u5f972.5\u500d\u4ee5\u4e0a\u7684\u67e5\u8be2\uff0c\u5e76\u4e14\u5e76\u53d1\u5ba2\u6237\u7aef\u5f97\u5230\u4e86\u66f4\u597d\u7684\u5904\u7406\u3002\n\u4ed6\u8fd8\u5c55\u793a\u4e86\u5728\u670d\u52a1\u5668\u7aef\u8fc7\u6ee4\u6570\u636e\u53ef\u80fd\u4f1a\u5982\u4f55\u5bfc\u81f4\u5ef6\u8fdf\u3002\u5bf9\u67d0\u4e9b\u6761\u4ef6\u8fdb\u884c\u67e5\u8be2\u8fc7\u6ee4\u53ef\u80fd\u9700\u89812.3\u79d2\uff0c\u800c\u4ec5\u63d0\u53d6\u6240\u6709\u672a\u8fc7\u6ee4\u7684\u6570\u636e\u53ef\u80fd\u53ea\u9700\u89811\u79d2\u3002\u56e0\u6b64\uff0c\u5bf9\u4e8e\u4ed6\u4eec\u6765\u8bf4\uff0c\u57fa\u4e8e\u5c5e\u6027(\u5c5e\u6027\u548c\u6df1\u5ea6)\u7684\u8fc7\u6ee4\u662f\u5728\u5e94\u7528\u5c42\u5b8c\u6210\u7684\u3002\nSaurabh\u968f\u540e\u8c08\u5230\u4e86ZeoTap\u5f00\u53d1\u7684\u8d28\u91cf\u8bc4\u5206\u3002\u5b83\u57fa\u4e8e\u4ed6\u4eec\u6240\u8c13\u7684\u201cAD\u8bc4\u5206\u201d\uff0c\u5373\u8fb9\u7f18\u4e00\u81f4\u6027(A)\u9664\u4ee5\u8fb9\u7f18\u4e0d\u4e00\u81f4\u6027(D)\u7684\u6bd4\u7387\u3002\u5b83\u4eec\u8fd8\u6839\u636e\u65b0\u8fd1\u8bc4\u5206\uff0c\u7136\u540e\u901a\u8fc7\u4e8b\u4ef6\u7a00\u6709\u6027\u8c03\u6574\u5bf9\u5176\u8fdb\u884c\u4fee\u6539\uff0c\u4ee5\u5f97\u51fa\u6700\u7ec8\u8d28\u91cf\u5206\u6570\u3002\nZeoTap\u8fd8\u5177\u6709\u8de8\u56fe\u904d\u5386\u529f\u80fd\u3002\u8fd9\u5c31\u662f\u9664\u4e86\u4ed6\u4eec\u81ea\u5df1\u7684\u6570\u636e\u4e4b\u5916\uff0c\u4ed6\u4eec\u8fd8\u53ef\u4ee5\u641c\u7d22\u5b58\u50a8\u5728\u5355\u72ec\u7684\u56fe\u5f62\u6570\u636e\u5e93\u4e2d\u7684\u7b2c\u4e09\u65b9\u5408\u4f5c\u4f19\u4f34\u6570\u636e\u7684\u5730\u65b9\u3002ZeoTap\u80fd\u591f\u5c06\u8fd9\u4e9b\u7b2c\u4e09\u65b9\u6570\u636e\u4fdd\u5b58\u4e3aScylla\u4e2d\u7684\u5355\u72ec\u5bc6\u94a5\u7a7a\u95f4\u3002\u9488\u5bf9\u8fd9\u4e9b\u7684\u67e5\u8be2\u4e0d\u662f\u5728\u6570\u636e\u5e93\u4e2d\u94fe\u63a5\u5728\u4e00\u8d77\u7684\uff0c\u800c\u662f\u5728\u5e94\u7528\u5c42\u4e0a\u94fe\u63a5\u5728\u4e00\u8d77\u7684\u3002\n\u6700\u540e\uff0cZeoTAP\u8fd0\u884cID\u56fe\u8d28\u91cf\u5206\u6790\uff0c\u5176\u7ed3\u679c\u88ab\u53cd\u9988\u5230\u4ed6\u4eec\u7684OLTP\u548cOLAP\u7cfb\u7edf\u4e2d\uff0c\u4ee5\u4e00\u81f4\u5730\u786e\u4fdd\u6700\u9ad8\u8d28\u91cf\u7684\u6570\u636e\u3002\n\u60a8\u53ef\u4ee5\u901a\u8fc7\u89c2\u770b\u4e0b\u9762\u7684\u5b8c\u6574\u89c6\u9891\u6216\u67e5\u770b\u6211\u4eec\u6280\u672f\u8bb2\u5ea7\u9875\u9762\u4e0a\u7684\u5e7b\u706f\u7247\u6765\u4e86\u89e3\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u4ee5\u53ca\u4e86\u89e3ZeoTap\u7684\u4e3b\u8981\u8981\u70b9\u3002\u5982\u679c\u60a8\u5bf9Scylla\u4e0a\u7684JanusGraph\u5728\u60a8\u81ea\u5df1\u7684\u73af\u5883\u4e2d\u5982\u4f55\u5de5\u4f5c\u6709\u66f4\u591a\u7684\u95ee\u9898\uff0c\u6211\u4eec\u9f13\u52b1\u60a8\u4e0e\u6211\u4eec\u8054\u7cfb\uff0c\u6216\u8005\u52a0\u5165\u6211\u4eec\u7684\u677e\u5f1b\u6765\u8be2\u95ee\u60a8\u5728\u6211\u4eec\u5728\u7ebf\u793e\u533a\u7684\u540c\u884c\u3002", "note_en": "By submitting this form, you are confirming you have read and agree to our  privacy policy.\n  Zeotap is a customer intelligence platform that enables brands to better understand their customers and better predict their behavior. They integrate and correlate data across a number of social media, adtech, martech and CRM platforms. Headquartered in Germany, the company emphasizes consumer privacy and data security, with multiple certifications (such as GDPR) to ensure end-to-end compliance across markets.\n At our Scylla Summit, Zeotap\u2019s Vice President of Engineering, Sathish K S, and Principal Data Engineer Saurabh Verma shared how Zeotap addresses the challenge of identity resolution and integration. They presented what Saurabh described as the \u201cworld\u2019s largest native JanusGraph database backed by Scylla\u201d to meet the needs of tracking and correlating 20 billion IDs for users and their devices.\n  Zeotap uses Scylla and JanusGraph as part of their  Connect product, a deterministic identity solution that can correlate offline customer CRM data to online digital identifiers. Sourcing data from over 80 partners, Zeotap distributes that data out to over forty destinations.\n As an example of identity resolution, Sathish gave the example of a person who might have one or two mobile phones, a tablet, an IP television, and may belong to any number of loyalty programs or clubs. Each of these devices and each of these programs is going to generate an identifier for you, plus cookie identifiers across all your devices for each of the sites you visit.\n  Sathish emphasized, \u201cThe linkages, or the connections, between the identities are more valuable than the individual identities.\u201d The business case behind this, the match test and the ability to export these IDs, are what Zeotap can monetize. For example, a customer can present a set of one million email addresses and ask what percentage of those can be matched against Zeotap\u2019s known user data. They can also make a transitive link to other identifiers that represent that known user. The user can then export that data to their own systems.\n On top of this, Zeotap maintains full reporting and compliance mechanisms, including supporting opt-outs. They also have to ensure identity quality and integrate their data with multiple third parties, all while maintaining a short service level agreement for \u201cfreshness\u201d of data. \u201cThat means you need to have real quick ingestion as well as real quick query performance.\u201d\n Their original MVP implementation used Apache Spark batch processing to correlate all of their partner data, with output results stored to s3. Users then accessed data via Amazon Athena queries and other Apache Spark jobs against an Amazon Redshift data warehouse to produce match tests, exports and reports. But when Zeotap started crossing the three billion ID scale, they saw their processing going towards greater than a full day (twenty four hours), while their SLAs were often in the two to six hour range.\n Zeotap looked at their requirements. They needed a system that allowed for both high levels of reads and writes simultaneously. Because even as data is being analyzed you can still have more data pouring into the system. Their SLA, back at a time when they had three billion IDs, was 50k writes per second at a minimum. They were also looking for a database solution that provided Time To Live (TTL) for data right out of the box.\n For the read workload, Zeotap needed to do a lot of analytics to match IDs and retrieve (export) data on linked IDs, often based on conditions such as ID types (Android, iOS, website cookies), or properties (recency, quality score, or country).\n Sathish then spoke about their business model. Zeotap doesn\u2019t buy data from their partners. They provide revenue sharing agreements instead. So all data has to be marked to note which data partner provided it. As a partner\u2019s data is accessed they get a portion of the revenue that Zeotap earns. Counters are essential to calculate that partner revenue from data utilization.\n Depth filters are a method to calculate how far to traverse a graph before ending a line of linkage. So their customers can set limits \u2014 stop scanning after an indirection depth of four, or five, or ten.\n \u201cIt was time to change. If you look at it what I have been talking about, parlances like \u2018transitivity,\u2019 \u2018depth,\u2019 \u2018connections,\u2019 \u2018linkages\u2019 \u2014 these are all directly what you are studying in college in graph theory. So we thought, \u2018is there an ID graph that can directly replace my storage and give all of this out of the box?&#39;\u201d This is where Zeotap began the process of evaluating graph databases.\n  Zeotap relies upon Apache Spark to process data coming in from their partners, as well as to provide analytics for their clients based upon sets of IDs to test for matches, and to export based on its linkages. The question they had was whether a graph database would be able to scale to meet their demanding workloads.\n  Saurabh then described the process to find a native graph database. Their solution needed to provide four properties:\n  Again, Saurabh emphasized that the linkages (edges) were more important than the vertices. The linkages had a lot of metadata. How recent is the link? Which data partner gave us this information? Quality scores are also link attributes. This was why they needed the linkages to be first class citizens.\n Further, looking at their data analysts team, they wanted something that would be understandable to them. This is why they looked at  Apache Gremlin/Tinkerpop. In the past, doing SQL queries meant that they had to do more complex and heavyweight JOINs the deeper they wished to traverse. With Gremlin the queries are much similar and more comprehensible.\n (select * from idmvp\rwhere id1 = &#39;75d630a9-2d34-433e-b05f-2031a0342e42&#39; and idtype1 = &#39;id_mid_13&#39;\rand id2 = &#39;5c557df3-df47-4603-64bc-5a9a63f22245&#39; and idtype2 = &#39;id_mid_4&#39;) // depth = 1\runion\r\r(select * from idmvp t1, idmvp t2\rwhere t1.id1 = &#39;75d630a9-2d34-433e-b05f-2031a0342e42&#39; and t1.idtype1 = &#39;id_mid_13&#39;\rand t2.id2 = &#39;5c557df3-df47-4603-64bc-5a9a63f22245&#39; and t2.idtype2 = &#39;id_mid_4&#39;) // depth = 2\runion\r\r(select * from idmvp t1, idmvp t2, idmvp t3\rwhere t1.id1 = &#39;75d630a9-2d34-433e-b05f-2031a0342e42&#39; and t1.idtype1 = &#39;id_mid_13&#39;\rand t3.id2 = &#39;5c557df3-df47-4603-64bc-5a9a63f22245&#39; and t3.idtype2 = &#39;id_mid_4&#39;) // depth = 3?\n A side-by-side comparison of a SQL query to a Gremlin query. The SQL query weighs in at 629 characters, whereas the Gremlin query is only 229 characters. The SQL query would be significantly longer if more levels of query depth were required.\n Zeotap then began a proof of concept (POC) starting in August 2018 considering a range of open source databases on appropriate underlying AWS EC2 server clusters:\n  For the POC, all of these clusters had a replication factor of only 1. They also created a client cluster configuration on 3x c5.18xlarge instances.\n While Aerospike is not a native graph database, Zeotap was familiar with it, and included it as a \u201cPlan B\u201d option, utilizing UDFs in Aerospike.\n Their aim was to test a workload representative of three times their then-existing production workload, to be able to allow them to scale based on current expectations of growth. However, Saurabh reminded the audience again that they have since grown to over 15 billion IDs.\n Their work aligned well with the Label Property Graph (LPG) model, as opposed to the Resource Description Framework (RDF) model. (If you are not familiar with the difference, you can read more about them here.) The LPG mode met their expectations and lowered the cardinality of data.\n   Zeotap looked at the cost of the entire system. An Aerospike solution would have been more costly because of its high memory (RAM) usage. In the end, they decided upon JanusGraph backed by ScyllaDB on SSD because of its affordability.\n    \u201cA graph DB data model promises two things: one is the extreme flexibility in terms of schema evolution, and another thing is the expressiveness of your domain,\u201d Sathish interjected. Then to prove the point Saurabh shared this example of Zeotap\u2019s data model:\n  Each vertex (white box) represents a user\u2019s digital identity, stored with its properties in JanusGraph. They can include the device\u2019s operating system (android or ios), the country (in the above there are data points both in Spain and Italy), and so on.\n The edges (lines joining the boxes) represent the linkages provided by Zeotap\u2019s partners. In these you can see ids for the data partner that shared that particular linkage (dp1, dp2, etc.) at a particular time (t1, t2, etc.). They also assign a quality score.\n  The first is transitive links. Zeotap does not store pre-computed linkages. Every query is processed at the time of traversal.\n The second is to filter traversals based on metadata stored in the vertices and edges. For example, filtering based on country is vital to maintain GDPR compliance. The same could also be done based on quality score. A customer might want to get results with only high quality linkages.\n The third was extensibility of the data model. They cannot have a database that requires them to stop and restart the database depending on changes to the data model. All changes need to be able to be done on the fly. In the example above, \u201c linkSource\u201d was added to one of the edges. They could use this in case it was not a data partner, but Zeotap\u2019s own heuristic that provided the linkage.\n  In production, Zeotap runs on AWS i3.4xlarge nodes in multiple regions, with three or four nodes per region.\n Zeotap began with a batch ingestion process in their MVP, but changed to a mixed streaming and batch ingestion into JanusGraph using Apache Kafka after first passing through a de-duplicating and enriching process for their data. This removed a lot of painful failures from their original batch-only processes and cut back dramatically on the time needed to ingest hundreds of millions of new data points per day.\n  They also found splitting the vertex and edge loads into separate Kafka streams was important to achieve a higher level of queries per second (QPS), because write behavior was different. A vertex was a single write, whereas the edge was a lookup as well as a write (read-before-write).\n The Zeotap engineers also began to measure not just per-node performance, but drilled down to see CPU utilization. They observed 5k transactions per second (TPS) per server core.\n For traversals, Sathish warned users to be on the lookout for their \u201csupernodes,\u201d which he broke down into two classes. The first case is a node that is connected to many other nodes. A second is one where its depth keeps increasing.\n Another piece of advice Sathish offered was to play with your compaction strategies. With LevelTiered, Zeotap was able to obtain 2.5x more queries per second, and concurrent clients were better handled.\n He also showed how filtering data on the server side may be causing latencies. A query filtering for certain conditions could take 2.3 seconds, whereas just fetching all of the data unfiltered might take only 1 second. So for them filtering based on attributes (properties and depths) is instead done at the application layer.\n Saurabh then spoke about the quality scoring that Zeotap developed. It is based on what they call \u201cAD scoring,\u201d which is a ratio of edge agreement (A) divided by edge disagreement (D). They also score based on recency, which is then modified by an event rarity adjustment to derive the final quality score.\n    Zeotap also has across-graph traversals. This is where, beyond their own data, they may also search through third party partner data stored in separate graph databases. Zeotap is able to save this 3rd party data as separate keyspaces in Scylla. Queries against these are chained together not in the database, but instead on the application layer.\n Lastly, Zeotap runs ID graph quality analytics, the results of which are fed back into their OLTP and OLAP systems to consistently ensure the highest quality data.\n   You can find out more details, as well as learn Zeotap\u2019s key takeaways, by watching the video in full below or checking out their slides on our  Tech Talks page. If you have more questions about how JanusGraph on Scylla may work in your own environment, we encourage you to  contact us, or to  join our Slack to ask your peers in our online community.", "posttime": "2020-05-16 02:15:44", "source_domain": "news.ycombinator.com", "source_name": "Hacker News", "tags": "database,\u6570\u636e\u5e93,janusgraph,graph,\u6570\u636e", "title": "\u57fa\u4e8eScylla\u548cJanusGraph\u7684\u53ef\u4f38\u7f29\u56fe\u5f62\u6570\u636e\u5e93", "title_en": "Scalable graph database with Scylla and JanusGraph", "transed": 1, "url": "https://www.scylladb.com/2020/05/14/zeotap-a-graph-of-twenty-billion-ids-built-on-scylla-and-janusgraph/", "via": "", "real_tags": ["database", "\u6570\u636e\u5e93", "graph", "\u6570\u636e"]}, {"category": "", "categoryclass": "", "imagename": "15db168c857f62def9909034bfe26c41.jpg", "infoid": 1002273, "ip": "", "isanchordig": 1, "ischecked": 1, "isdelete": 0, "isneo": 1, "mark": "", "name": "", "note": "\u5f53\u51b0\u5c9b\u57282\u670828\u65e5\u611f\u67d3\u9996\u4f8b\u51a0\u72b6\u75c5\u6bd2\u65f6\uff0c\u6574\u4e2a\u8bbe\u5907\u7acb\u5373\u5f00\u59cb\u884c\u52a8\u3002\n\u591a\u4e8f\u4e86\u5f53\u5730\u4e00\u5bb6\u751f\u7269\u6280\u672f\u516c\u53f8decode genology\uff0c\u8be5\u56fd\u5df2\u7ecf\u5bf9\u4e00\u4e9b\u611f\u67d3\u75c5\u6bd2\u7684\u9ad8\u98ce\u9669\u4eba\u7fa4\u8fdb\u884c\u4e86\u6d4b\u8bd5\u3002\u4e00\u65e6\u75be\u75c5\u7684\u5230\u6765\u5f97\u5230\u786e\u8ba4\uff0c\u5b83\u5c31\u5f00\u59cb\u5728\u66f4\u5927\u8303\u56f4\u5185\u8fc5\u901f\u5f00\u5c55\u516c\u5f00\u6d4b\u8bd5\u3002\u4e0e\u6b64\u540c\u65f6\uff0c\u653f\u5e9c\u8fc5\u901f\u5efa\u7acb\u4e86\u4e00\u652f\u63a5\u89e6\u8ffd\u8e2a\u5668\u56e2\u961f\uff0c\u91c7\u8bbf\u90a3\u4e9b\u8bca\u65ad\u4e3a\u9633\u6027\u7684\u4eba\uff0c\u5e76\u8ffd\u8e2a\u4ed6\u4eec\u66fe\u63a5\u89e6\u8fc7\u7684\u4eba\u3002\n\u5728\u51e0\u5468\u5185\uff0c\u51b0\u5c9b\u4eba\u4e5f\u6709\u4e86\u53e6\u4e00\u79cd\u9ad8\u79d1\u6280\u5de5\u5177\u53ef\u4f9b\u4ed6\u4eec\u4f7f\u7528\uff1a\u4e00\u6b3e\u653f\u5e9c\u652f\u6301\u7684\u81ea\u52a8\u8ddf\u8e2a\u5e94\u7528\u7a0b\u5e8f\u3002\n4\u6708\u521d\u53d1\u5c04\u7684Rakning C-19\u5f53\u65f6\u88ab\u8a89\u4e3a\u201c\u66f4\u5bb9\u6613\u8ffd\u8e2a\u4f20\u8f93\u201d\u7684\u4e00\u79cd\u65b9\u5f0f\u3002\u5b83\u8ddf\u8e2a\u7528\u6237\u7684GPS\u6570\u636e\uff0c\u4ee5\u6c47\u7f16\u4ed6\u4eec\u53bb\u8fc7\u54ea\u91cc\u7684\u8bb0\u5f55\uff0c\u5141\u8bb8\u8c03\u67e5\u4eba\u5458-\u5728\u5f97\u5230\u8bb8\u53ef\u7684\u60c5\u51b5\u4e0b-\u67e5\u770b\u90a3\u4e9b\u8bca\u65ad\u4e3a\u9633\u6027\u7684\u4eba\u662f\u5426\u6709\u53ef\u80fd\u4f20\u64ad\u75be\u75c5\u3002\n\u5b83\u5f88\u5feb\u5c31\u83b7\u5f97\u4e86\u5438\u5f15\u529b\uff1a\u6839\u636e\u201c\u9ebb\u7701\u7406\u5de5\u5b66\u9662\u6280\u672f\u8bc4\u8bba\u201d\u7684Covid Tracking Tracker\uff0c\u5b83\u662f\u4e16\u754c\u4e0a\u6240\u6709\u63a5\u89e6\u5f0f\u8ddf\u8e2a\u5668\u4e2d\u6e17\u900f\u7387\u6700\u9ad8\u7684\uff0c\u51b0\u5c9b36.4\u4e07\u4eba\u53e3\u4e2d\u670938%\u7684\u4eba\u4e0b\u8f7d\u4e86\u5b83\u3002\n\u4f46\u662f\uff0c\u5c3d\u7ba1\u8fd9\u79cd\u65e9\u671f\u90e8\u7f72\u548c\u5e7f\u6cdb\u4f7f\u7528\uff0c\u8be5\u56fd\u51a0\u72b6\u75c5\u6bd2\u5e94\u5bf9\u90e8\u95e8\u7684\u4e00\u540d\u9ad8\u7ea7\u4eba\u7269\u8868\u793a\uff0c\u4e0e\u7535\u8bdd\u7b49\u4eba\u5de5\u8ffd\u8e2a\u6280\u672f\u76f8\u6bd4\uff0cRakning C-19\u7684\u5b9e\u9645\u5f71\u54cd\u5f88\u5c0f\u3002\n\u201c\u8fd9\u9879\u6280\u672f\u6216\u591a\u6216\u5c11\u662f\u2026\u7684\u3002\u6211\u4e0d\u4f1a\u8bf4\u65e0\u7528\uff0c\u201c\u6b63\u5728\u76d1\u7763\u63a5\u89e6\u8005\u8ffd\u8e2a\u5de5\u4f5c\u7684\u51b0\u5c9b\u8b66\u5bdf\u5c40\u4fa6\u63a2\u76d6\u65af\u56fe\u5c14\u00b7\u5e15\u5c14\u6885\u68ee(Gestur P\u00e1lmason)\u8bf4\u3002\u201c\u4f46\u8fd9\u4e24\u8005\u7684\u7ed3\u5408\u624d\u80fd\u7ed9\u4f60\u5e26\u6765\u6210\u679c\u3002\u6211\u60f3\u8bf4\uff0c(\u62c9\u514b\u5b81)\u5728\u5c11\u6570\u60c5\u51b5\u4e0b\u88ab\u8bc1\u660e\u662f\u6709\u7528\u7684\uff0c\u4f46\u5b83\u5e76\u6ca1\u6709\u6539\u53d8\u6211\u4eec\u7684\u6e38\u620f\u89c4\u5219\u3002\u201c\u3002\n\u5e15\u5c14\u6885\u68ee\u5728\u7b2c\u4e00\u8d77\u767b\u8bb0\u7684\u4e8b\u4ef6\u53d1\u751f10\u5929\u540e\u52a0\u5165\u4e86Covid\u8ffd\u67e5\u5c0f\u7ec4\uff0c\u5f53\u65f6\u8be5\u56fd\u7684\u75c5\u4f8b\u6570\u91cf\u572860\u591a\u4f8b\u3002\u4ed6\u8bf4\uff0c\u6709\u4e00\u4e9b\u5b9e\u4f8b\u8868\u660e\u8fd9\u4e9b\u6570\u636e\u662f\u6709\u7528\u7684\uff0c\u4f46\u4eba\u4eec\u6025\u4e8e\u627e\u5230\u5e94\u5bf9\u5927\u6d41\u884c\u7684\u6280\u672f\u89e3\u51b3\u65b9\u6848\uff0c\u5938\u5927\u4e86\u81ea\u52a8\u8ffd\u8e2a\u7684\u5f71\u54cd\u3002\n\u201c\u8fd9\u662f\u53ef\u4ee5\u7406\u89e3\u7684\uff0c\u56e0\u4e3a\u5e94\u7528\u7a0b\u5e8f\u662f\u4f60\u53ef\u4ee5\u4e70\u5230\u7684\u4e1c\u897f\uff0c\u201d\u4ed6\u8bf4\u3002\u201c\u4f46\u6211\u975e\u5e38\u6e05\u695a\u5730\u544a\u8bc9\u5927\u5bb6\uff0c\u4eba\u5de5\u8ffd\u8e2a\u7684\u91cd\u8981\u6027\u4e1d\u6beb\u4e0d\u4e9a\u4e8e\u6b64\u3002\u201d\n\u8fd9\u4e00\u89c2\u70b9\u5e94\u8be5\u5bf9\u76ee\u524d\u6b63\u5728\u4ece\u4e8b\u81ea\u5df1\u7684\u81ea\u52a8\u63a5\u89e6\u8005\u8ffd\u8e2a\u670d\u52a1\u7684\u5176\u4ed6\u56fd\u5bb6\u8d77\u5230\u8b66\u793a\u4f5c\u7528\u3002\u8bb8\u591a\u5176\u4ed6\u56fd\u5bb6\u7684\u653f\u5e9c\u4ecd\u5904\u4e8e\u63a8\u51fa\u81ea\u5df1\u7684\u72ec\u7acb\u5e94\u7528\u7a0b\u5e8f\u7684\u65e9\u671f\u9636\u6bb5\uff0c\u6216\u8005\u6b63\u5728\u57fa\u4e8e\u82f9\u679c\u548c\u8c37\u6b4c\u6b63\u5728\u5f00\u53d1\u7684\u5c1a\u672a\u53d1\u5e03\u7684\u6280\u672f\u6784\u5efa\u670d\u52a1\u3002\n\u8bb8\u591a\u4eba\u5e0c\u671b\uff0c\u8fd9\u4e9b\u7845\u8c37\u5de8\u5934\u7684\u5de8\u5927\u5f71\u54cd\u529b\u5c06\u514b\u670d\u8ffd\u8e2a\u5e94\u7528\u7a0b\u5e8f\u9762\u4e34\u7684\u4e00\u4e9b\u793e\u4f1a\u548c\u6280\u672f\u969c\u788d\u3002\u4f46\u662f\uff0c\u5982\u679c\u50cf\u51b0\u5c9b\u8fd9\u6837\u4e00\u4e2a\u793e\u4f1a\u51dd\u805a\u529b\u5f3a\u3001\u5730\u7406\u4e0a\u4e0e\u4e16\u9694\u7edd\u7684\u5c0f\u56fd\u53ea\u80fd\u5b9e\u73b038%\u7684\u666e\u53ca\u7387\uff0c\u8fd9\u53ef\u80fd\u8868\u660e\u5176\u4ed6\u56fd\u5bb6\u7684\u52aa\u529b\u5c06\u96be\u4ee5\u8fbe\u5230\u6240\u9700\u7684\u91c7\u7528\u6c34\u5e73\u3002\n\u5c3d\u7ba1\u5982\u6b64\uff0c\u51b0\u5c9b\u8fd8\u662f\u8bbe\u6cd5\u5e73\u5766\u4e86\u51a0\u72b6\u75c5\u6bd2\u66f2\u7ebf\uff0c\u5e76\u5728\u5f88\u5927\u7a0b\u5ea6\u4e0a\u63a7\u5236\u4e86\u75ab\u60c5\u3002\u4eca\u5929\uff0c\u5b83\u5df2\u7ecf\u67091800\u591a\u4f8b\u786e\u8bca\u75c5\u4f8b\u548c10\u4f8b\u6b7b\u4ea1\u3002\u75c5\u4f8b\u6570\u91cf\u51e0\u5468\u6765\u57fa\u672c\u4fdd\u6301\u4e0d\u53d8\uff0c\u6700\u540e\u4e00\u6b21\u786e\u8ba4\u7684\u51a0\u72b6\u75c5\u6bd2\u6b7b\u4ea1\u662f\u57284\u670819\u65e5\u3002\n\u8fd9\u4e00\u5207\u90fd\u662f\u5c3d\u7ba1\u8be5\u56fd\u6ca1\u6709\u9881\u5e03\u8bb8\u591a\u5728\u5176\u4ed6\u5730\u65b9\u770b\u5230\u7684\u66f4\u6fc0\u8fdb\u7684\u793e\u4f1a\u653f\u7b56-\u8fd9\u79cd\u505a\u6cd5\u62db\u81f4\u4e86\u4e00\u4e9b\u6279\u8bc4\u3002\u867d\u7136\u6d3b\u52a8\u51cf\u5c11\u4e86\uff0c\u96c6\u4f1a\u7684\u89c4\u6a21\u4e5f\u53d7\u5230\u4e86\u9650\u5236\uff0c\u4f46\u5c0f\u5b66\u751a\u81f3\u4e00\u4e9b\u9910\u9986\u4ecd\u7136\u5f00\u653e\uff0c\u4f7f\u7528\u7684\u662f\u793e\u4ea4\u8ddd\u79bb\u548c\u201c\u6ce1\u6cab\u201d\u7b56\u7565\uff0c\u5373\u5c06\u73ed\u7ea7\u548c\u5de5\u4f5c\u573a\u6240\u5206\u5272\u6210\u76f8\u4e92\u4e0d\u4e92\u52a8\u7684\u72ec\u7acb\u5355\u5143\u3002\n\u5e15\u5c14\u6885\u68ee\u8ba4\u4e3a\uff0c\u5f00\u59cb\u68c0\u6d4b\u3001\u8ffd\u8e2a\u548c\u9694\u79bb\u7684\u65e9\u671f\u548c\u79ef\u6781\u7684\u884c\u52a8\u5df2\u7ecf\u5f97\u5230\u4e86\u56de\u62a5\u3002\n\u201c\u6211\u4eec\u4e00\u76f4\u5728\u4e0e\u5e02\u6c11\u5408\u4f5c\uff0c\u201d\u4ed6\u8bf4\u3002\u201c\u6cd5\u5f8b\u662f\u6709\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u7f5a\u6b3e\uff0c\u4f46\u6211\u4eec\u57fa\u672c\u4e0a\u4ec0\u4e48\u90fd\u6ca1\u505a\uff1a\u6211\u4eec\u76f8\u4fe1\u516c\u6c11\u4f1a\u9075\u5b88\u89c4\u5b9a\u7684\u6307\u5bfc\u65b9\u9488--\u5728\u6211\u770b\u6765\uff0c\u8fd9\u79cd\u6a21\u5f0f\u975e\u5e38\u7ba1\u7528\u3002\u201d", "note_en": "When Iceland got its first case of covid-19 on February 28, an entire apparatus sprang into action.\n  The country had already been testing some people at high risk of catching the virus, thanks to DeCode genetics, a local biotech company. Once the arrival of the disease was confirmed, it began rapidly rolling out public testing on a much wider scale. The government, meanwhile, quickly built a team of contact tracers to interview those with a positive diagnosis and track down people they\u2019d been in contact with.\n  Within a few weeks, Icelanders had another high-tech tool at their disposal, too: a government-backed automated tracing app.\n  Rakning C-19, which launched in early April, was  hailed as a way to \u201cmake the tracing of transmissions easier\u201d at the time. It tracks users\u2019 GPS data to compile a record of where they have been, allowing investigators\u2014with permission\u2014to look at whether those with a positive diagnosis are potentially spreading the disease.\n  And it gained traction quickly:  according to MIT Technology Review\u2019s Covid Tracing Tracker, it has the largest penetration rate of all contact trackers in the world, having been downloaded by 38% of Iceland\u2019s population of 364,000.\n  But despite this early deployment and widespread use, one senior figure in the country\u2019s covid-19 response says the real impact of Rakning C-19 has been small, compared with manual tracing techniques like phone calls.\n  \u201cThe technology is more or less \u2026 I wouldn\u2019t say useless,\u201d says Gestur P\u00e1lmason, a detective inspector with the Icelandic Police Service who is overseeing contact tracing efforts. \u201cBut it\u2019s the integration of the two that gives you results. I would say it [Rakning] has proven useful in a few cases, but it wasn\u2019t a game changer for us.\u201d\n    P\u00e1lmason joined the covid tracing team 10 days after the first registered incident, when the country\u2019s case numbers were in the 60s. He says there have been instances where the data was useful, but that the impact of automated tracing has been exaggerated by people eager to find technological solutions to the pandemic.\n  \u201cIt&#39;s understandable, because an app is stuff that you can buy,\u201d he says. \u201cBut I make it super clear to everyone that manual tracing is no less important.\u201d\n  That perspective should be cautionary for other countries currently working on their own automated contact tracing services. Many other governments are still in the  early stages with their own standalone apps, or are building services based on the  as-yet-unreleased technology being developed by Apple and Google.\n  Many are hopeful that the vast reach of these Silicon Valley giants will overcome some of the social and  technical hurdles faced by tracing apps. But if a small, socially- cohesive, and geographically isolated nation like Iceland can only achieve 38% penetration, that could suggest that efforts in other countries will struggle to get the level of adoption required.\n    Still, Iceland has managed to flatten its coronavirus curve and keep its outbreaks largely under control. Today it has had just over 1,800 confirmed cases and 10 deaths. Case numbers have remained more or less static for several weeks, and the last confirmed covid-19 death was on April 19.\n  This is all despite the fact that the country has not enacted many of the more drastic social policies seen elsewhere\u2014 an approach that has lead to some criticism. While movement has been curtailed and there have been restrictions on the size of gatherings, primary schools and even some restaurants have remained open, using a mixture of social distancing and a  \u201cbubble\u201d strategy where classes and workplaces are divided into discrete units that do not interact with each other.\n    P\u00e1lmason suggests that the early and aggressive action to begin testing, tracing, and isolating has paid off.\n  \u201cWe\u2019ve been working in a collaborative model with the citizens,\u201d he says. \u201cThere is law, and we can do fines, but we basically haven\u2019t done any: we put our trust on the citizens that they follow the guidelines that are set out\u2014and that model has worked fantastically, in my view.\u201d", "posttime": "2020-05-16 02:13:58", "source_domain": "news.ycombinator.com", "source_name": "Hacker News", "tags": "\u7a0b\u5e8f,app,\u5e94\u7528\u7a0b\u5e8f,covid,\u8ffd\u8e2a", "title": "\u8fd140%\u7684\u51b0\u5c9b\u4eba\u6b63\u5728\u4f7f\u7528Covid\u5e94\u7528\u7a0b\u5e8f-\u4f46\u5b83\u6ca1\u6709\u592a\u5927\u5e2e\u52a9", "title_en": "Nearly 40% of Icelanders are using a Covid app\u2013and it hasn\u2019t helped much", "transed": 1, "url": "https://www.technologyreview.com/2020/05/11/1001541/iceland-rakning-c19-covid-contact-tracing/", "via": "", "real_tags": ["\u7a0b\u5e8f", "app", "\u5e94\u7528\u7a0b\u5e8f", "covid", "\u8ffd\u8e2a"]}, {"category": "", "categoryclass": "", "imagename": "", "infoid": 1002272, "ip": "", "isanchordig": 1, "ischecked": 1, "isdelete": 0, "isneo": 1, "mark": "", "name": "", "note": "\u8bb8\u591a\u56e2\u961f\u4ee5\u6bcf\u65e5\u5355\u53e3\u76f8\u58f0\u4e2d\u81ed\u540d\u662d\u8457\u7684\u4e09\u4e2a\u95ee\u9898\u5f00\u59cb\u4ed6\u4eec\u7684\u4e00\u5929\uff1a\u4f60\u6628\u5929\u505a\u4e86\u4ec0\u4e48\uff1f\u4f60\u4eca\u5929\u8981\u505a\u4ec0\u4e48\uff1f\u548c\u4f60\u88ab\u4ec0\u4e48\u963b\u6321\u4e86\uff1f\n\u6bcf\u592915\u5206\u949f\u7684\u5faa\u73af\u7ad9\u7acb\u8868\u6f14\u662fScrum\u7684\u57fa\u77f3\u4e4b\u4e00\uff0cScrum\u662f\u4e00\u79cd\u6d41\u884c\u7684\u4ea7\u54c1\u5f00\u53d1\u56e2\u961f\u7ba1\u7406\u65b9\u5f0f\u3002\u4e0d\u5e78\u7684\u662f\uff0cScrum-\u4ee5\u53ca\u65e5\u5e38\u5355\u53e3\u76f8\u58f0-\u521b\u5efa\u4e8e20\u4e16\u7eaa90\u5e74\u4ee3\uff0c\u5f53\u65f6\u4e0a\u73ed\u65cf\u5728\u5c0f\u9694\u95f4\u91cc\u8f9b\u52e4\u5de5\u4f5c\uff0c\u5171\u4eab\u5171\u540c\u7684\u7269\u7406\u7a7a\u95f4\u548c\u5de5\u4f5c\u65e5\u3002\u4eca\u5929\uff0c\u6211\u4eec\u7684\u5de5\u4f5c\u573a\u6240\u770b\u8d77\u6765\u975e\u5e38\u4e0d\u540c\uff0c\u529e\u516c\u5ba4\u548c\u56e2\u961f\u6210\u5458\u904d\u5e03\u4e16\u754c\u5404\u5730\u3002\u8fd9\u4e00\u70b9\u73b0\u5728\u5c24\u5176\u91cd\u8981\uff0c\u56e0\u4e3a\u516c\u53f8\u5728\u9002\u5e94\u51a0\u72b6\u75c5\u6bd2\u5371\u673a\u7684\u8fc7\u7a0b\u4e2d\u88ab\u8feb\u63a5\u53d7\u8fdc\u7a0b\u5de5\u4f5c\u3002\n\u867d\u7136\u6bcf\u5929\u7684\u5355\u53e3\u76f8\u58f0\u662f\u51fa\u4e8e\u597d\u610f\u521b\u5efa\u7684\uff0c\u4f46\u5f02\u6b65\u5b8c\u6210\u65f6\uff0c\u5b83\u4eec\u7684\u751f\u4ea7\u529b\u66f4\u9ad8\uff0c\u5bf9\u56e2\u961f\u4e5f\u66f4\u597d\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u539f\u56e0\uff1a\n\u4f20\u7edf\u7684\u4e0a\u73ed\u65cf\u5f80\u5f80\u4f1a\u843d\u5165\u5c06\u5b58\u5728\u7b49\u540c\u4e8e\u751f\u4ea7\u529b\u7684\u9677\u9631\u3002\u7ad9\u7acb\u4f5c\u4e3a\u4f20\u7edf\u529e\u516c\u5ba4\u548c\u5171\u7528\u56e2\u961f\u7684\u652f\u67f1\uff0c\u88ab\u7528\u4f5c\u7ecf\u7406\u4ece\u5458\u5de5\u90a3\u91cc\u6536\u96c6\u6700\u65b0\u4fe1\u606f\u7684\u62d0\u6756\uff0c\u8feb\u4f7f\u4ed6\u4eec\u7b28\u62d9\u5730\u62a5\u544a\u81ea\u5df1\u7684\u8fdb\u5c55\uff0c\u8fd9\u6837\u4ed6\u4eec\u5c31\u53ef\u4ee5\u653e\u5fc3\uff0c\u6bcf\u4e2a\u4eba\u90fd\u5728\u5b9e\u9645\u5de5\u4f5c\u3002\n\u8fdc\u7a0b\u5de5\u4f5c\u9700\u8981\u65b0\u7684\u8d23\u4efb\u548c\u4fe1\u4efb\u6982\u5ff5\u3002\u6211\u4eec\u5c06\u5728\u672a\u6765\u7684\u5e16\u5b50\u4e2d\u4ecb\u7ecd\u6211\u4eec\u7684\u610f\u601d\u4ee5\u53ca\u5982\u4f55\u5728\u6ca1\u6709\u5b9e\u65f6\u6bcf\u65e5\u72b6\u6001\u4f1a\u8bae\u7684\u60c5\u51b5\u4e0b\u6784\u5efa\u6b64\u529f\u80fd\u3002\ud83d\ude09\u3002\n\u60a8\u7684\u8fdc\u7a0b\u56e2\u961f\u90fd\u9a7b\u7559\u5728\u540c\u4e00\u4f4d\u7f6e\u7684\u53ef\u80fd\u6027\u5f88\u5c0f\u3002\u76f8\u53cd\uff0c\u4f60\u7684\u56e2\u961f\u53ef\u80fd\u5206\u5e03\u5728\u7f8e\u56fd\u7684\u4e0d\u540c\u65f6\u533a\uff0c\u751a\u81f3\u4e16\u754c\u5404\u5730\u2026\u2026\u3002\n\u4e0d\u540c\u7684\u65f6\u533a\u610f\u5473\u7740\u6bcf\u4e2a\u4eba\u90fd\u6309\u7167\u4e0d\u540c\u7684\u65f6\u95f4\u8868\u8fd0\u884c\u3002\u5f53\u4e00\u4e2a\u4eba\u653e\u677e\u4e00\u5929\u7684\u65f6\u5019\uff0c\u53e6\u4e00\u4e2a\u4eba\u53ef\u80fd\u624d\u521a\u521a\u5f00\u59cb\u3002\u5b9a\u671f\u5b89\u6392\u7684\u540c\u6b65\u4f1a\u8bae\u5177\u6709\u4ee4\u4eba\u96be\u4ee5\u7f6e\u4fe1\u7684\u7834\u574f\u6027\uff0c\u56e0\u4e3a\u5b83\u53ef\u80fd\u4f1a\u5728\u4e0d\u65b9\u4fbf\u7684\u65f6\u5019\u5c06\u4eba\u4eec\u4ece\u4ed6\u4eec\u7684\u6d41\u7545\u72b6\u6001\u548c\u65e5\u7a0b\u5b89\u6392\u4e2d\u62c9\u51fa\u6765\u3002\n\u5728\u7406\u60f3\u7684\u60c5\u51b5\u4e0b\uff0c\u6bcf\u5929\u7684\u5355\u53e3\u76f8\u58f0\u90fd\u662f\u4e3a\u4e86\u89e3\u51b3\u95ee\u9898\uff0c\u5e2e\u52a9\u56e2\u961f\u66f4\u5feb\u5730\u53d1\u8d27\u3002\u5728\u73b0\u5b9e\u4e2d\uff0c\u7ad9\u7acb\u8868\u6f14\u5b9e\u9645\u4e0a\u6ca1\u6709\u66f4\u6df1\u5165\u63a2\u8ba8\u5b9e\u9645\u95ee\u9898\u7684\u7a7a\u95f4\u3002\u4e00\u65e6\u4f60\u8fd9\u6837\u505a\u4e86\uff0c\u5176\u4ed6\u4eba\u5c31\u4f1a\u65e0\u89c6\u4f60\uff0c\u4f60\u7684\u8131\u53e3\u79c0\u62d6\u5f97\u6bd4\u9700\u8981\u7684\u65f6\u95f4\u8981\u957f\u5f97\u591a\uff0c\u800c\u4e14\u4f60\u7684\u7ecf\u7406\u4f1a\u8981\u6c42\u4f60\u8ba9\u5b83\u79bb\u7ebf\u3002\n\u4e8b\u5b9e\u4e0a\uff0c\u6700\u597d\u7684\u7403\u961f\u5728\u95ee\u9898\u51fa\u73b0\u65f6\u5b9e\u9645\u4e0a\u5c31\u4f1a\u89e3\u9501\uff0c\u800c\u4e0d\u662f\u7b49\u5f85\u5b9a\u671f\u5b89\u6392\u7684\u5355\u53e3\u76f8\u58f0\u6765\u62a5\u544a\u62e6\u7f51\u95ee\u9898\u3002\u5171\u5904\u4e00\u5730\u7684\u56e2\u961f\u7684\u4e00\u4e2a\u5e38\u89c1\u9677\u9631\u662f\uff0c\u4ed6\u4eec\u503e\u5411\u4e8e\u5c06\u4e3b\u9898\u4fdd\u5b58\u5230\u4f1a\u8bae\u4e0a\uff0c\u7136\u540e\u7b49\u5230\u90a3\u65f6\u518d\u63d0\u51fa\u3002\n\u867d\u7136\u6211\u4eec\u663e\u7136\u575a\u4fe1\u4f60\u7684\u65e5\u5e38\u5355\u53e3\u76f8\u58f0\u5e94\u8be5\u662f\u5f02\u6b65\u7684\uff0c\u4f46\u6211\u4eec\u66f4\u652f\u6301\u4f60\u5e94\u8be5\u505a\u5bf9\u4f60\u7684\u56e2\u961f\u6709\u6548\u7684\u4e8b\u60c5\u3002\u81f3\u5c11\uff0c\u6211\u5e0c\u671b\u8fd9\u7bc7\u6587\u7ae0\u80fd\u8ba9\u4f60\u5bf9\u65e5\u5e38\u5355\u53e3\u76f8\u58f0\u7684\u5e38\u89c1\u9677\u9631\u6709\u4e00\u4e2a\u65b0\u7684\u7406\u89e3\u3002\n\u5728\u672a\u6765\u7684\u5e16\u5b50\u4e2d\uff0c\u6211\u5c06\u8ba8\u8bba\u53ef\u4ee5\u7528\u6765\u5c06\u60a8\u7684\u65e5\u5e38\u5355\u53e3\u76f8\u58f0\u8f6c\u6362\u4e3a\u5f02\u6b65\u683c\u5f0f\u7684\u7b56\u7565\u3002\u5728\u6b64\u4e4b\u524d\uff0c\u6211\u8ba4\u4e3a\u6700\u597d\u662f\u5f15\u7528\u4e00\u7bc7\u7279\u522b\u8d34\u5207\u7684\u5173\u4e8e\u6bcf\u65e5\u5355\u53e3\u76f8\u58f0\u7684\u535a\u5ba2\u6587\u7ae0\u6765\u7ed3\u675f\uff1a\n\u5f88\u660e\u663e\uff0c\u5c3d\u7ba1\u6240\u6709\u7684\u516c\u53f8\u90fd\u8bf4\u4ed6\u4eec\u201c\u505a\u654f\u6377\u201d\uff0c\u4f46\u5b9e\u9645\u4e0a\u5927\u591a\u6570\u516c\u53f8\u90fd\u6ca1\u6709\u8fd9\u6837\u505a\uff1b\u4ed6\u4eec\u53ea\u662f\u7ad9\u7740\u968f\u610f\u5f00\u4f1a\uff0c\u8fd9\u4ea7\u751f\u4e86\u7cdf\u7cd5\u7684\u7ed3\u679c\uff0c\u6211\u8ba4\u4e3a\u8fd9\u662f\u5bf9\u5f00\u53d1\u4eba\u5458\u7684\u76f4\u63a5\u5192\u72af\u3002", "note_en": "Many teams start their day with the infamous three questions of the daily stand-up: &#34;what did you do yesterday?&#34;, &#34;what are you going to do today?&#34;, and &#34;what are you blocked by?&#34;.\n  The 15-minute round-robin daily stand-up is one of the cornerstones of  Scrum, a popular way to manage product development teams. Unfortunately, Scrum \u2014 and the daily stand-up \u2014 was created back in the 1990s, when office workers labored away in cubicles and shared a common physical space and work day. Today, our workplaces look very different and have offices and teammates spread across the world. This is especially relevant now as companies are forced to embrace remote work as they adapt to the COVID-19 crisis.\n  While the daily stand-up was created with good intentions, they&#39;re more productive and better for the team when done asynchronously. Here are some reasons why:\n    Traditional office workers tend to fall in the trap of equating presence with productivity. Standups, as mainstays of traditional offices and co-located teams, are used as crutches for managers to collect updates from employees and force them to awkwardly report on their progress so they can reassure themselves that everyone is actually working.\n  Remote work calls for new notions of accountability and trust. We&#39;ll cover what we mean and how to build this without real-time daily status meetings in a future post. \ud83d\ude09\n    It&#39;s highly unlikely that your remote team all resides in the same location. Instead, your team is likely spread across different timezones in the US, or even across the world...\n  Different timezones means that everyone is operating on different schedules. When one person is winding down for the day, another may just have started. Having a regularly scheduled, synchronous meeting is incredibly disruptive, as it pulls people out of their flow states and schedules, likely at inconvenient times.\n    In an ideal world, daily stand-ups are meant to unblock problems and help teams ship product faster. In reality, there&#39;s actually no space in the standup to dive deeper into actual issues. The second you do, everyone else tunes you out, your standup drags on much longer than it needs to, and you&#39;re asked by your manager to &#34;take it offline&#34;.\n  In fact,  the best teams actually unblock problems as they come up, instead of waiting for a regularly scheduled standup to report on a blocker. A common pitfall of co-located teams is that they tend to save topics for the meeting and wait until then to bring it up.\n    While we&#39;re clearly of the strong belief that your daily standups should be asynchronous, we&#39;re even bigger proponents that you should do what works for your team. At the very least, I hope this post gave you a new understanding of the common pitfalls of daily standups.\n  In a future post, I&#39;ll talk about strategies you can use to move your daily standups to an asynchronous format. Until then, I thought it&#39;d be best to close off with a quote from a particularly apt  blog post on daily standups:\n  \u201cIt\u2019s clear how even though all companies say they \u201cdo agile\u201d, in fact most don\u2019t; they just do random meetings while standing up, which produces bad results that I consider right-out offensive towards developers.&#34;", "posttime": "2020-05-16 01:45:45", "source_domain": "news.ycombinator.com", "source_name": "Hacker News", "tags": "\u7ad9\u7acb,standups,\u56e2\u961f", "title": "\u6bcf\u65e5\u7ad9\u7acb\u5e94\u4e3a\u5f02\u6b65", "title_en": "Daily standups should be async", "transed": 1, "url": "https://www.cadencework.com/blog/async-standups.html", "via": "", "real_tags": ["\u7ad9\u7acb", "standups", "\u56e2\u961f"]}, {"category": "", "categoryclass": "", "imagename": "", "infoid": 1002271, "ip": "", "isanchordig": 1, "ischecked": 1, "isdelete": 0, "isneo": 1, "mark": "", "name": "", "note": "DoorDash&amp\uff1bGrubHub\u5411\u9910\u5385\u6536\u53d6\u5e7f\u544a\u8d39\uff0c\u7136\u540e\u7528\u8fd9\u7b14\u94b1\u5411\u8c37\u6b4c\u652f\u4ed8\u5e7f\u544a\uff0c\u8fd9\u4e9b\u5e7f\u544a\u4f7f\u7528\u6211\u4eec\u9910\u5385\u7684\u54c1\u724c\u540d\u79f0\uff0c\u5c06\u987e\u5ba2\u4ece\u6211\u4eec\u7684\u7f51\u7ad9\u8f6c\u79fb\u5230\u6211\u4eec\u5e73\u53f0\u4e0a\u7684\u7ade\u4e89\u5bf9\u624b\u90a3\u91cc\u3002\n\u6211\u53eb\u7279\u62c9\u7ef4\u65af\u00b7\u65af\u6258\u91cc\u514b\uff0c\u662f\u5bc6\u6b47\u6839\u5dde\u5170\u8f9b\u5e02\u7684\u4e00\u5bb6\u5c0f\u9910\u9986\u8001\u677f\u3002\u5728\u4e00\u4e2a\u5c0f\u9547\u4e0a\u62e5\u6709\u4e24\u5bb6\u5c0f\u70e7\u70e4\u9910\u5385\u662f\u4e00\u4ef6\u4ee4\u4eba\u96be\u4ee5\u7f6e\u4fe1\u7684\u56f0\u96be\u7684\u751f\u610f\u3002\u5927\u5bb6\u90fd\u77e5\u9053\uff0c\u4e00\u822c\u6765\u8bf4\uff0c\u62e5\u6709\u4e00\u5bb6\u9910\u5385\u662f\u5f88\u96be\u7684\u3002\u4f46\u5f53\u4e16\u754c\u4e0a\u6700\u5927\u7684\u4e24\u5bb6\u516c\u53f8\u5408\u8c0b\u53cd\u5bf9\u4f60\u62a2\u8d70\u4f60\u7684\u987e\u5ba2\u65f6\uff0c\u4e8b\u60c5\u5c31\u66f4\u96be\u4e86\u3002\u8fd9\u53ef\u80fd\u770b\u8d77\u6765\u6709\u70b9\u5938\u5f20\u3002\u4e0d\u8fc7\uff0c\u7ed9\u6211\u4e00\u70b9\u65f6\u95f4\u8ba9\u6211\u89e3\u91ca\u4e00\u4e0b\u3002\n\u5927\u591a\u6570\u6d88\u8d39\u8005\u6ca1\u6709\u610f\u8bc6\u5230\u8fd9\u4e00\u70b9\uff0c\u4f46\u5f53\u4f60\u4eceGrubHub\u6216DoorDash\u7b49\u5927\u578b\u9001\u8d27\u5408\u4f5c\u4f19\u4f34\u90a3\u91cc\u8ba2\u8d2d\u9001\u8d27\u670d\u52a1\u65f6\uff0c\u4f60\u4e0d\u4ec5\u8981\u652f\u4ed8\u9001\u8d27\u8d39\u3001\u670d\u52a1\u8d39\u548c\u4e30\u539a\u7684\u5c0f\u8d39\u7ed9\u53f8\u673a\u3002\u4f46\u6211\u4eec\u9910\u5385\u8001\u677f\u4e5f\u8981\u4ed8\u94b1\u3002\u867d\u7136\u5feb\u9012\u516c\u53f8\u4e0d\u559c\u6b22\u6211\u4eec\u8c08\u8bba\u8d39\u7528\uff0c\u4f46\u636e\u5176\u4ed6\u5730\u65b9\u7684\u62a5\u9053\uff0c\u8fd9\u4e9b\u8d39\u7528\u53ef\u80fd\u662f\u4f60\u6574\u4e2a\u8ba2\u5355\u768415%\u523035%\u3002\u5982\u679c\u4f60\u4ece\u6211\u4eec\u8fd9\u91cc\u8ba2\u8d2d10\u7f8e\u5143\u7684\u98df\u7269\uff0c\u90a3\u4e48\u5feb\u9012\u516c\u53f8\u901a\u5e38\u4f1a\u6536\u53d6\u5927\u7ea63\u7f8e\u5143\u7684\u8d39\u7528\uff0c\u53ea\u7ed9\u9910\u53857\u7f8e\u5143\u3002\u5bf9\u4e8e\u4e00\u4e2a\u5229\u6da6\u5fae\u8584\u7684\u884c\u4e1a\u6765\u8bf4\uff0c\u8fd9\u4e2a\u767e\u5206\u6bd4\u662f\u75db\u82e6\u7684\u3002\u8fd9\u4e0d\u5305\u62ec\u4f60\u53ef\u80fd\u652f\u4ed8\u7684\u6240\u6709\u9001\u8d27\u8d39\u3001\u7a0e\u8d39\u3001\u670d\u52a1\u8d39\u548c\u5c0f\u8d39\u3002/\u5bf9\u4e8e\u4e00\u4e2a\u5229\u6da6\u5fae\u8584\u7684\u884c\u4e1a\u6765\u8bf4\uff0c\u8fd9\u4e2a\u767e\u5206\u6bd4\u662f\u75db\u82e6\u7684\u3002\u8fd9\u8fd8\u4e0d\u5305\u62ec\u4f60\u53ef\u80fd\u652f\u4ed8\u7684\u6240\u6709\u9001\u8d27\u8d39\u3001\u7a0e\u8d39\u3001\u670d\u52a1\u8d39\u548c\u5c0f\u8d39\u3002\n\u5feb\u9012\u516c\u53f8\u7ed9\u9910\u5385\u7684\u7406\u7531\u662f\uff0c\u6211\u4eec\u4e3a\u4ec0\u4e48\u4f1a\u540c\u610f\u8fd9\u4e48\u75af\u72c2\u7684\u4e8b\u60c5\uff0c\u4ed6\u4eec\u79f0\u4e4b\u4e3a\u201c\u5e7f\u544a\u8d39\u201d\u3002\u4ed6\u4eec\u5982\u4f55\u8bc1\u660e\u8fd9\u7b14\u5de8\u989d\u6210\u672c\u662f\u5408\u7406\u7684\uff0c\u662f\u56e0\u4e3a\u4ed6\u4eec\u8bf4\uff0c\u4ed6\u4eec\u7684\u5e73\u53f0\u592a\u5927\u4e86\uff0c\u6709\u8fd9\u4e48\u591a\u4eba\u5728\u4ed6\u4eec\u7684\u5e73\u53f0\u4e0a\u641c\u7d22\u98df\u7269\uff0c\u6211\u4eec\u7684\u9910\u5385\u53d7\u76ca\uff0c\u56e0\u4e3a\u9001\u8d27\u5e73\u53f0\u7ed9\u6211\u4eec\u5e26\u6765\u4e86\u4ece\u672a\u542c\u8bf4\u8fc7\u6211\u4eec\u9910\u5385\u7684\u65b0\u987e\u5ba2\u3002\u5f53\u7136\uff0c\u8fd9\u4e5f\u662f\u6211\u4eec\u9910\u5385\u8001\u677f\u4e00\u76f4\u5728\u5bfb\u627e\u7684--\u65b0\u987e\u5ba2\u3002\n\u5982\u679c\u662f\u8fd9\u6837\u7684\u8bdd\uff0c\u8fd9\u4e00\u5207\u542c\u8d77\u6765\u90fd\u5f88\u597d\uff0c\u4f46\u4e0d\u5e78\u7684\u662f\uff0c\u60c5\u51b5\u5b8c\u5168\u4e0d\u662f\u8fd9\u6837\u3002DoorDash&amp\uff1bGrubHub\u4e0e\u8c37\u6b4c\u7684\u5173\u7cfb\u5c31\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u4f8b\u5b50\u3002\n\u6211\u4eec\u7684\u5c0f\u70e7\u70e4\u9910\u5385(Saddleback BBQ)\u4f4d\u4e8e\u5bc6\u6b47\u6839\u5dde\u7684\u5c0f\u9547\u5170\u8f9b\u3002\u5982\u679c\u5170\u8f9b\u7684\u4e00\u4e2a\u4eba\u5728\u8c37\u6b4c\u641c\u7d22\u4e0a\u67e5\u627e\u6211\u4eec\u6240\u5728\u4f4d\u7f6e\u7684\u65b9\u5411\uff0c\u5e76\u5728\u8c37\u6b4c\u641c\u7d22\u680f(\u6216\u4ed6\u4eec\u7684\u6d4f\u89c8\u5668)\u4e2d\u952e\u5165\u2018Saddleback BBQ Lansing\u2019\u3002\u8c37\u6b4c\u5408\u8c0b\u5c06\u8be5\u987e\u5ba2\u5e26\u5230DoorDash\uff0c\u5e76\u5c06\u4ed6\u4eec\u5f15\u5bfc\u5230DoorDash\u3002\u4f60\u4f1a\u6ce8\u610f\u5230\u6709\u5173\u8fd9\u4e00\u70b9\u7684\u4e00\u4e9b\u4e8b\u60c5\u3002\n\u201c\u5e7f\u544a\u201d\u6bd4\u6211\u4eec\u81ea\u5df1\u7684\u201c\u8ba2\u8d2d\u201d\u6309\u94ae\u5927\u5f97\u591a\uff0c\u4eba\u4eec\u53ef\u4ee5\u76f4\u63a5\u4ece\u6211\u4eec\u7684\u7f51\u7ad9\u8ba2\u8d2d\u6216\u83b7\u5f97\u6211\u4eec\u6240\u5728\u4f4d\u7f6e\u7684\u65b9\u5411\u3002\n\u53ef\u80fd\u6700\u8ba9\u4eba\u6293\u72c2\u7684\u662f\uff0c\u5982\u679c\u987e\u5ba2\u70b9\u51fb\u94fe\u63a5\uff0c\u5c31\u4e0d\u4f1a\u628a\u4ed6\u4eec\u5e26\u5230\u4e00\u4e2a\u7f51\u9875\u4e0a\u4eceSaddleback BBQ\u8ba2\u8d2d\uff0c\u5b83\u4f1a\u628a\u7528\u6237\u5e26\u5230\u4e00\u4e2a\u901a\u7528\u9875\u9762\uff0c\u5411\u4efb\u4f55\u63d0\u4f9bBBQ\u670d\u52a1\u7684\u4eba\u8ba2\u8d2d\u70e7\u70e4\u5417\uff1f\u6392\u5728\u699c\u9996\u7684\u662f\u8c01\uff1f\u82f9\u679c\u8702\u3002\n\u603b\u800c\u8a00\u4e4b\uff0cDoorDash\u5411Google\u652f\u4ed8\u5e7f\u544a\u8d39\uff0c\u4ee5\u7a83\u53d6\u641c\u7d22\u6211\u4eec\u9910\u5385\u540d\u79f0\u201cSaddleback BBBQ\u201d\u7684\u5ba2\u6237\uff0c\u4ed6\u4eec\u4f1a\u5c06\u4ed6\u4eec\u91cd\u5b9a\u5411\u5230\u81ea\u5df1\u7684\u9875\u9762\u3002\u4ece\u90a3\u91cc\uff0c\u5ba2\u6237\u53ef\u4ee5\u4ece\u5170\u8f9b\u7684\u4efb\u4f55\u4e00\u5bb6\u70e7\u70e4\u9910\u5385\u8d2d\u4e70\u5546\u54c1\uff0c\u5982\u679c\u5ba2\u6237\u9009\u62e9\u5411\u6211\u4eec\u8ba2\u8d2d\uff0c\u6211\u4eec\u5fc5\u987b\u652f\u4ed8DoorDash\u4e3a\u6211\u4eec\u5e26\u6765\u8be5\u5ba2\u6237\u7684\u8d39\u7528\u3002\nDoorDash\u548c\u8c37\u6b4c\u6b63\u5728\u79ef\u6781\u5408\u8c0b\u4ece\u5f53\u5730\u5c0f\u4f01\u4e1a\u7684\u9910\u9986\u4e2d\u62a2\u8d70\u987e\u5ba2\u3002\u867d\u7136\u4ed6\u4eec\u4e0d\u662f\u901a\u8fc7\u5411\u641c\u7d22\u201c\u5170\u8f9bBBQ\u201d\u7b49\u4e00\u822c\u8bcd\u6761\u7684\u4eba\u505a\u5e7f\u544a\uff0c\u800c\u662f\u901a\u8fc7\u7a83\u53d6\u4e13\u95e8\u641c\u7d22\u6211\u4eec\u7684\u5546\u4e1a\u540d\u79f0\u201cSaddleback BBBQ\u201d\u7684\u4eba\u6765\u505a\u5230\u8fd9\u4e00\u70b9\u3002\u4f46\u4ed6\u4eec\u90fd\u662f\u5728\u8d5a\u94b1\u3002\n\u8fd9\u4e0d\u4ec5\u4ec5\u5c40\u9650\u4e8eDoorDash\uff0cGrubHub\u4e5f\u505a\u540c\u6837\u7684\u4e8b\u60c5\u3002\u5982\u679c\u4f60\u5728Lansing\u641c\u7d22\u201cSaddleback BBQ Hours\u201d\uff0c\u4f60\u4f1a\u5f97\u5230\u6765\u81eaGrubHub\u7684\u5e7f\u544a\u3002\u201c\u5982\u679c\u4f60\u641c\u7d22\u201dSaddleback BBQ Online Order\u201c\uff0c\u540c\u6837\u4f1a\u5f97\u5230\u6765\u81eaGrubHub\u7684\u5e7f\u544a\u3002\n\u5f53\u7136\uff0c\u73b0\u5728\u6211\u4eec\u90fd\u662f\u79c1\u8425\u4f01\u4e1a\uff0c\u8fd9\u4e3b\u8981\u662f\u4e00\u4e2a\u5408\u540c\u95ee\u9898\u3002\u6211\u4eec\u540c\u610f\u4e3a\u5728\u4ed6\u4eec\u7684\u5e73\u53f0\u4e0a\u4e0b\u7684\u8ba2\u5355\u652f\u4ed8\u8d39\u7528\uff0c\u56e0\u4e3a\u4ed6\u4eec\u5411\u65b0\u5ba2\u6237\u201c\u5e7f\u544a\u201d\u6211\u4eec\u7684\u6240\u8c13\u4ef7\u503c\u3002\u6211\u60f3\u8bf4\u5f97\u5f88\u6e05\u695a\uff0c\u95ee\u9898\u4e0d\u662f\u6211\u4eec\u4e3a\u4ed6\u4eec\u7684\u670d\u52a1\u4ed8\u94b1\u3002\u95ee\u9898\u662f\uff0c\u4ed6\u4eec\u6b63\u5728\u79ef\u6781\u5730\u4f7f\u7528\u6211\u4eec\u7684\u54c1\u724c\u540d\u79f0\u5411\u5df2\u7ecf\u5728\u5bfb\u627e\u6211\u4eec\u7684\u5ba2\u6237\u505a\u5e7f\u544a\u3002\u4ed6\u4eec\u5c06\u8fd9\u4e9b\u5ba2\u6237\u91cd\u5b9a\u5411\u5230\u4ed6\u4eec\u7684\u5e73\u53f0\uff0c\u5728\u90a3\u91cc\u4ed6\u4eec\u53ef\u4ee5\u4ece\u7ade\u4e89\u5bf9\u624b\u90a3\u91cc\u8d2d\u4e70\uff0c\u6216\u8005\u4ed6\u4eec\u53ef\u4ee5\u5411\u6211\u4eec\u6536\u53d6\u8d39\u7528\uff0c\u5411\u540c\u4e00\u5ba2\u6237\u63d0\u4f9b\u98df\u54c1\u3002\u800c\u5ba2\u6237\u53ef\u4ee5\u53ea\u9700\u8bbf\u95ee\u6211\u4eec\u7684\u7f51\u7ad9\uff0c\u76f4\u63a5\u4ece\u6211\u4eec\u7684\u5728\u7ebf\u8ba2\u8d2d\u5546\u5e97\u8ba2\u8d2d\uff0c\u6211\u4eec\u5c31\u4e0d\u4f1a\u5411GrubHub\u6216DoorDash\u6536\u53d6\u4f63\u91d1\u3002\n\u7531\u4e8e\u6211\u4eec\u662fDoorDash\u548cGrubHub\u7684\u5408\u4f5c\u4f19\u4f34\uff0c\u6211\u4eb2\u81ea\u591a\u6b21\u8054\u7cfb\u4ed6\u4eec\uff0c\u6211\u82b1\u4e86\u51e0\u4e2a\u5c0f\u65f6\u548c\u4ed6\u4eec\u6bcf\u4e2a\u4eba\u901a\u4e86\u51e0\u4e2a\u5c0f\u65f6\u7684\u7535\u8bdd\uff0c\u8ba9\u4ed6\u4eec\u505c\u6b62\u8fd9\u79cd\u505a\u6cd5\u3002*\u4ed6\u4eec\u505c\u4e86\u4e00\u6bb5\u65f6\u95f4\uff0c\u7136\u540e\u53c8\u91cd\u65b0\u5f00\u59cb\u3002\u6700\u8fd1\u4ed6\u4eec\u90fd\u8fd9\u4e48\u505a\u4e86\u3002\u6211\u4eec\u552f\u4e00\u7684\u529e\u6cd5\u5c31\u662f\u7acb\u5373\u7ec8\u6b62\u4e0eGrubHub\u548cDoorDash\u7684\u5408\u540c\uff0c\u6211\u4eec\u6b63\u5728\u8003\u8651\u8fd9\u6837\u505a\u3002\n\u95ee\u9898\u662f\uff0c\u5982\u679c\u6211\u4eec\u53d6\u6d88\uff0c\u8fd9\u662f\u5426\u610f\u5473\u7740\u4ed6\u4eec\u5b9e\u9645\u4e0a\u5c06\u505c\u6b62\u7a83\u53d6\u5bfb\u627e\u6211\u4eec\u9910\u5385\u7684\u987e\u5ba2\uff0c\u5e76\u5c06\u4ed6\u4eec\u5f15\u5bfc\u5230\u6211\u4eec\u7684\u7ade\u4e89\u5bf9\u624b\u90a3\u91cc\uff1f\u6211\u4eec\u4e0d\u77e5\u9053\u3002\u6211\u5bf9\u6b64\u8868\u793a\u6000\u7591\uff0c\u4f46\u6211\u4eec\u4f1a\u627e\u51fa\u7b54\u6848\u7684\u3002", "note_en": "DoorDash &amp; GrubHub charge restaurants an advertising fee and then use that money to pay Google to run advertisements that use our restaurant\u2019s brand name to divert customers away from our website to our competitors on their platform.\n My name is Travis Stoliker and I\u2019m a small restaurant owner in Lansing Michigan. Owning two small BBQ restaurants in a small town is an incredibly difficult business. Everyone knows that owning a restaurant, in general, is tough.\u00a0 But it gets even harder when two of the largest companies in the world conspire against you to steal your customers.\u00a0 This might seem like hyperbole. But give me a moment to let me explain.\n Most consumers don\u2019t realize this, but when you order delivery from one of the large delivery partners like GrubHub or DoorDash - not only do you pay a delivery fee, service fee, and a generous tip to the driver. But we restaurant owners also pay.\u00a0 The delivery companies don\u2019t like us to talk about the fee\u2019s but it has been well reported elsewhere that these fees can range from 15% to 35% of your entire order.\u00a0 So if you order $10 of food from us.\u00a0 The delivery company usually takes about $3 of it and only gives the restaurant $7.\u00a0 For an industry with notoriously slim profit margins, that percentage is painful.\u00a0 That does _not_ include all of the delivery fees, taxes, service fees, and tips that you might pay on top of that.\n The justification that the delivery companies give to the restaurant for why we would agree to something this crazy is that they call it an \u201cadvertising fee\u201d.\u00a0 How they justify this huge cost is by saying that their platforms are so large and there are so many people searching for food on their platforms, that our restaurants benefit because the delivery platforms are bringing us new customers that have never heard of our restaurants. And of course, that\u2019s what us Restaurant owners are always looking for -          New Customers         .\n That all sounds good if it were the case, but unfortunately, it is not the case at all.          \u00a0DoorDash &amp; GrubHub\u2019s relationship with Google is a perfect example.\n Our small BBQ Restaurants (Saddleback BBQ) are located in the small town of Lansing Michigan.\u00a0 If a person in Lansing goes onto Google search to look for directions to our location and types into the Google search bar (or their browser) \u2018Saddleback BBQ Lansing\u2019.\u00a0 DoorDash &amp; Google conspire to take that customer and direct them to DoorDash.\u00a0 You\u2019ll notice a few things about this.\n The \u201cAdvertisement\u201d is much larger than our own \u201corder\u201d button where someone can order directly from our website or get directions to our location.\n    Possibly the most maddening thing is that if a customer clicks on the link, it does NOT take them to a webpage to order from Saddleback BBQ.\u00a0 It takes the user to a general page to order BBQ from anyone that serves BBQ.\u00a0 At the top of the list? Applebees.\n   So to summarize, DoorDash pays Google an advertising fee to steal customers that are searching for our restaurant name \u201cSaddleback BBQ\u201d and they are redirecting them to their own page. From there a customer can purchase from any BBQ restaurant in Lansing or if the customer chooses to order from us we must pay DoorDash a fee for bringing us that customer.\n DoorDash and Google are actively conspiring to steal customers from local small businesses that are restaurants.\u00a0 They are not doing this by advertising to people that search for general terms like \u201cBBQ in Lansing\u201d - They are doing this by stealing people that are searching specifically for our business name: \u201cSaddleback BBQ\u201d.\u00a0 They are all getting paid.\n  This isn\u2019t just limited to DoorDash.\u00a0 GrubHub does the same thing.\u00a0 If you search for \u201cSaddleback BBQ Hours\u201d in Lansing you will get an advertisement from GrubHub.\u00a0 If you search for \u201cSaddleback BBQ Online Ordering\u201d, once again, you will get an advertisement from GrubHub.\n  Now, of course, we are all private businesses and this is primarily an issue of contracts.\u00a0 We agreed to pay them a fee for orders placed on their platform because of the supposed value that they are \u201cadvertising\u201d us to new-customers. I want to be very clear, the problem is NOT that we are paying them for their services. The problem is that they are actively using our brand name to advertise to customers that are already looking for us. They are redirecting those customers to their platform where they can purchase from a competitor or they can charge us a fee to provide food to that same customer.\u00a0 Whereas the customer could have just gone to our website and ordered directly from our online ordering store and we would not be charged a commission to GrubHub or DoorDash.\n Being that we are partners of DoorDash and GrubHub, I have personally reached out to them multiple times.\u00a0 I\u2019ve spent hours on the phone with each of them to get them to stop this practice.\u00a0 For a while, they stop, but then, they start up again.\u00a0 Which they both just did recently.\u00a0 Our only recourse is to immediately terminate our contract with GrubHub and DoorDash, which we are considering doing.\n The problem is that if we cancel, does that mean they will actually stop stealing customers that are looking for our restaurant and directing them to our competitors? We don\u2019t know.\u00a0 I doubt it, but we will find out.", "posttime": "2020-05-16 01:45:13", "source_domain": "news.ycombinator.com", "source_name": "Hacker News", "tags": "\u8c37\u6b4c,google,doordash,\u9910\u5385", "title": "\u8c37\u6b4c\u3001DoorDash\u548cGrubHub\u5982\u4f55\u5408\u8c0b\u641e\u57ae\u5f53\u5730\u9910\u5385", "title_en": "How Google, DoorDash, & GrubHub Conspire to Screw Local Restaurants", "transed": 1, "url": "https://www.saddlebackbbq.com/how-google-doordash-grubhub-conspire-screw-local-restaurants", "via": "", "real_tags": ["\u8c37\u6b4c", "google", "doordash", "\u9910\u5385"]}, {"category": "", "categoryclass": "", "imagename": "878842da179f9da189876adc3724adab.jpg", "infoid": 1002270, "ip": "", "isanchordig": 1, "ischecked": 1, "isdelete": 0, "isneo": 1, "mark": "", "name": "", "note": "\u8463\u4e8b\u4f1a\u5728\u63d0\u4ea4\u7684\u6587\u4ef6\u4e2d\u8fa9\u79f0\uff0c\u5956\u91d1\u5bf9\u4e8e\u7559\u4f4f\u7ba1\u7406\u56e2\u961f\u5e76\u4fdd\u6301\u4ed6\u4eec\u7684\u52a8\u529b\u662f\u5fc5\u8981\u7684\uff0c\u56e0\u4e3a\u4ed6\u4eec\u76ee\u524d\u201c\u5728\u5f71\u54cd\u96f6\u552e\u4e1a\u7684\u52a8\u8361\u548c\u4e0d\u786e\u5b9a\u7684\u73af\u5883\u4e2d\u201d\uff0c\u800c\u4e14\u5956\u91d1\u662f\u6709\u9644\u52a0\u6761\u4ef6\u7684\u3002\u6839\u636e\u534f\u8bae\uff0c\u5982\u679c\u8fd9\u56db\u540d\u9ad8\u7ba1\u57282021\u5e741\u670831\u65e5\u4e4b\u524d\u88ab\u201c\u56e0\u6545\u89e3\u96c7\u201d\u6216\u8f9e\u804c\uff0c\u4ed6\u4eec\u5c06\u5fc5\u987b\u507f\u8fd880%\u7684\u5956\u91d1\u3002\u9664\u975e\u8fbe\u5230\u7279\u5b9a\u7684\u4e1a\u7ee9\u76ee\u6807\uff0c\u5426\u5219\u4ed6\u4eec\u8fd8\u5fc5\u987b\u507f\u8fd8\u53e6\u591620%\u3002\n\u6b64\u5916\uff0c\u8fd9\u4e9b\u9ad8\u7ba1\u88ab\u8981\u6c42\u653e\u5f03\u672c\u8d22\u5e74\u6240\u6709\u5e74\u5ea6\u5956\u91d1\u8ba1\u5212\u548c\u957f\u671f\u6fc0\u52b1\u5956\u52b1\u7684\u6743\u5229\uff0c\u4ee5\u53ca\u8fc7\u53bb\u5956\u52b1\u8ba1\u5212\u4e2d\u7684\u672a\u507f\u8fd8\u80a1\u672c\u6216\u671f\u6743\u3002\u4f46\u662f\uff0c\u6b63\u5982CNN Business\u6307\u51fa\u7684\u90a3\u6837\uff0c\u201c\u8003\u8651\u5230\u516c\u53f8\u7684\u8d22\u52a1\u95ee\u9898\uff0c\u8fd9\u4e9b\u5e74\u5ea6\u5956\u91d1\u53ef\u80fd\u4f1a\u5728\u4eca\u5e74\u5185\u6d88\u5931\uff0c\u4efb\u4f55JCPenney\u80a1\u6743\u7684\u6301\u6709\u8005\u90fd\u53ef\u80fd\u5728\u7834\u4ea7\u7533\u8bf7\u4e2d\u88ab\u62b9\u53bb\u3002\u201d\nJCPenney\u57284\u6708\u521d\u89e3\u96c7\u4e86\u5927\u90e8\u5206\u95e8\u5e97\u5458\u5de5\u548c\u4e00\u4e9b\u516c\u53f8\u5458\u5de5\uff0c\u56e0\u4e3a\u95e8\u5e97\u5728\u5927\u6d41\u884c\u671f\u95f4\u6682\u65f6\u5173\u95ed\u3002\u9996\u5e2d\u6267\u884c\u5b98\u7d22\u5c14\u9676\u5728\u4e00\u4efd\u65e5\u671f\u4e3a3\u670831\u65e5\u7684\u516c\u544a\u4e2d\u8868\u793a\uff1a\u201c\u6211\u4eec\u6b63\u5728\u505a\u51fa\u8270\u96be\u3001\u8c28\u614e\u7684\u51b3\u5b9a\uff0c\u4ee5\u4fdd\u62a4\u6211\u4eec\u540c\u4e8b\u7684\u5b89\u5168\u548c\u6211\u4eec\u516c\u53f8\u7684\u672a\u6765\u3002\u201d\n\u5f53\u6839\u636e\u7834\u4ea7\u6cd5\u7b2c11\u7ae0\u8fdb\u884c\u91cd\u7ec4\u65f6\uff0cJCPenney\u53ef\u80fd\u4f1a\u524a\u51cf\u66f4\u591a\u7684\u5de5\u4f5c\u5c97\u4f4d\u3002\u5982\u679c\u662f\u8fd9\u6837\u7684\u8bdd\uff0c\u65b0\u4e0b\u5c97\u7684\u5458\u5de5\u53ef\u80fd\u4f1a\u5f97\u5230\u8f83\u5c11\u7684\u9063\u6563\u8d39(\u6216\u8005\u6839\u672c\u6ca1\u6709)\uff0c\u56e0\u4e3a\u7834\u4ea7\u6cd5\u8981\u6c42\u516c\u53f8\u5728\u652f\u4ed8\u5458\u5de5\u4e4b\u524d\u652f\u4ed8\u503a\u6743\u4eba\u3002", "note_en": "The board argued in the filing that the bonuses were necessary to retain the management team and keep them motivated \u201cthrough the volatile and uncertain environment affecting the retail industry\u201d right now and that they\u00a0came with strings attached. Under the agreement, the four executives will have to repay 80 percent of the bonuses if they are \u201cfired for cause\u201d or resign before January 31, 2021. They will also have to repay the other 20 percent unless meeting specific performance goals.\n In addition, the executives were required to forfeit the right to all annual bonus plans and long-term incentive awards for the current fiscal year, as well as outstanding equity or options from past award plans. But, as  CNN Business noted, those annual bonuses are likely gone for the year anyway \u201cconsidering the company\u2019s financial problems, and any holders of JCPenney equity are likely to be wiped out in a bankruptcy filing.\u201d\n  JCPenney furloughed the majority of its store workers and some corporate employees in early April as stores temporarily shuttered amid the pandemic. \u201cWe are making tough, prudent decisions to protect both the safety of our associates and the future of our company,\u201d CEO Soltau said  in an announcement dated March 31.\n More jobs are likely to get slashed at JCPenney when Chapter 11 restructuring comes in. If that\u2019s the case, newly laid-off employees may receive smaller severance packages (or none at all) since bankruptcy laws require companies to pay creditors before employees.", "posttime": "2020-05-16 01:44:44", "source_domain": "news.ycombinator.com", "source_name": "Hacker News", "tags": "\u89e3\u96c7,paid", "title": "JCPenney\u5728\u89e3\u96c7\u5de5\u4eba\u4e4b\u524d\u5411\u9ad8\u7ba1\u652f\u4ed8\u4e86\u5de8\u989d\u5956\u91d1", "title_en": "JCPenney Paid Top Execs Huge Bonuses Before Firing Workers", "transed": 1, "url": "https://observer.com/2020/05/jcpenney-pay-exec-bonus-amid-filing-bankruptcy-coronavirus-layoff/", "via": "", "real_tags": ["\u89e3\u96c7", "paid"]}, {"category": "", "categoryclass": "", "imagename": "63800fed327b13517b4aa92582805e07.jpg", "infoid": 1002269, "ip": "", "isanchordig": 1, "ischecked": 1, "isdelete": 0, "isneo": 1, "mark": "", "name": "", "note": "Zoom\u51e0\u4e4e\u5728\u4e00\u591c\u4e4b\u95f4\u4ece2000\u4e07\u7528\u6237\u6269\u5c55\u52303\u4ebf\u7528\u6237\u3002\u4ee4\u4eba\u96be\u4ee5\u7f6e\u4fe1\u7684\u662f\uff0c\u4ece\u5916\u8868\u4e0a\u770b\uff0c\u4ed6\u4eec\u51e0\u4e4e\u6ca1\u6709\u8868\u73b0\u51fa\u660e\u663e\u7684\u6210\u957f\u70e6\u607c\uff0c\u5c3d\u7ba1\u5728\u5185\u90e8\uff0c\u4ed6\u4eec\u5f88\u53ef\u80fd\u4f1a\u6709\u5f88\u591a\u75af\u72c2\u7684\u4e8b\u60c5\u6b63\u5728\u53d1\u751f\u3002\n\u8bda\u7136\uff0cZoom\u505a\u51fa\u4e86\u4e00\u4e9b\u8bbe\u8ba1\u51b3\u5b9a\uff0c\u4f5c\u4e3a\u4e00\u5bb6\u5145\u6ee1\u6d3b\u529b\u7684\u5c0f\u578b\u521d\u521b\u516c\u53f8\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u4e8b\u5b9e\u4e0a\u7684\u6807\u51c6\u5e76\u6ca1\u6709\u592a\u5927\u7684\u610f\u4e49\uff0c\u4f46\u8fd9\u662f\u610f\u6599\u4e4b\u4e2d\u7684\u3002\u8fd9\u5e76\u4e0d\u50cf\u8bb8\u591a\u4eba\u6240\u8bf4\u7684\u90a3\u6837\u662f\u7cdf\u7cd5\u7684\u5efa\u7b51\u7684\u6807\u5fd7\u3002\u5b83\u53ea\u662f\u73b0\u5b9e\u7684\u4ea7\u54c1\u662f\u5982\u4f55\u53d1\u5c55\u7684\uff0c\u7279\u522b\u662f\u5f53\u5b83\u4eec\u5fc5\u987b\u5728\u51e0\u5468\u3001\u51e0\u5929\u751a\u81f3\u51e0\u4e2a\u5c0f\u65f6\u5185\u5347\u7ea7\u7684\u65f6\u5019\u3002\n\u7a81\u5982\u5176\u6765\u7684\u6210\u529f\u4f1a\u62db\u81f4\u4ed4\u7ec6\u7684\u5ba1\u67e5\uff0c\u6240\u4ee5\u6bcf\u4e2a\u4eba\u90fd\u60f3\u77e5\u9053Zoom\u662f\u5982\u4f55\u5de5\u4f5c\u7684\u3002\u95ee\u9898\u662f\u6211\u4eec\u77e5\u9053\u7684\u4e0d\u591a\uff0c\u4f46\u6211\u4eec\u786e\u5b9e\u6709\u4e00\u4e9b\u4fe1\u606f\u6765\u6e90\uff1a\n\u5173\u4e8eZoom\u6570\u636e\u4e2d\u5fc3\u7684\u4f7f\u7528\u5f15\u8d77\u4e86\u76f8\u5f53\u5927\u7684\u6df7\u4e71\u3002\u7ed3\u679c\u662f\uff0c\u4ed6\u4eec\u4ece\u81ea\u5df1\u7684co-lo\u7a7a\u95f4\u5f00\u59cb\uff0c\u7136\u540e\u968f\u7740\u589e\u957f\u7684\u6fc0\u589e\u6269\u5c55\u5230\u4f7f\u7528\u591a\u4e2a\u4e91\u3002\u5982\u4f55\u5904\u7406\u7a81\u7136\u7684\u589e\u957f\u51e0\u4e4e\u662f\u6559\u79d1\u4e66\u822c\u7684\u6267\u884c\u3002\n\u5927\u90e8\u5206Zoom\u5728AWS\u4e0a\u8fd0\u884c\uff0c\u800c\u4e0d\u662f\u5728\u7532\u9aa8\u6587\u4e0a\u8fd0\u884c-AWS\u8868\u793a\uff1a\u81ea\u4ece\u5927\u6d41\u884c\u7206\u53d1\u4ee5\u6765\uff0c\u8be5\u670d\u52a1\u5df2\u5c06\u5927\u91cf\u5b9e\u65f6\u89c6\u9891\u4f1a\u8bae\u6d41\u91cf\u8f6c\u79fb\u5230AWS\uff0c\u5e76\u5728\u7532\u9aa8\u6587\u4e91\u4e0a\u653e\u7f6e\u4e86\u8f83\u5c11\u7684\u5bb9\u91cf.\u9996\u5e2d\u6267\u884c\u5b98\u57c3\u91cc\u514b\u00b7\u8881\u8fdb\u4e00\u6b65\u6f84\u6e05\u4e86\u8fd9\u4e00\u70b9\uff0c\u89e3\u91ca\u8bf4Zoom\u5386\u53f2\u4e0a\u4e00\u76f4\u5728\u5176\u81ea\u5df1\u7684\u6570\u636e\u4e2d\u5fc3\u5904\u7406\u5b9e\u65f6\u89c6\u9891\u4f1a\u8bae\u6d41\u91cf.\u6211\u4eec\u7684\u5b9e\u65f6\u6d41\u91cf\u59cb\u7ec8\u505c\u7559\u5728\u6211\u4eec\u81ea\u5df1\u7684\u6570\u636e\u4e2d\u5fc3\u5185\u4f9b\u4ed8\u8d39\u5ba2\u6237\u4f7f\u7528.\u5728\u8fd9\u573a\u5927\u6d41\u884c\u5371\u673a\u671f\u95f4\uff0c\u6bcf\u5929\u90fd\u662f\u3002\u6211\u4eec\u81ea\u5df1\u7684\u73b0\u6709\u6570\u636e\u4e2d\u5fc3\u786e\u5b9e\u65e0\u6cd5\u5904\u7406\u8fd9\u79cd\u6d41\u91cf\u2026\u2026\u8fd9\u610f\u5473\u7740AWS\u6bcf\u5929\u90fd\u4f1a\u4e3aZoom\u5f00\u53d1\u6570\u5343\u53f0\u65b0\u670d\u52a1\u5668\u2026\u2026\u56e0\u6b64\uff0c\u6700\u7ec8\uff0c\u6211\u4eec\u81ea\u5df1\u7684\u6570\u636e\u4e2d\u5fc3(\u4e3b\u8981\u662fAmazon\uff0c\u8fd8\u6709Oracle\u4e91)\u548c\u8fd9\u4e09\u5bb6\u516c\u53f8\u4e00\u8d77\u4e3a\u6240\u6709\u524d\u6240\u672a\u6709\u7684\u6d41\u91cf\u63d0\u4f9b\u670d\u52a1\u3002\n\u6211\u4eec\u5bf9Zoom\u7684\u67b6\u6784\u4e86\u89e3\u4e0d\u591a\uff0c\u4f46\u8fd9\u6bb5\u8425\u9500\u89c6\u9891\u8be6\u7ec6\u4ecb\u7ecd\u4e86\uff1a\u201cZoom\u72ec\u7279\u7684\u67b6\u6784\u5982\u4f55\u652f\u6301\u60a8\u7684\u89c6\u9891\u4f18\u5148UC\u672a\u6765\u201d\u3002\nZoom\u5c06\u4ed6\u4eec\u7684\u67b6\u6784\u89c6\u4e3a\u7ade\u4e89\u4f18\u52bf\u3002\u201c\u6bcf\u4e2a\u4eba\u90fd\u5c06\u4f7f\u7528\u89c6\u9891\uff0c\u90a3\u4e48\u6211\u4eec\u5982\u4f55\u5c06\u89c4\u6a21\u6269\u5c55\u5230\u6bcf\u4e2a\u4eba\u5462\uff1f\u201d\u56e0\u6b64\uff0cZoom\u4ece\u89c6\u9891\u65e0\u5904\u4e0d\u5728\u7684\u76ee\u6807\u5f00\u59cb\uff0c\u8ba9\u8fd9\u4e2a\u76ee\u6807\u5851\u9020\u4ed6\u4eec\u7684\u67b6\u6784\u3002\n\u7ade\u4e89\u5bf9\u624b\u901a\u8fc7\u6570\u636e\u4e2d\u5fc3\u7684\u957f\u53f7\u6d41\u91cf\uff0c\u5c06\u5176\u4ee3\u7801\u8f6c\u6362\u4e3a\u5176\u4ed6\u6240\u6709\u4eba\u7684\u6b63\u5e38\u89c6\u56fe\uff0c\u7136\u540e\u5c06\u6df7\u5408\u89c6\u9891\u53d1\u9001\u7ed9\u6bcf\u4e2a\u53c2\u4e0e\u8005\u3002\u8fd9\u4f1a\u5f15\u5165\u5ef6\u8fdf\uff0c\u5360\u7528\u5927\u91cfCPU\u8d44\u6e90\uff0c\u800c\u4e14\u5f88\u96be\u6269\u5c55\u548c\u90e8\u7f72\u65b0\u7684\u6570\u636e\u4e2d\u5fc3\u6765\u6ee1\u8db3\u4e0d\u65ad\u589e\u52a0\u7684\u8d1f\u8f7d\u3002\n\u7f29\u653e\u9009\u62e9\u4e86SVC(\u53ef\u4f38\u7f29\u89c6\u9891\u7f16\u89e3\u7801\u5668)\u7f16\u89e3\u7801\u5668\uff0c\u800c\u4e0d\u662fAVC\u3002AVC\u662f\u4e00\u79cd\u534f\u8bae\uff0c\u5728\u8be5\u534f\u8bae\u4e2d\uff0c\u60a8\u53d1\u9001\u5355\u4e2a\u6d41\uff0c\u5e76\u4e14\u8be5\u5355\u4e2a\u6d41\u5177\u6709\u6bd4\u7279\u7387\u3002\u5982\u679c\u4f60\u60f3\u53d1\u9001\u591a\u4e2a\u6bd4\u7279\u7387\uff0c\u4f60\u5fc5\u987b\u53d1\u9001\u591a\u4e2a\u6d41\u3002\u5982\u679c\u60a8\u60f3\u8981\u53d1\u9001\u591a\u4e2a\u6bd4\u7279\u7387\uff0c\u8fd9\u4f1a\u589e\u52a0\u5e26\u5bbd\u5229\u7528\u7387\u3002\nSVC\u662f\u5177\u6709\u591a\u5c42\u7684\u5355\u6d41\u3002\u8fd9\u5141\u8bb8\u53d1\u9001\u5177\u6709\u60a8\u53ef\u80fd\u9700\u8981\u7f29\u51cf\u5230\u7ed9\u5b9a\u7f51\u7edc\u6761\u4ef6\u6240\u9700\u7684\u6240\u6709\u5206\u8fa8\u7387\u548c\u6bd4\u7279\u7387\u76841.2MBS\u6d41\u3002\u5728\u8fc7\u53bb\uff0c\u60a8\u53ea\u80fd\u4f7f\u7528ASIC\u8fdb\u884cSVC\u3002\u73b0\u5728\uff0c\u591a\u4e8f\u4e86\u6469\u5c14\u5b9a\u5f8b\uff0cSVC\u53ef\u4ee5\u5728\u8f6f\u4ef6\u4e2d\u5b8c\u6210\u3002\nZOOM\u521b\u5efa\u4e86\u591a\u5a92\u4f53\u8def\u7531\uff0c\u4ee5\u89e3\u51b3\u4f20\u7edf\u4f9b\u5e94\u5546\u4f7f\u7528AVC\u65f6\u9047\u5230\u7684\u95ee\u9898\u3002\u53d6\u6d88\u8f6c\u7801\u6d88\u9664\u4e86\u5ef6\u8fdf\uff0c\u589e\u52a0\u4e86\u89c4\u6a21\u3002\n\u591a\u5a92\u4f53\u8def\u7531\u5c06\u7528\u6237\u5185\u5bb9\u5e26\u5230\u4ed6\u4eec\u7684\u4e91\u4e2d\uff0c\u5f53\u60a8\u4f5c\u4e3a\u5ba2\u6237\u7aef\u9047\u5230\u95ee\u9898\u65f6\uff0c\u4ed6\u4eec\u4f1a\u5c06\u4e0d\u540c\u7684\u89c6\u9891\u6d41\u5207\u6362\u7ed9\u60a8\u3002\u5f53\u60a8\u60f3\u8981\u4e0d\u540c\u7684\u5206\u8fa8\u7387\u65f6\uff0c\u60a8\u9700\u8981\u8ba2\u9605\u6b64\u4eba\u5206\u8fa8\u7387\u7684\u4e0d\u540c\u5c42\u3002\nZoom\u4e0d\u4f1a\u5bf9\u4efb\u4f55\u5185\u5bb9\u8fdb\u884c\u4ee3\u7801\u8f6c\u6362\u6216\u6df7\u5408\uff0c\u4e5f\u4e0d\u4f1a\u5f62\u6210\u4efb\u4f55\u89c6\u56fe\u3002\u60a8\u5b9e\u9645\u4e0a\u662f\u4ece\u96f6\u5904\u7406\u7684\u8def\u7531\u4e2d\u76f4\u63a5\u4ece\u591a\u4e2a\u4eba\u62c9\u53d6\u591a\u4e2a\u6d41\u3002\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u60a8\u4f1a\u770b\u5230\u5982\u6b64\u51fa\u8272\u7684\u7528\u6237\u5207\u6362\u548c\u8bed\u97f3\u5207\u6362\u4f53\u9a8c\u4ee5\u53ca\u4f4e\u5ef6\u8fdf\u7684\u539f\u56e0\u3002\nZoom\u5f00\u53d1\u4e86\u5728\u4e91\u548c\u5ba2\u6237\u7aef\u4e4b\u95f4\u5de5\u4f5c\u7684\u5e94\u7528\u5c42QoS(\u670d\u52a1\u8d28\u91cf)\u3002\u5b83\u7684\u5de5\u4f5c\u662f\u68c0\u6d4b\u7f51\u7edc\u72b6\u51b5\u3002\u6536\u96c6\u7684\u9065\u6d4b\u6570\u636e\u786e\u5b9a\u5c06\u54ea\u4e2a\u6d41\u5207\u6362\u5230\u5ba2\u6237\u7aef\u3002\u8be5\u7b97\u6cd5\u8003\u8651CPU\u3001\u6296\u52a8\u3001\u4e22\u5305\u7b49\u3002\n\u5ba2\u6237\u7aef\u4e0e\u4e91\u901a\u4fe1\u3002\u4e91\u77e5\u9053\u4ec0\u4e48\u65f6\u5019\u5b83\u6ca1\u6709\u6536\u5230\u67d0\u4e9b\u6570\u636e\u5305\uff0c\u6240\u4ee5\u5b83\u4f1a\u505a\u51fa\u51b3\u5b9a\uff0c\u5e76\u5c06\u4e0d\u540c\u7684\u6d41\u5207\u6362\u5230\u60a8\u90a3\u91cc\u3002\n\u5982\u679c\u7f51\u7edc\u73af\u5883\u4e0d\u597d\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u81ea\u52a8\u7f29\u5c0f\u60a8\u81ea\u5df1\u53d1\u9001\u89c6\u9891\u7684\u5927\u5c0f\uff0c\u8fd9\u6837\u60a8\u5c31\u4e0d\u4f1a\u5360\u7528\u81ea\u5df1\u7684\u4e0b\u884c\u5e26\u5bbd\u3002\n\u5ba2\u6237\u7aef\u548c\u4e91\u534f\u540c\u5de5\u4f5c\uff0c\u901a\u8fc7\u6b63\u786e\u7684\u7f51\u7edc\u63d0\u4f9b\u6b63\u786e\u7684\u97f3\u9891\u6d41\u548c\u89c6\u9891\u6d41\uff0c\u56e0\u6b64\u7528\u6237\u4f53\u9a8c\u5c3d\u5584\u5c3d\u7f8e\u3002\n\u7f51\u7edc\u611f\u77e5\u610f\u5473\u7740\u9996\u5148\u5c1d\u8bd5\u6700\u4f73\u4f53\u9a8c\uff0c\u8fd9\u5c31\u662fUDP\u3002\u5982\u679cUDP\u4e0d\u8d77\u4f5c\u7528\uff0c\u5b83\u4f1a\u5c1d\u8bd5HTTPS\u3002\u5982\u679cHTTPS\u4e0d\u8d77\u4f5c\u7528\uff0c\u5b83\u4f1a\u9000\u56de\u5230HTTP\u3002\u8fd9\u662f\u7531\u5ba2\u6237\u534f\u5546\u7684\u3002\u9065\u6d4b\u663e\u793a\u4e86\u8fde\u63a5\u4e0d\u826f\u7684\u539f\u56e0\u3002\u4f60\u80fd\u505a\u7684\u6700\u7cdf\u7cd5\u7684\u4e8b\u60c5\u5c31\u662f\u7ed9\u7528\u6237\u5e26\u6765\u4e0d\u4e00\u81f4\u7684\u4f53\u9a8c\u3002\n\u91cd\u70b9\u662f\u8ba9\u4e00\u5207\u90fd\u5c3d\u53ef\u80fd\u7b80\u5355\u76f4\u89c2\u5730\u5de5\u4f5c\u3002\u5f3a\u8c03\u5e76\u91cd\u590d\u4e86\u8fd9\u4e00\u70b9\uff0c\u8fd9\u53ef\u80fd\u89e3\u91ca\u4e86\u65e9\u671f\u7684\u4e00\u4e9b\u8bbe\u8ba1\u51b3\u7b56\u3002\nZoom\u4ee540\u5206\u949f\u7684\u89c6\u9891\u548c\u804a\u5929\u4f1a\u8bae\u98a0\u8986\u4e86\u5e02\u573a\u3002\u4ed6\u4eec\u589e\u52a0\u4e86\u514d\u8d39\u62e8\u5165\u4f1a\u8bae\u3002\u4ed6\u4eec\u63d0\u4f9b\u5e02\u573a\u4e0a\u6700\u597d\u7684VOIP\u4f53\u9a8c\u3002\u7ade\u4e89\u5bf9\u624b\u7684\u5e73\u5747VOIP\u91c7\u7528\u7387\u4e0d\u523030%\uff0cZoom\u4e3a89%\u3002\u6bcf\u5e74\u5728\u97f3\u9891\u4f1a\u8bae\u4e0a\u82b1\u8d3930\u4ebf\u7f8e\u5143\uff0cZoom\u514d\u8d39\u63d0\u4f9b\u3002\u63d0\u4f9b\u57fa\u4e8e\u8f6f\u4ef6\u7684\u89c6\u9891\u4f1a\u8bae\u5ba4\u4f53\u9a8c\u3002\u4e3a\u7ade\u4e89\u5bf9\u624b\u63d0\u4f9b\u4e00\u952e\u5f0f\u670d\u52a1\u3002\u8d60\u9001\u6570\u5b57\u6807\u724c\u548c\u623f\u95f4\u9648\u5217\u3002\nZoom\u7684\u7ade\u4e89\u5bf9\u624b\u9677\u5165\u4e86\u4ed6\u4eec\u65e0\u6cd5\u6446\u8131\u7684\u6536\u5165\u6a21\u5f0f\u3002\u4ed6\u4eec\u4e0d\u80fd\u521b\u65b0\uff0c\u56e0\u4e3a\u4ed6\u4eec\u4f1a\u98a0\u8986\u4ed6\u4eec\u81ea\u5df1\u7684\u6536\u5165\u6a21\u5f0f\u3002\nZoom\u6270\u4e71\u4e86\u4f1a\u8bae\u5e02\u573a\uff0c\u6270\u4e71\u4e86\u5168\u7403\u97f3\u9891\u5e02\u573a\uff0c\u6270\u4e71\u4e86\u4f1a\u8bae\u5ba4\u5e02\u573a\uff0c\u73b0\u5728\u4ed6\u4eec\u60f3\u8981\u98a0\u8986\u7535\u8bdd\u4e1a\u52a1\u3002\u867d\u7136\u8fd9\u662f2019\u5e74\uff0c\u4f46\u73b0\u5728\u968f\u7740\u5927\u6d41\u884c\uff0c\u8fd9\u4e00\u6218\u7565\u53ef\u80fd\u4f1a\u88ab\u91cd\u65b0\u8003\u8651\u3002\nZoom&#39\uff1b\u7684\u76ee\u6807\u662f\u521b\u5efa\u6700\u5927\u7684\u4e92\u8054\u534f\u4f5c\u7f51\u7edc\u3002\u4ed6\u4eec\u5e0c\u671b\u5151\u73b020\u5e74\u524dVOIP\u7684\u627f\u8bfa\uff0c\u62c6\u9664\u4eba\u4eec\u76f8\u4e92\u534f\u4f5c\u7684\u6bcf\u4e00\u5835\u4ed8\u8d39\u5899\uff0c\u94fa\u8bbePSTN\u8fde\u63a5\uff0c\u5728\u4efb\u4f55\u7f51\u7edc\u4e0a\u4ee5\u6700\u4f4e\u7684\u901f\u7387\u8de8IP\u901a\u8fc7\u804a\u5929\u4f1a\u8bae\u7535\u8bdd\u5c06\u6bcf\u4e2a\u4eba\u8fde\u63a5\u8d77\u6765\u3002", "note_en": "Zoom scaled from 20 million to 300 million users virtually over night. What&#39;s incredible is from the outside they&#39;ve shown little in the way of apparent growing pains, though on the inside it&#39;s a good bet a lot of craziness is going on.\n Sure, Zoom has made some design decisions that made sense as a small spunky startup that don&#39;t make a lot of sense as a defacto standard, but that&#39;s to be expected. It&#39;s not a sign of bad architecture as many have suggested. It&#39;s just realistically how products evolve, especially when they must uplift\u00a0over weeks, days, and even hours.\n Sudden success invites scrutiny, so everyone wants to know how Zoom works. The problem is we don&#39;t know much, but we do have a few information sources:\n   There was quite a kerfuffle about Zoom&#39;s datacenter usage. The upshot is they started with their own co-lo spaces and then branched out to use multiple clouds as growth spiked. Almost textbook execution of how to handle sudden growth.\n Most of Zoom runs on AWS, not Oracle - says AWS:\u00a0the service has moved a large quantity of real-time video-conferencing traffic to AWS since the pandemic struck, and has also placed a lesser amount of capacity on the Oracle Cloud...CEO Eric Yuan clarified this further, explaining that Zoom historically handled real-time video conferencing traffic in &#34;its own data centers&#34;...Our real-time traffic always stayed inside our own data center[s] for our paid customers...During this pandemic crisis, every day is a new record. Our own existing data center[s] really cannot handle this traffic...This meant that AWS spun up thousands of new servers for Zoom every day...So ultimately, our own data center[s], and primarily Amazon, and also the Oracle cloud, those three together to serve all the unprecedented traffic.\n We don&#39;t know a lot about Zoom&#39;s architecture, but this marketing video went into some detail:\u00a0 How Zoom&#39;s Unique Architecture Powers Your Video First UC Future.\n Zoom sees their architecture as a competitive advantage.\u00a0Everyone will be using video, so how do we scale to everyone? So Zoom started with the goal of video everywhere and let that goal shape their architecture.\n Competitors trombone traffic through a datacenter, transcode it into a normal view for everybody else, and then send mixed video out to every individual participant.\u00a0That introduces latency, uses a lot of CPU resources, and it&#39;s hard to scale and deploy new datacenters to meet increased load.\n Zoom chose the SVC (Scalable Video Codec) codec over AVC. AVC is a protocol where you send a single stream and the single stream has a bitrate. If you want to send multiple bitrates you have to send multiple streams. This increases bandwidth utilization if you want to send multiple bitrates.\n SVC is a single stream with multiple layers. That allows sending a 1.2 mbs stream that has every resolution and bitrate you may need to scale down to given network conditions. In the past you could only do SVC with an ASIC. Now, thanks to Moore\u2019s law, SVC can be done in software.\n Zoom created Multimedia Routing to solve the problems traditional vendors have with AVC. Cutting out transcoding got rid of latency and increased scale.\n Multimedia routing takes user content into their cloud and when you as a client run into issues they switch a different video stream to you. When you want a different resolution you subscribe to a different layer of that person\u2019s resolution.\n Zoom does not\u00a0transcode or mix anything or form any views. You are literally pulling multiple streams from multiple people directly from routing with zero processing. This is why you see such a great user switching and voice switching experience and low latency.\n Zoom developed application layer QoS (Quality of Service) that works between the cloud and the client. Its job is to detect network conditions. Gathered telemetry data determines which stream is switched to a client. The algorithm looks at CPU, jitter, packet loss, etc.\n The client talks to the cloud. The cloud knows when it doesn&#39;t get certain packets back, so it will make decisions and switch a different stream down to you.\n The client can automatically downsize your own send video if there&#39;s a bad network environment, so you&#39;re not killing your own downstream bandwidth.\n The client and the cloud work in tandem to deliver the right audio stream, the right video stream, across the right network, so the user experience is as good as it can be.\n Being network aware means trying for the best experience first, which is UDP. If UDP doesn\u2019t work it tries HTTPS. If HTTPS doesn\u2019t work it falls back to\u00a0HTTP. The client negotiates that. Telemetry shows why the connection was bad. The worst thing you can do is give the user an inconsistent experience.\n The focus is making everything just work as simply and intuitively as possible. This point was emphasized and repeated, which may explain some of earlier design decisions.\n  Zoom disrupted the market with 40 minute meetings with video and chat. They added free dial-in conferencing. They deliver the best VOIP experience in the market. Competitors average VOIP adoption is less than 30%, Zoom is 89%. $3 billion a year is spent on audio conferencing and Zoom gives it away for free. Delivered software based video conferencing room experience. Delivered one button push for competitors. Gave away digital signage and room displays.\n Zoom&#39;s competitors are sunk in revenue models they can&#39;t get out of. The can&#39;t innovate because they&#39;ll disrupt their own revenue model.\n Zoom disrupted the meetings market, disrupted the\u00a0audio market, disrupted the rooms market, and now they want to disrupt telephony. Though this was 2019, now with the pandemic that strategy may be being revisited.\n Zooms&#39; goal is to create the largest network of connected collaboration. They want to deliver on the promise of VOIP from twenty years ago, tearing down every pay wall for people to collaborate with each other, rolling out PSTN connectivity, connecting everyone through chat meeting phone all across IP at lowest rate on any network.", "posttime": "2020-05-16 01:44:10", "source_domain": "news.ycombinator.com", "source_name": "Hacker News", "tags": "zoom", "title": "\u5173\u4e8eZoom\u5de5\u4f5c\u539f\u7406\u7684\u7b80\u77ed\u4ecb\u7ecd-\u9ad8\u53ef\u4f38\u7f29\u6027", "title_en": "A Short on How Zoom Works \u2013 High Scalability", "transed": 1, "url": "http://highscalability.com/blog/2020/5/14/a-short-on-how-zoom-works.html", "via": "", "real_tags": ["zoom"]}, {"category": "", "categoryclass": "", "imagename": "", "infoid": 1002268, "ip": "", "isanchordig": 1, "ischecked": 1, "isdelete": 0, "isneo": 1, "mark": "", "name": "", "note": "MongoDB\u662f\u4e00\u4e2a\u5206\u5e03\u5f0f\u6587\u6863\u6570\u636e\u5e93\uff0c\u5b83\u58f0\u79f0\u63d0\u4f9b\u201c\u5f53\u4eca\u4efb\u4f55\u53ef\u7528\u7684\u6570\u636e\u5e93\u4e2d\u6700\u5f3a\u5927\u7684\u6570\u636e\u4e00\u81f4\u6027\u3001\u6b63\u786e\u6027\u548c\u5b89\u5168\u6027\u4fdd\u8bc1\u201d\uff0c\u5177\u6709\u201c\u5b8c\u6574\u7684ACID\u4e8b\u52a1\u201d\u3002Jepsen\u8bc4\u4f30\u4e86MongoDB\u7248\u672c4.2.6\uff0c\u53d1\u73b0\u5373\u4f7f\u5728\u8bfb\u5199\u5173\u6ce8\u5ea6\u6700\u9ad8\u7684\u60c5\u51b5\u4e0b\uff0c\u5b83\u4e5f\u65e0\u6cd5\u4fdd\u6301\u5feb\u7167\u9694\u79bb\u3002\u76f8\u53cd\uff0cJepsen\u89c2\u5bdf\u5230\u8bfb\u53d6\u504f\u5dee\u3001\u5faa\u73af\u4fe1\u606f\u6d41\u3001\u91cd\u590d\u5199\u5165\u548c\u5185\u90e8\u4e00\u81f4\u6027\u8fdd\u89c4\u3002\u5f31\u9ed8\u8ba4\u503c\u610f\u5473\u7740\u4e8b\u52a1\u53ef\u80fd\u4f1a\u4e22\u5931\u5199\u5165\u5e76\u5141\u8bb8\u810f\u8bfb\uff0c\u751a\u81f3\u4f1a\u964d\u4f4e\u6570\u636e\u5e93\u548c\u96c6\u5408\u7ea7\u522b\u4e0a\u8bf7\u6c42\u7684\u5b89\u5168\u7ea7\u522b\u3002\u6b64\u5916\uff0c\u5feb\u7167\u8bfb\u53d6\u5173\u6ce8\u70b9\u4e0d\u80fd\u4fdd\u8bc1\u5feb\u7167\uff0c\u9664\u975e\u4e0e\u5927\u591a\u6570\u5199\u5165\u5173\u6ce8\u70b9\u914d\u5bf9-\u5373\u4f7f\u5bf9\u4e8e\u53ea\u8bfb\u4e8b\u52a1\u4e5f\u662f\u5982\u6b64\u3002\u8fd9\u4e9b\u8bbe\u8ba1\u9009\u62e9\u4f7fMongoDB\u4e8b\u52a1\u7684\u5b89\u5168\u4f7f\u7528\u53d8\u5f97\u590d\u6742\u3002\u8fd9\u9879\u5de5\u4f5c\u662f\u72ec\u7acb\u8fdb\u884c\u7684\uff0c\u6ca1\u6709\u62a5\u916c\uff0c\u5e76\u6839\u636e\u6770\u666e\u68ee\u9053\u5fb7\u653f\u7b56\u8fdb\u884c\u3002\u672c\u62a5\u544a\u4e2d\u63d0\u5230\u7684MongoDB\u3001Fauna\u548cYuaByte\u4e4b\u524d\u90fd\u66fe\u8058\u8bf7Jepsen\u8fdb\u884c\u4ed8\u8d39\u5206\u6790\u3002\nMongoDB\u662f\u6d41\u884c\u7684\u5206\u5e03\u5f0f\u6587\u6863\u6570\u636e\u5e93\u3002\u5b83\u901a\u8fc7\u81ea\u4e3b\u5f00\u53d1\u7684\u5171\u8bc6\u534f\u8bae\u63d0\u4f9b\u590d\u5236\uff0c\u8be5\u534f\u8bae\u7684\u7075\u611f\u6765\u81eaRAFT\uff0c\u5e76\u4e14\u53ef\u4ee5\u901a\u8fc7mongos\u8de8\u5206\u7247\u5206\u53d1\u6570\u636e\u3002\u6211\u4eec\u4e4b\u524d\u8bc4\u4f30\u4e86MongoDB\u76842.4.3\u30012.6.7\u30013.4.0-rc3\u548c3.6.4\u7248\u672c\u3002\n\u6211\u4eec\u5173\u4e8eMongoDB 3.6.4\u7684\u6700\u65b0\u62a5\u544a\u96c6\u4e2d\u4e8e\u5206\u7247\u96c6\u5408\u4e2d\u7684\u56e0\u679c\u4e00\u81f4\u6027\u548c\u7ebf\u6027\u5316\u3002\u6211\u4eec\u53d1\u73b0\uff0c\u5206\u7247\u96c6\u7fa4\u4f3c\u4e4e\u63d0\u4f9b\u4e86\u9488\u5bf9\u5355\u4e2a\u6587\u6863\u7684\u53ef\u7ebf\u6027\u5316\u7684\u8bfb\u53d6\u3001\u5199\u5165\u548c\u6bd4\u8f83\u5e76\u8bbe\u7f6e\u64cd\u4f5c\uff0c\u53ea\u8981\u7528\u6237\u5728\u8fd0\u884c\u65f6\u4f7f\u7528\u7684\u662f\u53ef\u7ebf\u6027\u5316\u7684\u8bfb\u53d6\u5173\u6ce8\u70b9\u548c\u591a\u6570\u5199\u5165\u5173\u6ce8\u70b9\u3002\u4f46\u662f\uff0c\u4efb\u4f55\u8f83\u5f31\u7684\u5199\u5165\u5173\u6ce8\u5ea6\u90fd\u4f1a\u5bfc\u81f4\u63d0\u4ea4\u7684\u5199\u5165\u4e22\u5931\u3002MongoDB\u7684\u9ed8\u8ba4\u5199\u5173\u6ce8\u7ea7\u522b\u662f(\u5e76\u4fdd\u6301)\u7531\u5355\u4e2a\u8282\u70b9\u786e\u8ba4\uff0c\u8fd9\u610f\u5473\u7740MongoDB\u53ef\u80fd\u4f1a\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4e22\u5931\u6570\u636e\u3002\u5c3d\u7ba1\u5199\u5165\u95ee\u9898\u6587\u6863\u6ca1\u6709\u660e\u786e\u8bf4\u660e\u8fd9\u4e00\u70b9\uff0c\u4f46\u56de\u6eda\u6587\u6863\u58f0\u660e\uff1a\n\u5bf9\u4e8e\u9ed8\u8ba4\u5199\u5165\u95ee\u9898\uff0c\u5982\u679c\u4e3b\u670d\u52a1\u5668\u5728\u5199\u5165\u64cd\u4f5c\u590d\u5236\u5230\u4efb\u4f55\u8f85\u52a9\u670d\u52a1\u5668\u4e4b\u524d\u505c\u6b62\uff0c\u5219\u53ef\u80fd\u4f1a\u56de\u6eda\u6570\u636e\u3002\n\u7c7b\u4f3c\u5730\uff0cMongoDB\u7684\u9ed8\u8ba4\u8bfb\u53d6\u5173\u6ce8\u5ea6\u5141\u8bb8\u4e2d\u6b62\u8bfb\u53d6\uff1a\u8bfb\u53d6\u5668\u53ef\u4ee5\u89c2\u5bdf\u5230\u672a\u5b8c\u5168\u63d0\u4ea4\u7684\u72b6\u6001\uff0c\u5e76\u4e14\u5728\u5c06\u6765\u53ef\u80fd\u4f1a\u88ab\u4e22\u5f03\u3002\u6b63\u5982\u8bfb\u9694\u79bb\u4e00\u81f4\u6027\u6587\u6863\u6240\u6307\u51fa\u7684\uff0c\u201c\u672a\u63d0\u4ea4\u7684\u8bfb\u64cd\u4f5c\u662f\u9ed8\u8ba4\u7684\u9694\u79bb\u7ea7\u522b\u201d\u3002\n\u6211\u4eec\u53d1\u73b0\uff0c\u7531\u4e8e\u8fd9\u4e9b\u5f31\u7f3a\u7701\u503c\uff0cMongoDB\u7684\u56e0\u679c\u4f1a\u8bdd\u5728\u7f3a\u7701\u60c5\u51b5\u4e0b\u4e0d\u80fd\u4fdd\u6301\u56e0\u679c\u4e00\u81f4\u6027\uff1a\u7528\u6237\u9700\u8981\u540c\u65f6\u6307\u5b9a\u5199\u548c\u8bfb\u5173\u6ce8\u70b9\u591a\u6570(\u6216\u66f4\u9ad8)\u624d\u80fd\u5b9e\u9645\u83b7\u5f97\u56e0\u679c\u4e00\u81f4\u6027\u3002MongoDB\u89e3\u51b3\u4e86\u8fd9\u4e2a\u95ee\u9898\uff0c\u8bf4\u5b83\u6b63\u5728\u6309\u8bbe\u8ba1\u5de5\u4f5c\uff0c\u5e76\u66f4\u65b0\u4e86\u4ed6\u4eec\u7684\u9694\u79bb\u6587\u6863\uff0c\u6307\u51fa\u5373\u4f7fMongoDB\u63d0\u4f9b\u4e86\u201c\u5ba2\u6237\u7aef\u4f1a\u8bdd\u4e2d\u7684\u56e0\u679c\u4e00\u81f4\u6027\u201d\uff0c\u4f46\u9664\u975e\u7528\u6237\u5c0f\u5fc3\u5730\u540c\u65f6\u4f7f\u7528\u8bfb\u548c\u5199\u5173\u6ce8\u70b9\u591a\u6570\uff0c\u5426\u5219\u8fd9\u4e00\u4fdd\u8bc1\u662f\u7ad9\u4e0d\u4f4f\u811a\u7684\u3002\u73b0\u5728\u6709\u4e00\u4e2a\u8be6\u7ec6\u7684\u8868\u663e\u793a\u4e86\u8f83\u5f31\u7684\u8bfb\u5199\u5173\u6ce8\u70b9\u63d0\u4f9b\u7684\u5c5e\u6027\u3002\n\u5947\u602a\u7684\u662f\uff0cMongoDB\u5728\u4ed6\u4eec\u7684MongoDB\u548cJepsen\u9875\u9762\u4e0a\u6ca1\u6709\u63d0\u53ca\u8fd9\u4e9b\u53d1\u73b0\u3002\u76f8\u53cd\uff0c\u8be5\u9875\u53ea\u8ba8\u8bba\u901a\u8fc7\u7ed3\u679c\uff0c\u6ca1\u6709\u63d0\u5230\u8bfb\u53d6\u6216\u5199\u5165\u95ee\u9898\uff0c\u5c06\u5b9e\u9645\u62a5\u544a\u9690\u85cf\u5728\u811a\u6ce8\u4e2d\uff0c\u5e76\u7ee7\u7eed\u58f0\u79f0\uff1a\nMongoDB\u63d0\u4f9b\u5f53\u4eca\u4efb\u4f55\u53ef\u7528\u7684\u6570\u636e\u5e93\u4e2d\u6700\u5f3a\u7684\u6570\u636e\u4e00\u81f4\u6027\u3001\u6b63\u786e\u6027\u548c\u5b89\u5168\u6027\u4fdd\u8bc1\u3002\n\u6211\u4eec\u9f13\u52b1MongoDB\u5728\u4e0a\u4e0b\u6587\u4e2d\u62a5\u544aJepsen\u7684\u53d1\u73b0\uff1a\u867d\u7136MongoDB\u786e\u5b9e\u63d0\u4f9b\u4e86\u6bcf\u4e2a\u6587\u6863\u7684\u7ebf\u6027\u5316\u548c\u5177\u6709\u6700\u5f3a\u8bbe\u7f6e\u7684\u56e0\u679c\u4e00\u81f4\u6027\uff0c\u4f46\u5b83\u5728\u5927\u591a\u6570\u914d\u7f6e\u4e2d\u4e5f\u65e0\u6cd5\u63d0\u4f9b\u8fd9\u4e9b\u5c5e\u6027\u3002\u6211\u4eec\u8ba4\u4e3a\u7528\u6237\u53ef\u80fd\u60f3\u8981\u77e5\u9053\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4ed6\u4eec\u7684\u6570\u636e\u5e93\u53ef\u80fd\u4f1a\u4e22\u5931\u6570\u636e\uff0c\u4f46\u662fMongoDB\u5bf9\u6211\u4eec\u5de5\u4f5c\u7684\u603b\u7ed3\u7701\u7565\u4e86\u5bf9\u6b64\u884c\u4e3a\u7684\u4efb\u4f55\u63d0\u53ca\u3002\n\u90a3\u4e48\uff0cMongoDB\u662f\u5426\u63d0\u4f9b\u201c\u6700\u5f3a\u7684\u6570\u636e\u4e00\u81f4\u6027\u3001\u6b63\u786e\u6027\u548c\u5b89\u5168\u6027\u4fdd\u8bc1\u201d\u5462\uff1f\u8fc7\u53bb\u7684\u5de5\u4f5c\u8868\u660e\uff0c\u5bf9\u4e8e\u5355\u4e2a\u6587\u6863\u64cd\u4f5c\uff0c\u7b54\u6848\u662f\u201c\u662f\u7684\uff1bMongoDB\u4ee5\u6700\u5f3a\u7684\u8bbe\u7f6e\u63d0\u4f9b\u4e86\u6bcf\u4e2a\u6587\u6863\u7684\u7ebf\u6027\u5316\uff0c\u4f46\u4e0d\u662f\u9ed8\u8ba4\u7684\u201d\u3002\u7136\u800c\uff0c\u57282018\u5e74\uff0cMongoDB\u5f15\u5165\u4e86\u591a\u6587\u6863\u4e8b\u52a1-\u4ec5\u9650\u4e8e\u4e00\u4e2a\u5206\u7247\u5185-\u5e76\u57282019\u5e74\u5c06\u8fd9\u4e9b\u4e8b\u52a1\u6269\u5c55\u5230\u591a\u4e2a\u5206\u7247\u3002\u8fd9\u4e9b\u4ea4\u6613\u63d0\u4f9b\u54ea\u4e9b\u5b89\u5168\u5c5e\u6027\uff1f\nMongoDB\u4e3b\u9875\u81ea\u8c6a\u5730\u5ba3\u4f20\u201c\u5168ACID\u4ea4\u6613\u201d\u3002Transaction\u9875\u9762\u58f0\u660eMongoDB\u662f\u201c\u552f\u4e00\u5b8c\u5168\u7ed3\u5408\u4e86\u6587\u6863\u6a21\u578b\u7684\u529f\u80fd\u548c\u5177\u6709ACID\u4fdd\u8bc1\u7684\u5206\u5e03\u5f0f\u7cfb\u7edf\u67b6\u6784\u7684\u6570\u636e\u5e93\u201d\uff0cCosmosDB\u3001DynamoDB\u3001FaunaDB\u3001Oracle NoSQL\u3001OrientDB\u3001RavenDB\u3001SAP HANA\u3001YuaByte DB\u7b49\u516c\u53f8\u4e5f\u58f0\u79f0\u8fd9\u4e00\u7ec4\u5408\u3002\nmongodb\u67b6\u6784\u6307\u5357\u627f\u8bfaACID\u4e8b\u52a1\u201c\u4fdd\u6301\u4e0e\u60a8\u5728\u4f20\u7edf\u6570\u636e\u5e93\u2026\u4e2d\u4e60\u60ef\u7684\u6570\u636e\u5b8c\u6574\u6027\u4fdd\u8bc1\u76f8\u540c\u7684\u6570\u636e\u5b8c\u6574\u6027\u4fdd\u8bc1\u201d\u3002MongoDB\u63d0\u4f9b\u4e86\u201c\u5f88\u5f3a\u7684\u8bbe\u8ba1\u4e00\u81f4\u6027\u201d\uff0c\u4f46\u6ca1\u6709\u63d0\u4f9b\u66f4\u5177\u4f53\u7684\u58f0\u660e\u3002ACID\u767d\u76ae\u4e66\u6f84\u6e05\u4e86MongoDB\u4e8b\u52a1\u63d0\u4f9b\u5feb\u7167\u9694\u79bb\uff1a\u4e00\u4e2a\u76f8\u5f53\u5f3a\u5927\u7684\u6a21\u578b\uff0c\u5b83\u6784\u6210\u4e86PostgreSQL\u7b49\u7cfb\u7edf\u7684\u4e00\u81f4\u6027\u57fa\u51c6\u7ea7\u522b\u3002\u767d\u76ae\u4e66\u79f0\uff1a\n\u2026\u3002\u5feb\u7167\u8bfb\u53d6\u9694\u79bb\u53ef\u786e\u4fdd\u5728\u53ea\u8bfb\u4e8b\u52a1\u5185\u6267\u884c\u7684\u67e5\u8be2\u548c\u805a\u5408\u5c06\u9488\u5bf9\u8de8\u5206\u7247\u7fa4\u96c6\u7684\u6bcf\u4e2a\u4e3b\u526f\u672c\u7684\u6570\u636e\u5e93\u7684\u5168\u5c40\u4e00\u81f4\u5feb\u7167\u8fd0\u884c\u3002\nMongoDB\u53cd\u590d\u5c06\u5feb\u7167\u9694\u79bb\u603b\u7ed3\u4e3a\u201c\u4e8b\u52a1\u63d0\u4f9b\u4e00\u81f4\u7684\u6570\u636e\u89c6\u56fe\uff0c\u5e76\u5f3a\u5236\u6267\u884c\u5168\u6709\u6216\u5168\u65e0\u6267\u884c\u4ee5\u7ef4\u62a4\u6570\u636e\u5b8c\u6574\u6027\u201d\u3002\u8fd9\u662f\u5bf9\u5feb\u7167\u9694\u79bb\u7684\u7b80\u660e\u800c\u76f4\u89c2\u7684\u603b\u7ed3\uff0c\u4f46\u6211\u4eec\u5e94\u8be5\u6ce8\u610f\uff0c\u5feb\u7167\u9694\u79bb\u4e0b\u7684\u201c\u4e00\u81f4\u89c6\u56fe\u201d\u53ef\u80fd\u4ecd\u7136\u4ee4\u4eba\u60ca\u8bb6\uff1a\u6b63\u5982Fekete\u3001O\u2018Neil\u548cO\u2019Neil\u57282004\u5e74\u6240\u5199\u7684\u90a3\u6837\uff0c\u53ea\u8bfb\u4e8b\u52a1\u5728\u5feb\u7167\u9694\u79bb\u4e0b\u53ef\u4ee5\u89c2\u5bdf\u5230\u4e0d\u53ef\u5e8f\u5217\u5316\u7684\u884c\u4e3a\u3002\u5feb\u7167\u9694\u79bb\u4e5f\u4e0d\u4e00\u5b9a\u7ef4\u62a4\u6570\u636e\u5b8c\u6574\u6027\uff1a\u5728\u4ed6\u4eec1995\u5e74\u7684\u8bba\u6587Defining Snapshot Isolation\u4e2d\uff0cBerenson\u3001Bernstein\u7b49\u4eba\u63d0\u4f9b\u4e86\u5728\u5feb\u7167\u9694\u79bb\u4e0b\u5176\u5b8c\u6574\u6027\u7ea6\u675f\u53ef\u80fd\u88ab\u8fdd\u53cd\u7684\u5e94\u7528\u7a0b\u5e8f\u793a\u4f8b-\u4f8b\u5982\uff0c\u7531\u4e8e\u5199\u5165\u504f\u5dee\u3002\n\u6211\u4eec\u4f7f\u7528Jepsen\u5206\u5e03\u5f0f\u7cfb\u7edf\u6d4b\u8bd5\u5e93\u8bbe\u8ba1\u4e86\u4e00\u4e2a\u6d4b\u8bd5\u5957\u4ef6\uff0c\u5e76\u4f7f\u7528\u5b83\u5bf9MongoDB 4.2.6\u4e2d\u7684\u4e8b\u52a1\u5b89\u5168\u6027\u8fdb\u884c\u4e86\u8bc4\u4f30\u3002\u6211\u4eec\u7684\u6d4b\u8bd5\u57289\u4e2aDebian 9\u8282\u70b9\u7684\u96c6\u7fa4\u4e0a\u5b89\u88c5\u4e86MongoDB\u7684\u5b98\u65b9Debian\u5305\u3002\u6211\u4eec\u5728LXC\u548cEC2\u4e2d\u90fd\u8fdb\u884c\u4e86\u6d4b\u8bd5\uff1b\u4e24\u8005\u90fd\u8868\u73b0\u51fa\u76f8\u4f3c\u7684\u884c\u4e3a\u3002\u6839\u636e\u90e8\u7f72\u6307\u5bfc\u539f\u5219\uff0c\u6211\u4eec\u6784\u5efa\u4e86\u53cc\u5206\u7247\u96c6\u7fa4\uff0c\u5c06\u5206\u7247\u548cconfigsvr\u5143\u6570\u636e\u7cfb\u7edf\u90fd\u4f5c\u4e3a\u4e09\u8282\u70b9\u526f\u672c\u96c6\u8fd0\u884c\u3002\u6240\u67099\u4e2a\u8282\u70b9\u90fd\u8fd0\u884c\u4e00\u4e2amongos\u5b9e\u4f8b\uff0c\u8be5\u5b9e\u4f8b\u5145\u5f53\u5206\u7247MongoDB\u96c6\u7fa4\u7684\u524d\u7aef\u3002\n\u6211\u4eec\u7684\u6d4b\u8bd5\u5de5\u4f5c\u8d1f\u8f7d\u6d89\u53ca\u5355\u4e2aMongoDB\u96c6\u5408\u4e2d\u5faa\u73af\u6587\u6863\u6c60\u7684\u4e8b\u52a1\uff0c\u6bcf\u4e2a\u6587\u6863\u5305\u542b\u5355\u4e2a\u6574\u6570\u6570\u7ec4\u3002\u6bcf\u4e2a\u4e8b\u52a1\u5bf9\u8fd9\u4e9b\u6587\u6863\u6267\u884c\u4e00\u5230\u56db\u4e2a\u64cd\u4f5c\uff1a\u8981\u4e48\u6309primary key_id\u8bfb\u53d6\u5355\u4e2a\u6587\u6863\uff0c\u8981\u4e48(\u4f7f\u7528$PUSH)\u518d\u6b21\u6309_id\u5c06\u552f\u4e00\u6574\u6570\u9644\u52a0\u5230\u5355\u4e2a\u6587\u6863\u7684\u503c\u6570\u7ec4\u3002\u6211\u4eec\u6309_id\u5bf9\u96c6\u5408\u8fdb\u884c\u4e86\u5206\u7247\u3002\n\u4f7f\u7528\u4e0e\u52a0\u5dde\u5927\u5b66\u5723\u514b\u9c81\u65af\u5206\u6821\u7684Peter Alvaro\u5408\u4f5c\u5f00\u53d1\u7684\u65b0\u4ea4\u6613\u5206\u6790\u5de5\u5177Elle\uff0cJepsen\u81ea\u52a8\u63a8\u65ad\u8fd9\u4e9b\u4ea4\u6613\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u5e76\u5728\u8be5\u56fe\u4e2d\u641c\u7d22\u5faa\u73af\u4ee5\u8bc6\u522b\u9694\u79bb\u5f02\u5e38\u3002\u68c0\u67e5\u4e2d\u6b62\u548c\u4e2d\u95f4\u8bfb\u53d6\u4ee5\u53ca\u5176\u4ed6\u975e\u5faa\u73af\u5f02\u5e38\u7684\u5176\u4ed6\u6280\u672f\u3002\n\u5728\u5176\u4e2d\u4e00\u4e9b\u6d4b\u8bd5\u4e2d\uff0c\u6211\u4eec\u5f15\u5165\u4e86\u7f51\u7edc\u5206\u533a\uff0c\u65e8\u5728\u9694\u79bbMongoDB\u4e3b\u8282\u70b9\u3002\n\u6211\u4eec\u9996\u5148\u5728\u6ca1\u6709\u4e8b\u52a1\u7684\u60c5\u51b5\u4e0b\u8fd0\u884c\u6d4b\u8bd5\u4ee5\u83b7\u5f97\u57fa\u7ebf\uff1a\u6bcf\u4e2aJepsen\u201c\u4e8b\u52a1\u201d\u53ea\u6267\u884c\u4e00\u4e2a\u8bfb\u53d6\u6216\u8ffd\u52a0\u64cd\u4f5c\uff0c\u800c\u4e0d\u4f7f\u7528\u4f1a\u8bdd\u6216\u4e8b\u52a1API\u3002\u56e0\u4e3a\u6211\u4eec\u77e5\u9053MongoDB\u4f1a\u4e22\u5931\u4efb\u4f55\u8bbe\u7f6e\u5c0f\u4e8e\u591a\u6570\u7684\u66f4\u65b0\uff0c\u5e76\u4e14\u5728\u6ca1\u6709\u8bfb\u53d6\u5173\u6ce8\u70b9\u7684\u60c5\u51b5\u4e0b\u8868\u73b0\u51fa\u9648\u65e7\u7684\u8bfb\u53d6\u53ef\u7ebf\u6027\u5316\uff0c\u6240\u4ee5\u6211\u4eec\u5728\u5ba2\u6237\u7aef\u7684\u6570\u636e\u5e93\u53e5\u67c4\u4e0a\u8bbe\u7f6e\u4e86\u5199\u5165\u5173\u6ce8\u70b9\u591a\u6570\u548c\u8bfb\u53d6\u5173\u6ce8\u70b9\u53ef\u7ebf\u6027\u5316\u3002\u751f\u6210\u7684\u5386\u53f2\u8bb0\u5f55\u4f3c\u4e4e\u4e0e\u5feb\u7167\u9694\u79bb\u4e00\u81f4\u3002\n\u7136\u540e\uff0c\u6211\u4eec\u5c06\u8fd9\u4e9b\u5355\u4e2a\u64cd\u4f5c\u5305\u88c5\u5728\u4e8b\u52a1\u4e2d\uff0c\u51fa\u73b0\u4e86\u4e00\u4e2a\u4ee4\u4eba\u60ca\u8bb6\u7684\u884c\u4e3a\uff1a\u4f7f\u7528\u7f51\u7edc\u5206\u533a\uff0c\u4e8b\u52a1\u4f3c\u4e4e\u4e22\u5931\u4e86\u786e\u8ba4\u7684\u5199\u5165\u3002\u4f8b\u5982\uff0c\u8003\u8651\u4ee5\u4e0b\u5386\u53f2\u8bb0\u5f55\uff0c\u5176\u4e2d\u572830\u79d2\u5185\uff0c\u5bf98\u4e2a\u6587\u6863\u7684\u66f4\u65b0\u88ab\u6210\u529f\u786e\u8ba4\uff0c\u7136\u540e\u6d88\u5931\u3002\u4ee5\u4e0b\u662f\u9605\u8bfb\u6587\u6863555\u7684\u5386\u53f2\u8bb0\u5f55\uff1a\n\u5ba2\u6237\u7aef\u89c2\u5bdf\u5230\u4e00\u4e2a\u5355\u8c03\u589e\u957f\u7684\u5143\u7d20\u5217\u8868\uff0c\u76f4\u5230[1 2 3 4 5 6 7]\uff0c\u6b64\u65f6\u5217\u8868\u91cd\u7f6e\u4e3a[]\uff0c\u5e76\u4ece[8]\u91cd\u65b0\u5f00\u59cb\u3002\u8fd9\u53ef\u80fd\u662fMongoDB\u56de\u6eda\u7684\u4e00\u4e2a\u4f8b\u5b50\uff0c\u8fd9\u662f\u201c\u6570\u636e\u4e22\u5931\u201d\u7684\u4e00\u79cd\u82b1\u54e8\u7684\u8bf4\u6cd5\u3002\n\u8fd9\u5f88\u7cdf\u7cd5\uff0c\u4f46\u4e00\u4e2a\u66f4\u5fae\u5999\u7684\u95ee\u9898\u51fa\u73b0\u4e86\uff1a\u6211\u4eec\u5230\u5e95\u4e3a\u4ec0\u4e48\u80fd\u591f\u8bfb\u53d6\u8fd9\u4e9b\u503c\uff1f\u6bd5\u7adf\uff0cRead Concerns Linizable\u5e94\u8be5\u53ea\u663e\u793a\u5927\u591a\u6570\u786e\u8ba4(\u5373\u4e0d\u53ef\u6301\u7eed)\u7684\u5199\u5165\u3002\u7b54\u6848\u662f\u4e00\u4e2a\u4ee4\u4eba\u60ca\u8bb6\u4f46\u6709\u6587\u6863\u8bb0\u5f55\u7684MongoDB\u8bbe\u8ba1\u9009\u62e9\uff1a\n\u4e8b\u52a1\u4e2d\u7684\u64cd\u4f5c\u4f7f\u7528\u4e8b\u52a1\u7ea7\u522b\u7684\u8bfb\u53d6\u5173\u6ce8\u70b9\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5728\u96c6\u5408\u548c\u6570\u636e\u5e93\u7ea7\u522b\u8bbe\u7f6e\u7684\u4efb\u4f55\u8bfb\u53d6\u5173\u6ce8\u70b9\u5728\u4e8b\u52a1\u5185\u90fd\u4f1a\u88ab\u5ffd\u7565\u3002\n\u6570\u636e\u5e93\u793e\u533a\u7684\u666e\u904d\u770b\u6cd5\u662f\uff0cMongoDB\u5386\u6765\u62d2\u7edd\u63d0\u9ad8\u8bfb\u5199\u5b89\u5168\u7684\u9ed8\u8ba4\u7ea7\u522b\uff0c\u56e0\u4e3a\u8fd9\u6837\u505a\u4f1a\u5f71\u54cd\u5df2\u7ecf\u4e60\u60ef\u4e86\u66f4\u5feb\u7684\u3001\u5076\u5c14\u4e0d\u5b89\u5168\u7684\u9ed8\u8ba4\u8bbe\u7f6e\u7684\u751f\u4ea7\u7528\u6237\uff0c\u800c\u4e14\u6570\u636e\u4e22\u5931\u53ef\u80fd\u4e0d\u591f\u4e25\u91cd\uff0c\u4e0d\u8db3\u4ee5\u4fdd\u8bc1\u66f4\u5f3a\u7684\u5b89\u5168\u8bbe\u7f6e\u5e26\u6765\u7684\u5ef6\u8fdf\u3001\u541e\u5410\u91cf\u548c\u8d44\u672c\u652f\u51fa\u7684\u589e\u52a0\u3002MongoDB\u7684\u7814\u7a76\u4eba\u5458\u5728VLDB\u4e0a\u62a5\u544a\u8bf4\uff1a\n\u2026\u3002\u5f53\u7136\uff0c\u7528\u6237\u66f4\u559c\u6b22\u4f7f\u7528readConcern\u7ea7\u522b\u7684\u201c\u591a\u6570\u201d\u548cwriteConcern w\uff1a\u201c\u591a\u6570\u201d\uff0c\u56e0\u4e3a\u6bcf\u4e2a\u4eba\u90fd\u60f3\u8981\u5b89\u5168\u3002\u4f46\u662f\uff0c\u5f53\u7528\u6237\u53d1\u73b0\u8f83\u5f3a\u7684\u4e00\u81f4\u6027\u7ea7\u522b\u592a\u6162\u65f6\uff0c\u4ed6\u4eec\u4f1a\u5207\u6362\u5230\u4f7f\u7528\u8f83\u5f31\u7684\u4e00\u81f4\u6027\u7ea7\u522b\u3002\u8fd9\u4e9b\u51b3\u7b56\u901a\u5e38\u57fa\u4e8e\u4e1a\u52a1\u9700\u6c42\u548cSLA\uff0c\u800c\u4e0d\u662f\u7ec6\u7c92\u5ea6\u7684\u5f00\u53d1\u4eba\u5458\u9700\u6c42\u3002\u6b63\u5982\u6211\u4eec\u5728\u6574\u7bc7\u6587\u7ae0\u4e2d\u6240\u8ba8\u8bba\u7684\u90a3\u6837\uff0c\u51b3\u5b9a\u4f7f\u7528\u8f83\u5f31\u7684\u4e00\u81f4\u6027\u7ea7\u522b\u5728\u5b9e\u8df5\u4e2d\u901a\u5e38\u662f\u53ef\u884c\u7684\uff0c\u56e0\u4e3a\u6545\u969c\u8f6c\u79fb\u5f88\u5c11\u53d1\u751f\uff0c\u5e76\u4e14\u6545\u969c\u8f6c\u79fb\u9020\u6210\u7684\u6570\u636e\u4e22\u5931\u901a\u5e38\u5f88\u5c0f\u3002\n\u7136\u800c\uff0c\u4ea4\u6613\u662f\u4e00\u4e2a\u5168\u65b0\u7684\u529f\u80fd\uff0c\u7528\u6237\u53ef\u80fd\u5e0c\u671b\u727a\u7272\u4e00\u4e9b\u901f\u5ea6\u6765\u6362\u53d6\u66f4\u597d\u7684\u5b89\u5168\u4fdd\u8bc1\u3002\u5408\u7406\u7684\u7528\u6237\u53ef\u80fd\u4f1a\u671f\u671b\u4e8b\u52a1\u7684\u9ed8\u8ba4\u5b89\u5168\u7ea7\u522b\u5982\u627f\u8bfa\u7684\u90a3\u6837\u63d0\u4f9b\u5feb\u7167\u9694\u79bb-\u6216\u8005\uff0c\u81f3\u5c11\u4e0e\u7528\u6237\u5df2\u7ecf\u4ece\u6240\u6d89\u53ca\u7684\u6570\u636e\u5e93\u6216\u96c6\u5408\u8bf7\u6c42\u7684\u8bfb\u53d6\u5173\u6ce8\u5ea6\u76f8\u540c\u3002\u76f8\u53cd\uff0c\u6ca1\u6709\u663e\u5f0f\u8bfb\u5173\u6ce8\u70b9\u7684\u4e8b\u52a1\u5c06\u6570\u636e\u5e93\u6216\u96c6\u5408\u7ea7\u522b\u7684\u4efb\u4f55\u8bf7\u6c42\u7684\u8bfb\u5173\u6ce8\u70b9\u964d\u7ea7\u4e3a\u7f3a\u7701\u7684\u672c\u5730\u7ea7\u522b\uff0c\u8fd9\u201c\u4e0d\u80fd\u4fdd\u8bc1\u6570\u636e\u5df2\u88ab\u5199\u5165\u5927\u591a\u6570\u526f\u672c(\u5373\u53ef\u80fd\u88ab\u56de\u6eda)\u201d\u3002\n\u56e0\u6b64\uff1a\u7528\u6237\u5e94\u8be5\u5c0f\u5fc3\u5730\u5bf9\u6bcf\u4e2a\u9700\u8981\u5feb\u7167\u9694\u79bb\u7684\u4e8b\u52a1\u4f7f\u7528\u5feb\u7167\u7ea7\u522b\u7684\u8bfb\u5173\u6ce8\u3002\u6587\u6863\u786e\u8ba4\uff1a\u201cRead Concerns\u2018Snapshot\u2019\u4ece\u5927\u591a\u6570\u63d0\u4ea4\u7684Data\u2026\u7684\u5feb\u7167\u8fd4\u56de\u6570\u636e\u201d\u8fd9\u662f\u6709\u610f\u4e49\u7684\uff0c\u7136\u540e\u7ee7\u7eed\uff1a\u201c\u5982\u679c\u4e8b\u52a1\u4ee5\u5199\u5173\u6ce8\u2018\u591a\u6570\u2019\u63d0\u4ea4\u201d\uff0c\u5219\u4e0d\u662f\u8fd9\u6837\u3002\u5177\u4f53\u800c\u8a00\uff1a\n\u5982\u679c\u4e8b\u52a1\u4e0d\u4f7f\u7528\u5199\u5173\u6ce8\u70b9\u201c\u591a\u6570\u201d\u8fdb\u884c\u63d0\u4ea4\uff0c\u5219\u201c\u5feb\u7167\u201d\u8bfb\u5173\u6ce8\u70b9\u4e0d\u80fd\u4fdd\u8bc1\u8bfb\u53d6\u64cd\u4f5c\u4f7f\u7528\u4e86\u591a\u6570\u63d0\u4ea4\u6570\u636e\u7684\u5feb\u7167\u3002\n\u7cbe\u660e\u7684\u8bfb\u8005\u53ef\u80fd\u4f1a\u95ee\uff0c\u201c\u62e5\u6709\u4e0d\u63d0\u4f9b\u5feb\u7167\u9694\u79bb\u8bfb\u53d6\u7684\u5feb\u7167\u8bfb\u53d6\u5173\u6ce8\u70b9\u6709\u4ec0\u4e48\u610f\u4e49\uff1f\u201d\u66f4\u7cbe\u660e\u7684\u8bfb\u8005\u5728\u89c2\u5bdf\u5230\u4e00\u79cd\u6a21\u5f0f\u540e\uff0c\u53ef\u80fd\u4f1a\u8be2\u95ee\u5199\u5165\u5173\u6ce8\u5ea6\u7684\u9ed8\u8ba4\u7ea7\u522b\u3002\n\u5982\u679c\u4e8b\u52a1\u7ea7\u522b\u7684\u5199\u5165\u5173\u6ce8\u70b9\u548c\u4f1a\u8bdd\u7ea7\u522b\u7684\u5199\u5165\u5173\u6ce8\u70b9\u672a\u8bbe\u7f6e\uff0c\u5219\u4e8b\u52a1\u7ea7\u522b\u7684\u5199\u5165\u5173\u6ce8\u9ed8\u8ba4\u4e3a\u5ba2\u6237\u7aef\u7ea7\u7684\u5199\u5165\u5173\u6ce8\u70b9\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5ba2\u6237\u7aef\u7ea7\u5199\u5165\u5173\u6ce8\u70b9\u4e3aw\uff1a1\u3002\n\u4e3a\u4e86\u83b7\u5f97\u5feb\u7167\u9694\u79bb\uff0c\u7528\u6237\u4e0d\u4ec5\u5fc5\u987b\u5c0f\u5fc3\u5730\u5c06\u6bcf\u4e2a\u4e8b\u52a1\u7684\u8bfb\u5173\u6ce8\u70b9\u8bbe\u7f6e\u4e3a\u5feb\u7167\uff0c\u8fd8\u5fc5\u987b\u5c06\u6bcf\u4e2a\u4e8b\u52a1\u7684\u5199\u5173\u6ce8\u70b9\u8bbe\u7f6e\u4e3a\u591a\u6570\u3002\n\u4ee4\u4eba\u60ca\u8bb6\u7684\u662f\uff0c\u8fd9\u751a\u81f3\u9002\u7528\u4e8e\u53ea\u8bfb\u4e8b\u52a1\u3002\u5728\u6b64\u6d4b\u8bd5\u8fd0\u884c\u4e2d\uff0c\u6211\u4eec\u5728\u5355\u64cd\u4f5c\u5199\u4e8b\u52a1\u4e0a\u8bbe\u7f6e\u8bfb\u5173\u6ce8\u70b9\u5feb\u7167\u548c\u5199\u5173\u6ce8\u70b9\u591a\u6570\uff0c\u5bf9\u4e8e\u5355\u64cd\u4f5c\u8bfb\u4e8b\u52a1\uff0c\u4ec5\u8bbe\u7f6e\u8bfb\u5173\u6ce8\u70b9\u5feb\u7167\u3002\u53d1\u751f\u7f51\u7edc\u5206\u533a\u65f6\uff0c\u8bfb\u53d6\u89c2\u5bdf\u5230\u7684\u4e0d\u540c\u65f6\u95f4\u7ebf\uff1a\n\u8fd9\u4e9b\u66f4\u65b0\u5e76\u6ca1\u6709\u5b8c\u5168\u4e22\u5931-\u5199\u51651\u30015\u548c6\u7684\u4e8b\u52a1\u8d85\u65f6\uff0c\u4f46\u5b83\u4eec\u5bf9\u8bfb\u53d6\u7684\u5f71\u54cd\u65e2\u53ef\u89c1\u53c8\u4e0d\u53ef\u89c1\uff0c\u8fd9\u610f\u5473\u7740\u8fd9\u4e9b\u65f6\u95f4\u7ebf\u4e2d\u81f3\u5c11\u6709\u4e00\u4e2a\u662f\u4e2d\u6b62\u8bfb\u53d6\u7684\u5b9e\u4f8b\u3002\n\u8fd9\u79cd\u884c\u4e3a\u53ef\u80fd\u4ee4\u4eba\u60ca\u8bb6\uff0c\u4f46\u662fMongoDB\u503c\u5f97\u79f0\u8d5e\u7684\u662f\uff0c\u8fd9\u79cd\u884c\u4e3a\u7684\u5927\u90e8\u5206\u90fd\u5728\u4e8b\u52a1\u6587\u6863\u4e2d\u6e05\u695a\u5730\u5217\u51fa\u4e86\u3002\u95ee\u9898\u662f\uff0c\u7528\u6237\u662f\u5426\u4ed4\u7ec6\u9605\u8bfb\u4e86\u8be5\u6587\u6863\uff0c\u800c\u4e0d\u662f\u4f9d\u8d56\u4e8e\u5e02\u573a\u5ba3\u4f20\uff0c\u6216\u8005\u50cf\u201c\u4f7f\u7528Read Concerns Snapshot\u610f\u5473\u7740\u9605\u8bfb\u63d0\u4ea4\u7684\u5feb\u7167\u201d\u8fd9\u6837\u7684\u5047\u8bbe\u3002\u6211\u4eec\u53ef\u80fd\u8fd8\u4f1a\u95ee\uff0c\u662f\u5426\u53ef\u4ee5\u671f\u671b\u7528\u6237\u8bb0\u4f4f\u5c06\u8fd9\u4e9b\u8bbe\u7f6e\u5e94\u7528\u4e8e\u9700\u8981\u8fd9\u4e9b\u8bbe\u7f6e\u7684\u6bcf\u4e2a\u4e8b\u52a1\u3002\u6bd5\u7adf\uff0cMongoDB\u63d0\u4f9b\u4e86\u7cbe\u786e\u7684\u6570\u636e\u5e93\u548c\u96c6\u5408\u7ea7\u5b89\u5168\u8bbe\u7f6e\uff0c\u56e0\u6b64\u7528\u6237\u53ef\u4ee5\u5047\u5b9a\u4e0e\u8fd9\u4e9b\u6570\u636e\u5e93\u6216\u96c6\u5408\u4ea4\u4e92\u7684\u6240\u6709\u64cd\u4f5c\u90fd\u4f7f\u7528\u8fd9\u4e9b\u8bbe\u7f6e\uff1b\u5f53\u7528\u6237\u6267\u884c(\u53ef\u80fd)\u5b89\u5168\u5173\u952e\u578b\u64cd\u4f5c\u65f6\uff0c\u5ffd\u7565\u8bfb\u5199\u76f8\u5173\u8bbe\u7f6e\u662f\u4ee4\u4eba\u60ca\u8bb6\u7684\uff01\n\u5728\u968f\u540e\u7684\u6d4b\u8bd5\u4e2d\uff0c\u6211\u4eec\u5bf9\u6240\u6709\u5355\u64cd\u4f5c\u8bfb\u5199\u4f7f\u7528\u8bfb\u5173\u6ce8\u5ea6\u53ef\u7ebf\u6027\u5316\u548c\u5199\u5173\u6ce8\u5ea6\u591a\u6570\uff0c\u5bf9\u591a\u64cd\u4f5c\u4e8b\u52a1\u4f7f\u7528\u8bfb\u5173\u6ce8\u5ea6\u5feb\u7167\u548c\u5199\u5173\u6ce8\u5ea6\u591a\u6570\u3002\u5728\u5065\u5eb7\u7fa4\u96c6(\u4f8b\u5982\uff0c\u6ca1\u6709\u6545\u969c\u7684\u7fa4\u96c6)\u4e2d\uff0c\u7c97\u7565\u6d4b\u8bd5\u4f3c\u4e4e\u4e0e\u5feb\u7167\u9694\u79bb\u4e00\u81f4\u3002\n\u7136\u800c\uff0c\u6211\u4eec\u6ce8\u610f\u5230\uff0c\u867d\u7136MongoDB\u7684\u4e3b\u9875\u663e\u8457\u5730\u58f0\u79f0\u63d0\u4f9b\u201c\u5168ACID\u4e8b\u52a1\u201d\uff0c\u4f46\u4eba\u4eec\u53ef\u80fd\u4f1a\u8ba4\u4e3a\u8fd9\u610f\u5473\u7740\u4e8b\u52a1\u662f\u5b8c\u5168\u539f\u5b50\u7684\u3001\u9694\u79bb\u7684\u3001\u4e00\u81f4\u7684\u548c\u6301\u4e45\u7684\u3002\u4e8b\u5b9e\u5e76\u975e\u5982\u6b64\uff1a\u5982\u524d\u6240\u8ff0\uff0c\u5feb\u7167\u9694\u79bb\u4e0b\u7684\u4e8b\u52a1\u5e76\u4e0d\u662f\u5b8c\u5168\u9694\u79bb\u7684\u3002\n\u4f8b\u5982\uff0c\u8003\u8651\u4ee5\u4e0b\u6d4b\u8bd5\u8fd0\u884c\uff0c\u5b83\u4f7f\u7528\u8bfb\u5173\u6ce8\u70b9\u5feb\u7167\u3001\u5199\u5173\u6ce8\u70b9\u591a\u6570\uff0c\u5e76\u4e14\u4e0d\u6d89\u53ca\u7f51\u7edc\u5206\u533a\u6216\u5176\u4ed6\u5916\u90e8\u6545\u969c\u3002\u751f\u6210\u7684\u5386\u53f2\u4f3c\u4e4e\u6ca1\u6709\u8fdd\u53cd\u5feb\u7167\u9694\u79bb\uff0c\u4f46\u4ecd\u7136\u8868\u73b0\u51fa\u5faa\u73af\u7684\u4e8b\u52a1\u4f9d\u8d56\u5173\u7cfb\uff0c\u5982\u4e0b\u6240\u793a\uff1a\n\u4e00\u4e2a\u4e8b\u52a1\u5c061\u9644\u52a0\u5230\u6587\u68631047\uff0c\u5e76\u8bfb\u53d6\u6587\u68631045\uff0c\u53d1\u73b0\u5b83\u662f\u7a7a\u7684\u3002\u53e6\u4e00\u4e2a\u5c061\u9644\u52a0\u5230\u6587\u68631045\uff0c\u5e76\u8bfb\u53d61047\uff0c\u53d1\u73b0\u5b83\u662f\u7a7a\u7684\u3002\u6807\u8bb0\u4e3aRW\u7684\u884c\u8868\u793a\u8fd9\u4e9b\u8bfb\u5199\u53cd\u4f9d\u8d56\u5173\u7cfb\u3002\u8fd9\u4e9b\u4e8b\u52a1\u4e0d\u53ef\u80fd\u662f\u9694\u79bb\u7684\uff1a\u5982\u679c\u7b2c\u4e00\u4e2a\u4e8b\u52a1\u5148\u9694\u79bb\u6267\u884c\uff0c\u5219\u5176\u5bf91047\u7684\u5199\u5165\u5bf9\u7b2c\u4e8c\u4e2a\u4e8b\u52a1\u662f\u53ef\u89c1\u7684\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002\u7531\u4e8e\u8fd9\u4e9b\u4e8b\u52a1\u6ca1\u6709\u5199\u5165\u76f8\u540c\u7684\u6587\u6863\uff0c\u56e0\u6b64\u5141\u8bb8\u5b83\u4eec(\u5728\u5feb\u7167\u9694\u79bb\u4e0b)\u5e76\u53d1\u6267\u884c\u3002\n\u5176\u4ed6\u5468\u671f\u5219\u66f4\u4e3a\u590d\u6742\u3002\u4f8b\u5982\uff0c\u8fd9\u91cc\u662f\u4e00\u4e2a\u753112\u4e2a\u4e8b\u52a1\u7ec4\u6210\u7684\u96c6\u7fa4\uff0c\u540c\u6837\u5728MongoDB\u6700\u5f3a\u7684\u5b89\u5168\u8bbe\u7f6e\u4e0b\u6267\u884c\u3002\u8fd9\u4e9b\u4e8b\u52a1\u4e2d\u7684\u6bcf\u4e00\u4e2a\u90fd(\u4ee5\u5404\u79cd\u65b9\u5f0f)\u76f8\u4e92\u4f9d\u8d56\u3002\u6807\u8bb0\u4e3aWW\u7684\u7bad\u5934\u663e\u793a\u5199-\u5199\u4f9d\u8d56\u5173\u7cfb\uff0c\u5176\u4e2d\u4e00\u4e2a\u4e8b\u52a1\u8986\u76d6\u53e6\u4e00\u4e2a\u4e8b\u52a1\u7684\u5199\u5165\u3002\u5177\u6709WR\u7684\u4e8b\u52a1\u8868\u73b0\u51fa\u5199-\u8bfb\u4f9d\u8d56\u5173\u7cfb\uff1a\u4e00\u4e2a\u4e8b\u52a1\u8bfb\u53d6\u53e6\u4e00\u4e2a\u4e8b\u52a1\u7684\u5199\u3002\n\u6216\u8005\u8003\u8651\u4e00\u4e0b\u8fd9\u4e2a\u7531123\u4e2a\u4e8b\u52a1\u7ec4\u6210\u7684\u96c6\u7fa4\uff0c\u6240\u6709\u8fd9\u4e9b\u4e8b\u52a1\u4f3c\u4e4e\u90fd\u662f\u5728\u6bcf\u4e2a\u4e8b\u52a1\u4e4b\u524d\u6267\u884c\u7684\uff0c\u4f46\u4e5f\u662f\u5728\u6bcf\u4e2a\u4e8b\u52a1\u4e4b\u540e\u6267\u884c\u7684\u3002\u8fd9\u4e2a\u661f\u56e2\u662f\u201c\u5168\u9178\u201d\u5417\uff1f\u4e5f\u8bb8\u5427\uff0c\u4f46\u5982\u679c\u662f\u8fd9\u6837\u7684\u8bdd\uff0c\u6211\u4eec\u5fc5\u987b\u627f\u8ba4\uff0c\u9178\u6027\u4e2d\u7684\u201c\u6211\u201d\u53ea\u610f\u5473\u7740\u90e8\u5206\u9694\u79bb\uff0c\u6216\u8005\u201c\u5b8c\u5168\u201d\u610f\u5473\u7740\u7565\u4f4e\u4e8e\u5b8c\u5168\u3002\n\u8fd9\u4e9b\u5f02\u5e38\u73b0\u8c61\u5e76\u4e0d\u5c11\u89c1\u3002\u4f8b\u5982\uff0c\u8fd9\u4e2a\u5386\u53f2\u8bb0\u5f55\u6bcf\u79d2\u5927\u7ea6\u5305\u542b100\u4e2a\u4e8b\u52a1\uff0c\u6211\u4eec\u8bc6\u522b\u51fa1,461\u4e2a\u4e8b\u52a1(\u603b\u517113914\u4e2a)\u5177\u6709\u5faa\u73af\u4f9d\u8d56\u5173\u7cfb\u3002\u5927\u7ea610%\u7684\u4e8b\u52a1\u5728\u6b63\u5e38\u8fd0\u884c\u671f\u95f4\u51fa\u73b0\u5f02\u5e38\uff0c\u6ca1\u6709\u6545\u969c\u3002\n\u91cd\u8981\u7684\u662f\u8981\u8bb0\u4f4f\uff0c\u4ec5\u4ec5\u56e0\u4e3a\u6211\u4eec\u53ef\u4ee5\u5728\u8fd9\u4e2a\u7b80\u5355\u7684\u5de5\u4f5c\u8d1f\u8f7d\u4e2d\u68c0\u6d4b\u5230\u5f02\u5e38\uff0c\u5e76\u4e0d\u610f\u5473\u7740\u8fd9\u4e9b\u5f02\u5e38\u5bf9\u7528\u6237\u5f88\u91cd\u8981\u3002\u5e76\u53d1\u6027\u53ef\u80fd\u8db3\u591f\u4f4e\uff0c\u56e0\u6b64\u5728\u5f88\u5927\u7a0b\u5ea6\u4e0a\u4e0d\u9700\u8981\u8fdb\u884c\u5e76\u53d1\u63a7\u5236\u3002\u53ef\u4ee5\u8bc1\u660e\u67d0\u4e9b\u4e8b\u52a1\u96c6\u5728\u5feb\u7167\u9694\u79bb\u4e0b\u53ef\u4e32\u884c\u6267\u884c-\u4f8b\u5982\uff0c\u5f53\u5b83\u4eec\u7684\u5199\u5165\u96c6\u76f8\u4ea4\u65f6\u3002\u5176\u4ed6\u7684\u5219\u8868\u73b0\u51fa\u4e0d\u53ef\u5e8f\u5217\u5316\u7684\u5f02\u5e38\uff0c\u4f46\u4e0d\u8fdd\u53cd\u5e94\u7528\u7a0b\u5e8f\u7ea7\u4e00\u81f4\u6027\u7ea6\u675f\u3002\u8fd8\u6709\u4e00\u4e9b\u786e\u5b9e\u8fdd\u53cd\u4e86\u7ea6\u675f\uff0c\u4f46\u8fd8\u4e0d\u591f\u9891\u7e41\uff0c\u7528\u6237\u4e0d\u4f1a\u6ce8\u610f\u5230\u6216\u5728\u610f\u3002\u5bf9\u4e8e\u8fd9\u4e9b\u76ee\u7684\uff0c\u5feb\u7167\u9694\u79bb\u5c31\u8db3\u591f\u597d\u4e86\uff01\n\u5f53\u6211\u4eec\u5728\u6d4b\u8bd5\u4e2d\u5f15\u5165\u7f51\u7edc\u6545\u969c\u65f6\uff0c\u6211\u4eec\u9047\u5230(\u6b63\u5982\u4eba\u4eec\u6240\u9884\u671f\u7684)\u5404\u79cd\u5ba2\u6237\u7aef\u9519\u8bef\u3002MongoDB\u4e8b\u52a1\u6587\u6863\u8bf4\uff1a\n\u5f53\u4e8b\u52a1\u4e2d\u6b62\u65f6\uff0c\u4e8b\u52a1\u4e2d\u6240\u505a\u7684\u6240\u6709\u6570\u636e\u66f4\u6539\u90fd\u5c06\u88ab\u4e22\u5f03\uff0c\u800c\u4e0d\u4f1a\u53d8\u5f97\u53ef\u89c1\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4e8b\u52a1\u4e2d\u7684\u4efb\u4f55\u64cd\u4f5c\u5931\u8d25\uff0c\u4e8b\u52a1\u5c06\u4e2d\u6b62\uff0c\u4e8b\u52a1\u4e2d\u6240\u505a\u7684\u6240\u6709\u6570\u636e\u66f4\u6539\u90fd\u5c06\u88ab\u4e22\u5f03\uff0c\u800c\u4e0d\u4f1a\u53d8\u5f97\u53ef\u89c1\u30021\u4e2a\u3002\n\u7136\u800c\uff0c\u53cd\u4e4b\u4ea6\u7136\uff1a\u4e00\u4e9b\u4e8b\u52a1\u9519\u8bef\u6d88\u606f\u4f3c\u4e4e\u8868\u660e\u4e8b\u52a1\u5df2\u4e2d\u6b62\uff0c\u4f46\u4e8b\u5b9e\u5e76\u975e\u5982\u6b64\u3002\u4f8b\u5982\uff0cTransactionConsulatorSteppingDown\u5f02\u5e38\u5b9e\u9645\u4e0a\u53ef\u80fd\u610f\u5473\u7740\u4e8b\u52a1\u5df2\u63d0\u4ea4\u3002\u540c\u6837\uff0c\u547d\u4ee4\u5931\u8d25\uff0c\u51fa\u73b0\u9519\u8bef6(HostUnreacable)\uff1a&#39\uff1b\u65e0\u6cd5\u521d\u59cb\u5316\u96c6\u5408jepsendb.jepsencoll\uff1a\uff1aReduced By\uff1a\uff1aConnection Rejected&#39\uff1b\u7684\u5199\u64cd\u4f5c\u7684\u76ee\u6807\u5668\u3002\u6211\u4eec\u5728\u6d4b\u8bd5\u4e2d\u53cd\u590d\u9047\u5230\u8fd9\u4e9b\u9519\u8bef\uff0c\u7ed3\u679c\u53d1\u73b0\u5b83\u4eec\u7684\u5199\u5165\u5bf9\u4e8e\u4ee5\u540e\u7684\u8bfb\u53d6\u662f\u53ef\u89c1\u7684\u3002\n\u8fd9\u4e0d\u4e00\u5b9a\u662f\u9519\u8bef-\u5728\u4efb\u4f55\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e2d\uff0c\u603b\u4f1a\u6709\u4e00\u7c7b\u9519\u8bef\u6307\u793a\u6210\u529f\u6216\u5931\u8d25\u3002\u4f46\u662f\uff0c\u5982\u679c\u6e05\u695a\u5730\u6807\u8bb0\u8fd9\u4e9b\u9519\u8bef\uff0c\u6216\u8005\u63d0\u4f9b\u6587\u672c\u6307\u5bfc\uff0c\u5219\u4f1a\u5f88\u6709\u5e2e\u52a9\u3002\u9519\u8bef6\uff0c\u5c31\u50cf\u6211\u4eec\u9047\u5230\u7684\u5927\u591a\u6570\u9519\u8bef\u4e00\u6837\uff0c\u6ca1\u6709\u6587\u6863\u8bb0\u5f55\uff1b\u5b98\u65b9\u6587\u6863\u4e2d\u53ea\u5269\u4e0b\u51e0\u4e2a\u4ee3\u7801\uff0c\u8c37\u6b4c\u4e5f\u6ca1\u4ec0\u4e48\u53ef\u8bf4\u7684\u3002\u5b8c\u6574\u7684\u9519\u8bef\u6587\u6863(\u53ef\u80fd\u5e26\u6709\u4ee3\u7801\u6307\u793a\u786e\u5b9a\u6545\u969c\u4e0e\u4e0d\u786e\u5b9a\u6545\u969c\u7684\u8868)\u53ef\u4ee5\u4e3a\u9519\u8bef\u6d88\u606f\u63d0\u4f9b\u4e00\u79cd\u5b9e\u7528\u7684\u66ff\u4ee3\u65b9\u6848\u3002\n\u5728\u6b63\u786e\u89e3\u91ca\u9519\u8bef\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u53d1\u73b0\u7f51\u7edc\u5206\u533a\u53ef\u80fd\u4f1a\u5bfc\u81f4MongoDB\u590d\u5236\u4e8b\u52a1\u7684\u5f71\u54cd\u3002\u5c3d\u7ba1\u4ece\u672a\u4e24\u6b21\u5c06\u76f8\u540c\u7684\u503c\u9644\u52a0\u5230\u4e00\u4e2a\u6570\u7ec4\u4e2d\uff0c\u4f46\u6211\u4eec\u53cd\u590d\u89c2\u5bdf\u5230\u5177\u6709\u540c\u4e00\u5143\u7d20\u7684\u591a\u4e2a\u526f\u672c\u7684\u6570\u7ec4\u3002\u4f8b\u5982\uff0c\u4ee5\u6b64\u6d4b\u8bd5\u8fd0\u884c\u4e3a\u4f8b\uff0c\u5b83\u5305\u542b\u4ee5\u4e0b\u4e8b\u52a1\uff1a\n\u8fd9\u91cc\uff0c\u5143\u7d206\u5728\u9605\u8bfb\u6587\u6863436\u65f6\u51fa\u73b0\u4e86\u4e24\u6b21\u3002\u8fd9\u79cd\u91cd\u590d\u63d0\u9ad8\u4e86\u5c066\u5199\u5165\u5bc6\u94a5436\u7684\u4e8b\u52a1\u53d1\u751f\u5728\u5176\u4ed6\u4e8b\u52a1\u4e4b\u524d\u548c\u4e4b\u540e\u7684\u53ef\u80fd\u6027\uff1b\u6839\u636e\u4eba\u4eec\u9009\u62e9\u7684\u89e3\u91ca(\u5982\u679c\u6709\u7684\u8bdd)\uff0c\u6240\u5f97\u5230\u7684\u5386\u53f2\u4e5f\u8868\u73b0\u51faG-Single\u548cG2\u53cd\u4f9d\u8d56\u5faa\u73af\u3002\u5373\u4f7f\u5728\u8bfb\u5173\u6ce8\u70b9\u5feb\u7167\u548c\u5199\u5173\u6ce8\u70b9\u5360\u591a\u6570\u7684\u60c5\u51b5\u4e0b\u4e5f\u4f1a\u51fa\u73b0\u8fd9\u79cd\u5f02\u5e38\uff0c\u8fd9\u8868\u660e\u5373\u4f7f\u5728\u6700\u5f3a\u7684\u8bbe\u7f6e\u4e0b\uff0cMongoDB\u4e8b\u52a1\u4e5f\u4e0d\u63d0\u4f9b\u5feb\u7167\u9694\u79bb\u3002\n\u6b64\u884c\u4e3a\u53ef\u80fd\u8868\u660e\u4e8b\u52a1\u91cd\u8bd5\u673a\u5236\u4e0d\u6b63\u786e-MongoDB\u5c06\u81ea\u52a8\u91cd\u8bd5\u4f5c\u4e3a\u4e00\u9879\u529f\u80fd\u8fdb\u884c\u901a\u544a\u3002\u4e3a\u4e86\u786e\u5b9a\u91cd\u8bd5\u673a\u5236\u662f\u5426\u6709\u95ee\u9898\uff0c\u6211\u4eec\u5c1d\u8bd5\u7981\u7528\u5b83-\u7ed3\u679c\u53d1\u73b0MongoDB\u4e8b\u52a1\u5ffd\u7565\u4e86retryWrites\u8bbe\u7f6e\uff0c\u5e76\u4e14\u4e0d\u7ba1\u600e\u6837\u90fd\u91cd\u8bd5\u3002\u6211\u4eec\u4e0d\u786e\u5b9a\u7528\u6237\u662f\u5426\u53ef\u4ee5\u89e3\u51b3\u6b64\u95ee\u9898\u3002\n\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528\u8bfb\u5173\u6ce8\u70b9\u5feb\u7167\u548c\u5199\u5173\u6ce8\u70b9\u591a\u6570\u8fd0\u884c\u7684\u6d4b\u8bd5\u6267\u884c\u4e86\u4e09\u4e2a\u4e8b\u52a1\uff0c\u5177\u6709\u4ee5\u4e0b\u4f9d\u8d56\u5173\u7cfb\u56fe\uff1a\n\u6700\u4e0a\u9762\u7684\u4e8b\u52a1\u5c062\u9644\u52a0\u5230\u6587\u686379\uff0c\u7d27\u968f\u5176\u540e\u7684\u662f\u4e2d\u95f4\u4e8b\u52a1\u7684\u9644\u52a05\u3002\u6211\u4eec\u53ef\u4ee5\u63a8\u65ad\u8fd9\u4e9b\u5199\u5165\u6309\u6b64\u987a\u5e8f\u53d1\u751f\uff0c\u56e0\u4e3a\u89c2\u5bdf\u5230\u53e6\u4e00\u4e2a\u4e8b\u52a1(\u4e0d\u662f\u6b64\u5468\u671f\u7684\u4e00\u90e8\u5206)\uff1a\n\u5728\u8fd9\u4e9b\u5199\u5165\u4e4b\u540e\uff0c\u5e95\u90e8\u4e8b\u52a1\u5c065\u9644\u52a0\u5230\u6587\u686377\uff0c\u4e2d\u95f4\u4e8b\u52a1\u7684\u8bfb\u53d677\u6ca1\u6709\u89c2\u5bdf\u5230\u8fd9\u4e00\u70b9\u3002\u4f46\u662f\uff0c\u8ffd\u52a05\u5bf9\u4e8e\u6700\u4e0a\u9762\u7684\u4e8b\u52a1\u662f\u53ef\u89c1\u7684\uff01\n\u56e0\u4e3a\u8fd9\u4e2a\u5faa\u73af\u6b63\u597d\u5305\u542b\u4e00\u4e2a\u53cd\u4f9d\u8d56(RW)\u8fb9\u7f18\uff0c\u6240\u4ee5\u5b83\u5f88\u53ef\u80fd\u662fAdya\u7684G-Single\u5f02\u5e38(\u4e5f\u79f0\u4e3a\u8bfb\u504f\u5dee)\u7684\u4e00\u4e2a\u4f8b\u5b50\u3002\u672c\u8d28\u4e0a\uff0c\u4e2d\u95f4\u4e8b\u52a1\u89c2\u5bdf\u5230\u903b\u8f91\u4e0a\u4f18\u5148\u4e8b\u52a1\u7684\u90e8\u5206(\u4f46\u4e0d\u662f\u5168\u90e8)\u5f71\u54cd\u3002\u5feb\u7167\u7981\u6b62\u8bfb\u53d6\u504f\u5dee\u3002\n..", "note_en": "MongoDB is a distributed document database which claims to offer \u201camong the strongest data consistency, correctness, and safety guarantees of any database available today\u201d, with \u201cfull ACID transactions\u201d. Jepsen evaluated MongoDB version 4.2.6, and found that even at the strongest levels of read and write concern, it failed to preserve snapshot isolation. Instead, Jepsen observed read skew, cyclic information flow, duplicate writes, and internal consistency violations. Weak defaults meant that transactions could lose writes and allow dirty reads, even downgrading requested safety levels at the database and collection level. Moreover, the  snapshot read concern did not guarantee snapshot unless paired with write concern  majority\u2014even for read-only transactions. These design choices complicate the safe use of MongoDB transactions. This work was performed independently, without compensation, and conducted in accordance with the  Jepsen ethics policy. MongoDB, Fauna, and YugaByte, all mentioned in this report, have previously engaged Jepsen for paid analyses.\n MongoDB is a popular distributed document database. It offers  replication via a  homegrown consensus protocol which draws inspiration from  Raft, and can distribute data across shards via  mongos. We previously evaluated MongoDB at versions  2.4.3,  2.6.7,  3.4.0-rc3, and  3.6.4.\n Our most recent report on  MongoDB 3.6.4 focused on causal consistency and linearizability in sharded collections. We found that sharded clusters appeared to offer linearizable reads, writes, and compare-and-set operations against single documents, so long as users ran with  read concern  linearizable and  write concern  majority. However, any weaker level of write concern resulted in the loss of committed writes. MongoDB\u2019s default level of write concern was (and remains) acknowledgement by a single node, which means MongoDB may lose data by default. Although the  write concern documentation does not make this clear, the  rollback documentation states:\n With the default write concern, data may be rolled back if the primary steps down before the write operations have replicated to any of the secondaries.\n Similarly, MongoDB\u2019s default level of read concern allows aborted reads: readers can observe state that is not fully committed, and could be discarded in the future. As the  read isolation consistency docs note, \u201cRead uncommitted is the default isolation level\u201d.\n We found that due to these weak defaults, MongoDB\u2019s causal sessions  did not preserve causal consistency by default: users needed to specify both write and read concern  majority (or higher) to actually get causal consistency. MongoDB  closed the issue, saying it was working as designed, and updated their  isolation documentation to note that even though MongoDB offers \u201ccausal consistency in client sessions\u201d, that guarantee does not hold unless users take care to use both read and write concern  majority. A  detailed table now shows the properties offered by weaker read and write concerns.\n Curiously, MongoDB omitted any mention of these findings in their  MongoDB and Jepsen page. Instead, that page discusses only passing results, makes no mention of read or write concern, buries the actual report in a footnote, and goes on to claim:\n MongoDB offers among the strongest data consistency, correctness, and safety guarantees of any database available today.\n We encourage MongoDB to report Jepsen findings in context: while MongoDB  did appear to offer per-document linearizability and causal consistency with the strongest settings, it also  failed to offer those properties in most configurations. We think users might want to be aware that their database could lose data by default, but MongoDB\u2019s summary of our work omits any mention of this behavior.\n  So, does MongoDB offer \u201camong the strongest data consistency, correctness, and safety guarantees\u201d? Past work suggests that for individual document operations, the answer is, \u201cyes; MongoDB offers per-document linearizability with the strongest settings, but not by default\u201d. However in 2018, MongoDB introduced  multi-document transactions\u2014limited to within a shard\u2014and in 2019, extended those transactions across shards. What safety properties do these transactions provide?\n The  MongoDB home page proudly advertises \u201cfull ACID transactions\u201d. The  transactions page states that MongoDB is \u201cthe only database that fully combines the power of the document model and a distributed systems architecture with ACID guarantees,\u201d a combination also claimed by  CosmosDB,  DynamoDB,  FaunaDB,  Oracle NoSQL,  OrientDB,  RavenDB,  SAP HANA,  YugaByte DB, et al.\n The  MongoDB architecture guide promises ACID transactions \u201cmaintain the same data integrity guarantees you are used to in traditional databases\u2026\u201d, and that MongoDB offers \u201cstrong consistency by design\u201d, but offers no more specific claims. The  ACID whitepaper clarifies that MongoDB transactions offer  snapshot isolation: a reasonably strong model which constitutes the baseline level of consistency for systems like  PostgreSQL. The whitepaper states:\n \u2026 snapshot read isolation ensures queries and aggregations executed within a read-only transaction will operate against a globally consistent snapshot of the database across each primary replica of a sharded cluster.\n MongoDB  repeatedly  summarizes snapshot isolation as \u201ctransactions provide a consistent view of data, and enforce all-or-nothing execution to maintain data integrity\u201d. This is a concise and intuitive summary of snapshot isolation, but we should note that a \u201cconsistent view\u201d under snapshot isolation may still be surprising: as Fekete, O\u2019Neil, and O\u2019Neil  wrote in 2004, read-only transactions can observe nonserializable behavior under snapshot isolation. Nor does snapshot isolation necessarily maintain data integrity: in their  1995 paper defining snapshot isolation, Berenson, Bernstein, et al.\u00a0provided examples of applications whose integrity constraints could be violated under snapshot isolation\u2014for instance, due to write skew.\n  We designed a  test suite using the  Jepsen distributed systems testing library, and used it to evaluate transactional safety in MongoDB 4.2.6. Our tests installed MongoDB\u2019s official Debian packages on clusters of nine Debian 9 nodes. We tested both in LXC and EC2; both exhibited similar behavior. As per the  deployment guidelines, we built  two-shard clusters, with both shards and the  configsvr metadata system running as three-node  replica sets. All nine nodes ran  an instance of  mongos, which serves as the frontend to sharded MongoDB clusters.\n Our  test workload involved transactions over a rotating pool of documents in a single MongoDB collection, each document containing a single array of integers. Each transaction  performed one to four operations over those documents: either reading a single document by primary key  _id, or appending (using  $push) a unique integer to a single document\u2019s  value array, again by  _id. We  sharded the collection by  _id.\n Using  Elle, a new transaction analysis tool developed in collaboration with UC Santa Cruz\u2019s  Peter Alvaro, Jepsen automatically inferred dependencies between these transactions, and searched for cycles in that graph to identify isolation anomalies. Additional techniques checked for aborted and intermediate reads, as well as other non-cyclic anomalies.\n During some of these tests, we introduced  network partitions, targeted to isolate MongoDB primary nodes.\n   We began by running our tests without transactions to get a baseline: each Jepsen \u201ctransaction\u201d performed only a single read or append operation without using the session or transaction APIs. Since we know MongoDB loses updates with any setting less than  majority, and exhibits stale reads without read concern  linearizable, we set write concern  majority and read concern  linearizable  on the client\u2019s  database handle. The resulting histories appeared consistent with snapshot isolation.\n We then wrapped those single operations in transactions, and a surprising behavior appeared: with network partitions, transactions appeared to lose acknowledged writes. For instance, consider  this history, where in 30 seconds, updates to eight documents were successfully acknowledged, then disappeared. Here is the history of reads for document 555:\n  Clients observed a monotonically growing list of elements until  [1 2 3 4 5 6 7], at which point the list reset to  [], and started afresh with  [8]. This could be an example of MongoDB  rollbacks, which is a fancy way of saying \u201cdata loss\u201d.\n This is bad, but a more subtle question arises:  why were we able to read these values at all? After all, read concern  linearizable  is supposed to show only majority-acknowledged (i.e.\u00a0durable) writes. The answer is a surprising\u2014 but documented\u2014MongoDB design choice:\n Operations in a transaction use the transaction-level read concern. That is, any read concern set at the collection and database level is ignored inside the transaction.\n The received wisdom in the database community is that MongoDB has historically resisted raising the default level of read and write safety because doing so would impact production users who have become accustomed to faster, occasionally unsafe defaults, and because data loss might not be significant enough to warrant the increased latency, throughput, and capital expenditure entailed by stronger safety settings. MongoDB\u2019s researchers  reported in VLDB that:\n \u2026 users would prefer, of course, to use readConcern level \u201cmajority\u201d and writeConcern w:\u201cmajority\u201d, since everyone wants safety. However, when users find stronger consistency levels to be too slow, they will switch to using weaker consistency levels. These decisions are often based on business requirements and SLAs rather than granular developer needs. As we argue throughout this paper, the decision to use weaker consistency levels often works in practice because failovers are infrequent and data loss from failovers is usually small.\n However, transactions are an entirely new feature, and users presumably  expect to trade off some speed in exchange for improved safety guarantees. A reasonable user might expect that the default safety levels for transactions provide, as promised, snapshot isolation\u2014or, at the very least, the same level of read concern that the user has already requested from the databases or collections involved. Instead, transactions without an explicit read concern  downgrade any requested read concern at the database or collection level to a default level of  local,  which offers \u201cno guarantee that the data has been written to a majority of replicas (i.e. may be rolled back).\u201d\n So: users should be careful to use the  snapshot level of read concern with every transaction which requires snapshot isolation. The  documentation confirms: \u201cRead concern \u2018snapshot\u2019 returns data from a snapshot of majority committed data\u2026\u201d which makes sense, and then continues: \u201c if the transaction commits with write concern \u2018majority\u2019\u201d, which does not. Specifically:\n If the transaction does not use write concern \u201cmajority\u201d for the commit, the \u201csnapshot\u201d read concern provides no guarantee that read operations used a snapshot of majority-committed data.\n \u201cWhat is the point,\u201d an astute reader might ask, \u201cof having a  snapshot read concern which does not provide snapshot isolated reads?\u201d An even more astute reader, having observed a pattern, might inquire about the  default level of write concern.\n If the transaction-level write concern and the session-level write concern are unset, transaction-level write concern defaults to the client-level write concern. By default, client-level write concern is w: 1.\n In order to obtain snapshot isolation, users must be careful not only to set the read concern to  snapshot for each transaction, but  also to set write concern for each transaction to  majority.\n Astonishingly, this applies even to  read-only transactions. In  this test run, we set read concern  snapshot and write concern  majority on single-operation write transactions, and for single-operation read transactions, set only read concern  snapshot. When a network partition occurred, reads observed divergent timelines:\n  These updates weren\u2019t  lost exactly\u2014the transactions which wrote 1, 5, and 6 timed out, but their effects being both visible and not visible to reads implies that at least one of these timelines was an instance of aborted read.\n This behavior might be surprising, but to MongoDB\u2019s credit, most of this behavior is  clearly laid out in the transactions documentation. The question is whether users are closely reading that documentation, versus relying on marketing claims, or assumptions like \u201cusing read concern  snapshot means reading a committed snapshot\u201d. We might also ask whether users can be expected to remember to apply these settings to every transaction which requires them. After all, MongoDB offers database and collection-level safety settings precisely so users can  assume all operations interacting with those databases or collections use those settings; ignoring read and write concern settings when users perform (presumably) safety-critical operations is surprising!\n  In subsequent tests, we used read concern  linearizable and write concern  majority for all single-operation reads and writes, and read concern  snapshot and write concern  majority for multi-operation transactions. In healthy clusters (e.g.\u00a0without faults), cursory testing appeared consistent with snapshot isolation.\n However, we note that while MongoDB\u2019s home page prominently  claims to offer \u201cfull ACID transactions\u201d, which one might assume means that transactions are fully atomic, isolated, consistent, and durable. This is not exactly the case: transactions under snapshot isolation are not, as  previously noted, fully isolated.\n For example, consider  this test run, which used read concern  snapshot, write concern  majority, and did not involve network partitions or other exogenous faults. The resulting history does not appear to violate snapshot isolation, but nonetheless exhibits cyclic transaction dependencies, like the following:\n  One transaction appends 1 to document 1047, and reads document 1045, finding it empty. The other appends 1 to document 1045, and reads 1047, finding it empty. Lines marked  rw denote these read-write  anti-dependencies. These transactions cannot possibly be isolated: if the top transaction executed first, in isolation, its write to 1047 would have been visible to the second\u2014and vice-versa. Since these transactions didn\u2019t write to the same documents, they are allowed (under snapshot isolation) to execute concurrently.\n  Other cycles are more complex. Here, for instance, is a cluster of twelve transactions, again executed under MongoDB\u2019s strongest possible safety settings. Each of these transactions depends (in various ways) on every other. Arrows labeled  ww show a write-write dependency, wherein one transaction overwrote another\u2019s write. Those with  wr show a write-read dependency: one transaction read another\u2019s write.\n Or consider this  cluster of 123 transactions, all of which appeared to execute before\u2014but also after!\u2014every other. Is this cluster \u201cfull ACID\u201d? Perhaps, but if so, we must accept that the \u201cI\u201d in ACID means only  partial isolation, or \u201cfull\u201d means somewhat less than full.\n  These anomalies are not rare.  This history, for example, contains roughly 100 transactions per second, and we identified 1461 transactions (out of 13914 total) with cyclic dependencies. Roughly 10% of transactions exhibited anomalies during normal operation, without faults.\n It\u2019s important to remember that just because we  can detect anomalies in this simple workload doesn\u2019t mean those anomalies  matter to users. Concurrency could be low enough that concurrency control is largely unnecessary. Some sets of transactions can be proven to execute serializably under snapshot isolation\u2014e.g., when their write sets intersect. Others exhibit nonserializable anomalies, but don\u2019t violate application-level consistency constraints. Still others  do violate constraints, but not frequently enough for users to notice or care. For these purposes, snapshot isolation is good enough!\n  When we introduced network failures into our tests, we encountered (as one would expect)  a variety of client errors. The MongoDB  transaction documentation says:\n When a transaction aborts, all data changes made in the transaction are discarded without ever becoming visible. For example, if any operation in the transaction fails, the transaction aborts and all data changes made in the transaction are discarded without ever becoming visible.  1\n However, the converse is not necessarily true:  some transaction error messages seem to indicate a transaction has aborted, but do not. For example, a  TransactionCoordinatorSteppingDown exception may actually mean the transaction has committed. Likewise,  Command failed with error 6 (HostUnreachable): &#39;unable to initialize targeter for write op for collection jepsendb.jepsencoll :: caused by :: Connection refused&#39; also appears to denote an indeterminate failure. We repeatedly encountered these errors in our tests, only to find that their writes were visible to later reads.\n This is not necessarily a  bug\u2014there will always be a class of errors in any distributed system which could indicate either success or failure. However, it  is helpful when those errors are clearly marked, or offer textual guidance. Error 6, like most of the errors we encountered, is  undocumented; only a few codes  remain in the official docs, and Google has  little to say. Complete error documentation, perhaps with a table of which codes indicate determinate vs indeterminate failures, could offer a pragmatic alternative to error message haruspicy.\n  With errors interpreted correctly, we found that network partitions could cause MongoDB to duplicate the effects of transactions. Despite never appending the same value to an array twice, we repeatedly observed arrays with multiple copies of the same element. For example, take  this test run, which contained the following transaction:\n  Here, element 6 appeared twice in a read of document 436. This duplication raises the possibility that the transaction which wrote 6 to key 436 occurred both before  and after other transactions; depending on which (if any) interpretation one chooses, the resulting history also exhibits G-single and G2 anti-dependency cycles. This anomaly occurred even with read concern  snapshot and write concern  majority, which suggests that even at the strongest settings, MongoDB transactions do not provide snapshot isolation.\n This behavior could point to an improper transaction retry mechanism\u2014MongoDB advertises  automatic retries as a feature. To identify whether the retry mechanism might be at fault, we attempted to disable it\u2014only to discover that MongoDB transactions  ignore the  retryWrites setting, and  retry regardless. We are unsure if users can work around this behavior.\n  In  this case, a test running with read concern  snapshot and write concern  majority executed a trio of transactions with the following dependency graph:\n  The topmost transaction appended 2 to document 79, which was followed by the middle transaction\u2019s append of 5. We can infer these writes took place in this order because another transaction (not part of this cycle) observed:\n  Following these writes, the bottom transaction appended 5 to document 77, which was  not observed by the middle transaction\u2019s read of 77. However, that append of 5  was visible to the topmost transaction!\n Because this cycle contains exactly one anti-dependency (rw) edge, it\u2019s likely  2 an example of  Adya\u2019s G-single anomaly, also known as  read skew. In essence, the middle transaction observed some, but not all, effects of logically prior transactions. Read skew is prohibited by snapshot \n......", "posttime": "2020-05-16 01:43:00", "source_domain": "news.ycombinator.com", "source_name": "Hacker News", "tags": "mongodb,\u6770\u666e\u68ee,jepsen,\u4e8b\u52a1", "title": "\u6770\u666e\u68ee\uff1aMongoDB 4.2.6", "title_en": "Jepsen: MongoDB 4.2.6", "transed": 1, "url": "http://jepsen.io/analyses/mongodb-4.2.6", "via": "", "real_tags": ["mongodb", "\u6770\u666e\u68ee", "jepsen", "\u4e8b\u52a1"]}, {"category": "", "categoryclass": "", "imagename": "74f8e4cb8f0ef2bac855a20b323f0b82.png", "infoid": 1002267, "ip": "", "isanchordig": 1, "ischecked": 1, "isdelete": 0, "isneo": 1, "mark": "", "name": "", "note": "\ud83e\udd17\u81ea\u7136\u8bed\u8a00\u5904\u7406\u662f\u4e00\u4e2a\u8f7b\u91cf\u7ea7\u4e14\u53ef\u6269\u5c55\u7684\u5e93\uff0c\u53ef\u4ee5\u65b9\u4fbf\u5730\u5171\u4eab\u548c\u8bbf\u95ee\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u6570\u636e\u96c6\u548c\u8bc4\u4f30\u6307\u6807\u3002\n\u81f4\u529b\u4e8e\u5927\u6570\u636e\u96c6\uff1aNLP\u81ea\u7136\u5c06\u7528\u6237\u4eceRAM\u5185\u5b58\u9650\u5236\u4e2d\u89e3\u653e\u51fa\u6765\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6240\u6709\u6570\u636e\u96c6\u90fd\u662f\u5728\u9a71\u52a8\u5668\u4e0a\u8fdb\u884c\u5185\u5b58\u6620\u5c04\u7684\u3002\nNLP\u76ee\u524d\u63d0\u4f9b\u5bf9\u7ea6100\u4e2aNLP\u6570\u636e\u96c6\u548c\u7ea610\u4e2a\u8bc4\u4f30\u6307\u6807\u7684\u8bbf\u95ee\uff0c\u65e8\u5728\u8ba9\u793e\u533a\u8f7b\u677e\u6dfb\u52a0\u548c\u5171\u4eab\u65b0\u7684\u6570\u636e\u96c6\u548c\u8bc4\u4f30\u6307\u6807\u3002\nNLP\u8d77\u6e90\u4e8e\u4ee4\u4eba\u60ca\u53f9\u7684TensorFlow\u6570\u636e\u96c6\u7684\u4e00\u4e2a\u5206\u652f\uff0cHuggingFace\u56e2\u961f\u975e\u5e38\u611f\u8c22TensorFlow\u6570\u636e\u96c6\u56e2\u961f\u6784\u5efa\u4e86\u8fd9\u4e2a\u4ee4\u4eba\u60ca\u53f9\u7684\u5e93\u3002\u6709\u5173NLP\u548cTFD\u4e4b\u95f4\u5dee\u5f02\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u53ef\u4ee5\u5728NLP\u548cTFD\u4e4b\u95f4\u7684\u4e3b\u8981\u5dee\u5f02\u4e00\u8282\u4e2d\u627e\u5230\u3002\nNLP\u53ef\u4ee5\u4ecePyPI\u5b89\u88c5\uff0c\u5e76\u4e14\u5fc5\u987b\u5b89\u88c5\u5728\u865a\u62df\u73af\u5883\u4e2d(\u4f8b\u5982venv\u6216conda)\u3002\n\u66f4\u65b0\u5b58\u50a8\u5e93\u65f6\uff0c\u5e94\u6309\u5982\u4e0b\u65b9\u5f0f\u5347\u7ea7NLP\u5b89\u88c5\u53ca\u5176\u4f9d\u8d56\u9879\uff1a\n\u5982\u679c\u60a8\u8ba1\u5212\u5bf9PyTorch(1.0+)\u3001TensorFlow(2.2+)\u6216\u718a\u732b\u4f7f\u7528NLP\uff0c\u8fd8\u5e94\u8be5\u5b89\u88c5PyTorch\u3001TensorFlow\u6216\u718a\u732b\u3002\nimport NLP#\u6253\u5370\u6240\u6709\u53ef\u7528\u7684\u6570\u636e\u96c6\u6253\u5370(\u6570\u636e\u96c6\u3002NLP\u4e2d\u6570\u636e\u96c6\u7684ID\u3002list_Datasets())#\u52a0\u8f7d\u6570\u636e\u96c6\u5e76\u6253\u5370\u8bad\u7ec3\u96c6\u4e2d\u7684\u7b2c\u4e00\u4e2a\u793a\u4f8bteanDataset=nlp\u3002LOAD_DATASET(&#39\uff1bTEAND&39\uff1b)PRINT(LOAD_DATASET[&#39\uff1bTEAND&39\uff1b][0])#\u5217\u51fa\u6240\u6709\u53ef\u7528\u7684\u6307\u6807\u6253\u5370(\u6307\u6807\u3002NLP\u4e2d\u6307\u6807\u7684ID\u3002list_metrics())#\u52a0\u8f7d\u6307\u6807QUAND_METRICS=nlp\u3002Load_Metric(&#39\uff1b\u5c0f\u961f&#39\uff1b)\n\u73b0\u5728\uff0c\u6700\u597d\u7684NLP\u4ecb\u7ecd\u662f\u6309\u7167Google Colab\u4e2d\u7684\u6559\u7a0b\u8fdb\u884c\u64cd\u4f5c\uff0c\u8be5\u6559\u7a0b\u4f4d\u4e8e\u4ee5\u4e0b\u4f4d\u7f6e\uff1a\n\u5982\u679c\u60a8\u719f\u6089\u4f1f\u5927\u7684TensorFlow\u6570\u636e\u96c6\uff0c\u4ee5\u4e0b\u662fNLP\u548cTFD\u4e4b\u95f4\u7684\u4e3b\u8981\u533a\u522b\uff1a\nNLP\u4e2d\u7684\u811a\u672c\u4e0d\u5728\u5e93\u4e2d\u63d0\u4f9b\uff0c\u800c\u662f\u6839\u636e\u8bf7\u6c42\u8fdb\u884c\u67e5\u8be2\u3001\u4e0b\u8f7d/\u7f13\u5b58\u548c\u52a8\u6001\u52a0\u8f7d\u3002\nNLP\u8fd8\u4ee5\u4e0e\u6570\u636e\u96c6\u7c7b\u4f3c\u7684\u65b9\u5f0f\u63d0\u4f9b\u8bc4\u4f30\u6307\u6807\uff0c\u5373\u4f7f\u7528\u7edf\u4e00API\u52a8\u6001\u5b89\u88c5\u811a\u672c\u3002\u8fd9\u6837\u5c31\u53ef\u4ee5\u8bbf\u95ee\u57fa\u51c6\u6570\u636e\u96c6\u548c\u57fa\u51c6\u6307\u6807\u5bf9\uff0c\u4f8b\u5982\uff0c\u9488\u5bf9\u73ed\u7ec4\u6216\u80f6\u6c34\u4e4b\u7c7b\u7684\u57fa\u51c6\u3002\nNLP\u7684\u540e\u7aef\u5e8f\u5217\u5316\u57fa\u4e8eApache Arrow/Parquet\uff0c\u800c\u4e0d\u662fTF Records\uff0c\u5e76\u5229\u7528Python\u6570\u636e\u7c7b\u83b7\u53d6\u4fe1\u606f\u548c\u5177\u6709\u4e00\u4e9b\u4e0d\u540c\u7279\u6027\u7684\u7279\u6027(\u6211\u4eec\u5927\u591a\u4e0d\u8fdb\u884c\u7f16\u7801\uff0c\u5e76\u5c06\u539f\u59cb\u6570\u636e\u5c3d\u53ef\u80fd\u591a\u5730\u5b58\u50a8\u5728\u540e\u7aef\u5e8f\u5217\u5316\u7f13\u5b58\u4e2d)\u3002\nNLP\u7684\u9762\u5411\u7528\u6237\u7684DataSet\u5bf9\u8c61\u4e0d\u662ftf.data.Dataset\uff0c\u800c\u662f\u4e00\u4e2a\u5185\u7f6e\u7684\u4e0e\u6846\u67b6\u65e0\u5173\u7684DataSet\u7c7b\uff0c\u5176\u65b9\u6cd5\u7075\u611f\u6765\u81ea\u6211\u4eec\u5728tf.data\u4e2d\u7684\u559c\u597d(\u5982map()\u65b9\u6cd5)\u3002\u5b83\u57fa\u672c\u4e0a\u5305\u88c5\u4e86\u4e00\u4e2a\u5185\u5b58\u6620\u5c04\u7684\u7bad\u5934\u8868\u7f13\u5b58\u3002\n\u4e0eTensorFlow\u6570\u636e\u96c6\u7c7b\u4f3c\uff0cNLP\u662f\u4e0b\u8f7d\u548c\u51c6\u5907\u516c\u5171\u6570\u636e\u96c6\u7684\u5b9e\u7528\u7a0b\u5e8f\u5e93\u3002\u6211\u4eec\u4e0d\u6258\u7ba1\u6216\u5206\u53d1\u8fd9\u4e9b\u6570\u636e\u96c6\uff0c\u4e0d\u4fdd\u8bc1\u5b83\u4eec\u7684\u8d28\u91cf\u6216\u516c\u5e73\u6027\uff0c\u4e5f\u4e0d\u58f0\u79f0\u60a8\u62e5\u6709\u4f7f\u7528\u8be5\u6570\u636e\u96c6\u7684\u8bb8\u53ef\u8bc1\u3002\u60a8\u6709\u8d23\u4efb\u786e\u5b9a\u60a8\u662f\u5426\u6709\u6743\u5728\u6570\u636e\u96c6\u7684\u8bb8\u53ef\u4e0b\u4f7f\u7528\u8be5\u6570\u636e\u96c6\u3002\n\u5982\u679c\u60a8\u662f\u6570\u636e\u96c6\u6240\u6709\u8005\uff0c\u5e76\u4e14\u5e0c\u671b\u66f4\u65b0\u6570\u636e\u96c6\u7684\u4efb\u4f55\u90e8\u5206(\u63cf\u8ff0\u3001\u5f15\u7528\u7b49)\uff0c\u6216\u8005\u4e0d\u5e0c\u671b\u60a8\u7684\u6570\u636e\u96c6\u5305\u542b\u5728\u6b64\u5e93\u4e2d\uff0c\u8bf7\u901a\u8fc7GitHub\u95ee\u9898\u8054\u7cfb\u3002\u611f\u8c22\u60a8\u5bf9ML\u793e\u533a\u7684\u8d21\u732e\uff01\n\u5982\u679c\u4f60\u6709\u5174\u8da3\u4e86\u89e3\u66f4\u591a\u5173\u4e8e\u8d1f\u8d23\u4efb\u7684\u4eba\u5de5\u667a\u80fd\u5b9e\u8df5\uff0c\u5305\u62ec\u516c\u5e73\uff0c\u8bf7\u53c2\u89c1\u8c37\u6b4c\u4eba\u5de5\u667a\u80fd\u8d1f\u8d23\u4efb\u7684\u4eba\u5de5\u667a\u80fd\u5b9e\u8df5\u3002", "note_en": "\ud83e\udd17  nlp is a lightweight and extensible library to easily share and access datasets and evaluation metrics for Natural Language Processing (NLP).\n  Strive on large datasets:  nlp naturally frees the user from RAM memory limitation, all datasets are memory-mapped on drive by default.\n nlp currently provides access to ~100 NLP datasets and ~10 evaluation metrics and is designed to let the community easily add and share new datasets and evaluation metrics.\n nlp originated from a fork of the awesome   TensorFlow Datasets and the HuggingFace team want to deeply thank the TensorFlow Datasets team for building this amazing library. More details on the differences between  nlp and  tfds can be found in the section  Main differences between  nlp and  tfds.\n   nlp can be installed from PyPi and has to be installed in a virtual environment (venv or conda for instance)\n     When you update the repository, you should upgrade the nlp installation and its dependencies as follows:\n   If you plan to use  nlp with PyTorch (1.0+), TensorFlow (2.2+) or pandas, you should also install PyTorch, Tensorflow or pandas.\n     import  nlp # Print all the available datasets print( dataset. id  for  dataset  in  nlp. list_datasets()) # Load a dataset and print the first examples in the training set squad_dataset  =  nlp. load_dataset( &#39;squad&#39;) print( squad_dataset[ &#39;train&#39;][ 0]) # List all the available metrics print( metric. id  for  metric  in  nlp. list_metrics()) # Load a metric squad_metric  =  nlp. load_metric( &#39;squad&#39;)\n Now the best introduction to  nlp is to follow the tutorial in Google Colab which is here:\n  If you are familiar with the great  Tensorflow Datasets, here are the main differences between  nlp and  tfds:\n the scripts in  nlp are not provided within the library but are queried, downloaded/cached and dynamically loaded upon request\n nlp also provides evaluation metrics in a similar fashion to the datasets, i.e. as dynamically installed scripts with a unified API. This gives access to the pair of a benchmark dataset and a benchmark metric for instance for benchmarks like SQuAD or GLUE.\n the backend serialization of  nlp is based on Apache Arrow/Parquet instead of TF Records and leverage python dataclasses for info and features with some diverging features (we mostly don&#39;t do encoding and store the raw data as much as possible in the backend serialization cache)\n the user-facing dataset object of  nlp is not a  tf.data.Dataset but a built-in framework-agnostic dataset class with methods inspired by what we like in tf.data (like a map() method). It basically wraps a memory-mapped Arrow table cache.\n  Similarly to Tensorflow Dataset,  nlp is a utility library that downloads and prepares public datasets. We do not host or distribute these datasets, vouch for their quality or fairness, or claim that you have license to use the dataset. It is your responsibility to determine whether you have permission to use the dataset under the dataset&#39;s license.\n If you&#39;re a dataset owner and wish to update any part of it (description, citation, etc.), or do not want your dataset to be included in this library, please get in touch through a GitHub issue. Thanks for your contribution to the ML community!\n If you&#39;re interested in learning more about responsible AI practices, including fairness, please see Google AI&#39;s Responsible AI Practices.", "posttime": "2020-05-16 01:42:26", "source_domain": "news.ycombinator.com", "source_name": "Hacker News", "tags": "\u62e5\u62b1,datasets,nlp", "title": "NLP\uff1a\u4e00\u4e2a\u6765\u81ea\u62e5\u62b1\u8138\u7684\u65b0\u6570\u636e\u96c6\u548c\u5ea6\u91cf\u5e93", "title_en": "NLP: A new datasets and metrics library from Hugging Face", "transed": 1, "url": "https://github.com/huggingface/nlp", "via": "", "real_tags": ["\u62e5\u62b1", "datasets", "nlp"]}, {"category": "", "categoryclass": "", "imagename": "9d0450454c551c74df35396ba197f0fe.jpg", "infoid": 1002266, "ip": "", "isanchordig": 1, "ischecked": 1, "isdelete": 0, "isneo": 1, "mark": "", "name": "", "note": "\u5728\u7269\u7406\u4e16\u754c\u4e2d\uff0c\u7269\u4f53\u7ecf\u5e38\u4ee5\u6709\u5e8f\u7684\u65b9\u5f0f\u76f8\u4e92\u63a8\u5f00\u3002\u60f3\u60f3\u770b\uff0c\u5728\u78c1\u573a\u7684\u5f71\u54cd\u4e0b\uff0c\u94c1\u5c51\u5f62\u6210\u7684\u5bf9\u79f0\u56fe\u6848\uff0c\u6216\u8005\u662f\u6b63\u5728\u7ec3\u4e60\u793e\u4ea4\u8ddd\u79bb\u7684\u53c2\u89c2\u8005\u7684\u5747\u5300\u95f4\u9694\u3002\n\u5f53\u6570\u5b66\u5bb6\u89c2\u5bdf\u6570\u5b57\u7ebf\u65f6\uff0c\u4ed6\u4eec\u770b\u5230\u7684\u662f\u540c\u4e00\u7c7b\u578b\u7684\u8d8b\u52bf\u3002\u4ed6\u4eec\u770b\u7740\u8868\u793a\u6b63\u8d1f\u8ba1\u6570\u7684\u523b\u5ea6\u7ebf\uff0c\u611f\u89c9\u5230\u4e00\u79cd\u5c06\u5b83\u4eec\u4fdd\u6301\u5728\u76f8\u7b49\u95f4\u8ddd\u7684\u6570\u503c\u529b\u91cf\u3002\u8fd9\u5c31\u597d\u50cf\uff0c\u5c31\u50cf\u62e5\u6709\u5e7f\u9614\u9886\u5730\u7684\u7f8e\u6d32\u72ee\u4e00\u6837\uff0c\u6574\u6570\u4e4b\u95f4\u7684\u8ddd\u79bb\u4e0d\u80fd\u8d85\u8fc71\u4e2a\u5355\u4f4d\u3002\n\u6570\u5b57\u7ebf\u7684\u95f4\u8ddd\u662f\u6574\u4e2a\u6570\u8bba\u9886\u57df\u4e2d\u53d1\u73b0\u7684\u73b0\u8c61\u7684\u6700\u57fa\u672c\u7684\u4f8b\u5b50\u3002\u5b83\u5728\u7814\u7a76\u7d20\u6570\u548c\u4e0d\u540c\u7c7b\u578b\u65b9\u7a0b\u7684\u89e3\u4e4b\u95f4\u7684\u5173\u7cfb\u65f6\u7a81\u7136\u51fa\u73b0\u3002\u6570\u5b66\u5bb6\u53ef\u4ee5\u901a\u8fc7\u91cf\u5316\u5b83\u4eec\u4e4b\u95f4\u7684\u4f5c\u7528\u529b\u6765\u66f4\u597d\u5730\u7406\u89e3\u8fd9\u4e9b\u91cd\u8981\u7684\u503c\u3002\n\u201c\u5177\u6709\u6570\u8bba\u610f\u4e49\u7684\u4e8b\u7269\u5f80\u5f80\u4f1a\u76f8\u4e92\u63a8\u5f00\u3002\u591a\u4f26\u591a\u5927\u5b66\u7684\u96c5\u5404\u5e03\u00b7\u9f50\u9ed8\u66fc(Jacob Tsimerman)\u8bf4\uff1a\u201c\u8fd9\u5c31\u662f\u6392\u65a5\u539f\u7406\u3002\u201d\u201c\u6211\u4eec\u8bd5\u56fe\u83b7\u5f97\u6392\u65a5\u539f\u7406\uff0c\u5e76\u5229\u7528\u5b83\u4eec\u6765\u83b7\u5f97\u5404\u79cd\u5176\u4ed6\u7ed3\u679c\u3002\u201d\n\u6570\u8bba\u4e2d\u7684\u8bb8\u591a\u91cd\u8981\u5de5\u4f5c\u90fd\u4e0e\u6392\u65a5\u539f\u7406\u5f71\u54cd\u591a\u9879\u5f0f\u3001\u7cfb\u6570\u96c6\u5408\u548c\u5347\u5e42\u53d8\u91cf\u7684\u65b9\u5f0f\u6709\u5173\u3002\u51e0\u5341\u5e74\u6765\uff0c\u6570\u5b66\u5bb6\u4eec\u4e00\u76f4\u8bd5\u56fe\u786e\u5b9a\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u65a5\u529b\u7684\u786e\u5207\u5927\u5c0f\u3002\n\u572812\u6708\u4e0b\u65ec\u53d1\u5e03\u5728\u7f51\u4e0a\u7684\u4e00\u4efd\u8bc1\u660e\u4e2d\uff0c\u591a\u4f26\u591a\u5927\u5b66\u7684\u97e6\u585e\u6797\u00b7\u8fea\u7c73\u7279\u7f57\u592b(Vesselin Dimitrov)\u6700\u7ec8\u505a\u5230\u4e86\u8fd9\u4e00\u70b9\u3002\n\u5251\u6865\u5927\u5b66\u7684P\u00e9ter Varj\u00fa\u5728\u7535\u5b50\u90ae\u4ef6\u4e2d\u8bf4\uff1a\u201c\u8fd9\u771f\u7684\u5f88\u58ee\u89c2\u3002\u201d\u201cVesselin\u7684\u60f3\u6cd5\u662f\u5168\u65b0\u7684\uff0c\u800c\u4e14\u5f88\u6f02\u4eae\u3002\u201d\n\u8fea\u7c73\u7279\u7f57\u592b\u89e3\u51b3\u7684\u95ee\u9898\uff0c\u88ab\u79f0\u4e3aSchinzel-Zassenhaus\u731c\u60f3\uff0c\u662f\u5173\u4e8e\u591a\u9879\u5f0f\u7684\u503c\u7684\u51e0\u4f55\u7684\u3002\u5b83\u9884\u6d4b\uff0c\u5f53\u4f60\u753b\u51fa\u67d0\u4e9b\u503c\u65f6\uff0c\u5b83\u4eec\u4f1a\u4ee5\u7cbe\u786e\u7684\u65b9\u5f0f\u5c55\u5f00\uff0c\u770b\u8d77\u6765\u5c31\u50cf\u662f\u5728\u76f8\u4e92\u63a8\u5f00\u3002\u8fea\u7c73\u7279\u7f57\u592b\u7684\u5de5\u4f5c\u7cbe\u786e\u5730\u91cf\u5316\u4e86\u8fd9\u79cd\u6269\u6563\uff0c\u8bc1\u660e\u4e86\u731c\u60f3\u662f\u6b63\u786e\u7684\u3002\u5b83\u8fd8\u63d0\u4f9b\u4e86\u5bf9\u6570\u5b57\u4f3c\u4e4e\u9075\u5b88\u7684\u89c4\u5f8b\u7684\u65b0\u89c1\u89e3\u3002\n\u9f50\u9ed8\u5c14\u66fc\u8bf4\uff1a\u201c\u6839\u636e\u6211\u4eec\u5bf9\u4ee3\u6570\u6570\u5b57\u7684\u7406\u89e3\uff0c\u8fd9\u4e00\u7ed3\u679c\u5728\u5730\u9762\u4e0a\u63d2\u4e0a\u4e86\u4e00\u9762\u65d7\u5e1c\u3002\u201d\n\u5728\u7814\u7a76\u591a\u9879\u5f0f\u65f6\uff0c\u6570\u5b66\u5bb6\u7279\u522b\u611f\u5174\u8da3\u7684\u662f\u5b83\u4eec\u7684\u201c\u6839\u201d\uff0c\u5373\u4f7f\u591a\u9879\u5f0f\u7b49\u4e8e\u96f6\u7684\u53d8\u91cf\u7684\u503c\u3002\u4e00\u4e2a\u591a\u9879\u5f0f\u7684\u6839\u548c\u5b83\u7684\u6b21\u6570\u4e00\u6837\u591a\uff0c\u4e5f\u5c31\u662f\u5b83\u7684\u6700\u5927\u6307\u6570\u7684\u503c\u4e00\u6837\u591a\u3002\u56e0\u6b64x 2\u22124\u6709\u4e24\u4e2a\u6839(2\u548c\u22122)\uff0c\u800cx 5\u22127 x 3+2 x 2\u22124 x\u22129\u6709\u4e94\u4e2a\u6839\u3002\n\u6570\u5b66\u5bb6\u60f3\u77e5\u9053\u591a\u9879\u5f0f\u7684\u6839\u662f\u5982\u4f55\u76f8\u4e92\u8054\u7cfb\u7684\u3002\u4f8b\u5982\uff0c\u5f53\u7ed8\u5236\u56fe\u5f62\u65f6\uff0c\u67d0\u4e9b\u591a\u9879\u5f0f\u7684\u6839\u6b63\u597d\u843d\u5728\u6b63\u591a\u8fb9\u5f62\u7684\u9876\u70b9\u4e0a-\u5b83\u4eec\u4ee5\u7cbe\u786e\u7684\u51e0\u4f55\u957f\u5ea6\u5206\u5f00\u3002\u6570\u5b66\u5bb6\u611f\u5174\u8da3\u7684\u662f\u5bfb\u627e\u6839\u4e4b\u95f4\u5176\u4ed6\u66f4\u5fae\u5999\u7684\u51e0\u4f55\u5173\u7cfb\u3002\n\u201c\u4f60\u80fd\u62ff\u5230\u4ec0\u4e48\u6837\u7684\u56fe\u6848\uff1f\u4f60\u80fd\u5f97\u5230\u4e00\u4e9b\u56fe\u6848\u5417\uff0c\u6216\u8005\u8fd9\u4e9b\u56fe\u6848\u6709\u6ca1\u6709\u4ec0\u4e48\u9650\u5236\uff1f\u201c\u3002\u5251\u6865\u5927\u5b66\u7684\u4f0a\u66fc\u7ebd\u5c14\u00b7\u5e03\u9c81\u62c9\u5fb7(Emmanuel Breuillard)\u8bf4\u3002\n\u8fea\u7c73\u7279\u7f57\u592b\u89e3\u51b3\u7684\u95ee\u9898\u6d89\u53ca\u5230\u4e00\u65cf\u7279\u522b\u91cd\u8981\u7684\u8868\u8fbe\u5f0f\u7684\u6839\uff0c\u79f0\u4e3a\u5272\u5706\u591a\u9879\u5f0f\u3002\u8fd9\u4e9b\u591a\u9879\u5f0f\u4e0d\u80fd\u5206\u89e3\u6210\u66f4\u5c0f\u7684\u591a\u9879\u5f0f\uff0c\u4f46\u4f60\u53ef\u4ee5\u7528\u5b83\u4eec\u6765\u6784\u5efa\u5176\u4ed6\u591a\u9879\u5f0f-\u5b83\u4eec\u5c31\u50cf\u591a\u9879\u5f0f\u5468\u671f\u8868\u4e2d\u7684\u5143\u7d20\u3002\u7b2c\u4e00\u4e2a\u4e5f\u662f\u6700\u7b80\u5355\u7684\u5272\u5706\u591a\u9879\u5f0f\u662fx\u22121\uff0c\u7b2c\u4e8c\u4e2a\u662fx+1\uff0c\u7b2c\u5341\u4e2a\u662fx4\u2212x3+x2\u2212x+1\u3002\u7136\u800c\uff0c\u4e0e\u5143\u7d20\u5468\u671f\u8868\u4e0d\u540c\u7684\u662f\uff0c\u5272\u5706\u591a\u9879\u5f0f\u7684\u5217\u8868\u662f\u6c38\u8fdc\u4e0d\u53d8\u7684\u3002\n\u5206\u5706\u591a\u9879\u5f0f\u7684\u6839\u9075\u5faa\u4e00\u79cd\u975e\u5e38\u7279\u6b8a\u7684\u51e0\u4f55\u6a21\u5f0f\u3002\u8981\u67e5\u770b\u5b83\uff0c\u8bf7\u4ece\u7a7a\u7684\u590d\u5e73\u9762\u5f00\u59cb\uff0c\u5728\u8be5\u5e73\u9762\u4e2d\uff0cx\u8f74\u7ed8\u5236\u5b9e\u6570\uff0cy\u8f74\u7ed8\u5236\u865a\u6570\u3002\u7136\u540e\u5728\u539f\u70b9\u5468\u56f4\u753b\u4e00\u4e2a\u534a\u5f84\u4e3a1\u7684\u5706\u3002\u8fd9\u662f\u5355\u4f4d\u5706\u3002\u5206\u5706\u591a\u9879\u5f0f\u7684\u6839\u90fd\u5728\u8fd9\u4e2a\u5706\u4e0a\u3002\u5b83\u4eec\u6709\u7740\u4e00\u4e2a\u4f18\u96c5\u7684\u540d\u5b57\uff1a\u201c\u56e2\u7ed3\u4e4b\u6839\u201d\u3002\n\u4f46\u662f\u5927\u591a\u6570\u591a\u9879\u5f0f\u90fd\u662f\u975e\u5272\u5706\u7684\uff0c\u5b83\u4eec\u7684\u6839\u4e5f\u4e0d\u662f\u5355\u4f4d\u6839\u3002\u8fd9\u51e0\u4e4e\u662f\u4f60\u80fd\u60f3\u51fa\u7684\u4efb\u4f55\u7cfb\u6570\u3001\u53d8\u91cf\u548c\u6307\u6570\u7684\u7ec4\u5408\u3002\n1965\u5e74\uff0cAndrzej Schinzel\u548cHans Zassenhaus\u9884\u6d4b\uff0c\u5272\u5706\u591a\u9879\u5f0f\u548c\u975e\u5272\u5706\u591a\u9879\u5f0f\u7684\u6839\u7684\u51e0\u4f55\u5f62\u72b6\u6709\u975e\u5e38\u7279\u6b8a\u7684\u4e0d\u540c\u3002\u53d6\u4efb\u4f55\u7b2c\u4e00\u4e2a\u7cfb\u6570\u4e3a1\u7684\u975e\u5206\u5706\u591a\u9879\u5f0f\uff0c\u753b\u51fa\u5b83\u7684\u6839\u3002\u6709\u4e9b\u4eba\u53ef\u80fd\u843d\u5728\u5355\u4f4d\u5708\u5185\uff0c\u6709\u4e9b\u4eba\u5c31\u5728\u5355\u4f4d\u5708\u5185\uff0c\u8fd8\u6709\u4e00\u4e9b\u4eba\u5728\u5355\u4f4d\u5708\u5916\u3002Schinzel\u548cZassenhaus\u9884\u6d4b\uff0c\u6bcf\u4e2a\u975e\u5272\u5706\u591a\u9879\u5f0f\u5fc5\u987b\u81f3\u5c11\u6709\u4e00\u4e2a\u6839\u5728\u5355\u4f4d\u5706\u4e4b\u5916\uff0c\u5e76\u4e14\u81f3\u5c11\u6709\u4e00\u6bb5\u6700\u5c0f\u8ddd\u79bb\u3002\n\u6216\u8005\uff0c\u7528\u6392\u65a5\u529b\u6765\u8868\u8ff0\u8f9b\u6cfd\u5c14-\u624e\u68ee\u8c6a\u65af\u731c\u60f3\uff0c\u5b83\u9884\u6d4b\uff0c\u975e\u5272\u5706\u591a\u9879\u5f0f\u7684\u6700\u5c0f\u6839-\u53ef\u80fd\u843d\u5728\u5355\u4f4d\u5706\u5185-\u6709\u6548\u5730\u5c06\u5176\u4ed6\u6839\u63a8\u5230\u5355\u4f4d\u5706\u4e4b\u5916\uff0c\u5c31\u50cf\u78c1\u94c1\u76f8\u4e92\u63a8\u5f00\u4e00\u6837\u3002\n\u5e03\u9c81\u4e9a\u5fb7\u8bf4\uff1a\u201c\u4f60\u53ef\u4ee5\u628a\u4e00\u4e2a\u591a\u9879\u5f0f\u7684\u6839\u60f3\u8c61\u6210\u5e26\u8d1f\u7535\u7684\u7c92\u5b50\uff0c\u5b83\u4eec\u76f8\u4e92\u6392\u65a5\uff0c\u968f\u7740\u8ddd\u79bb\u7684\u589e\u52a0\uff0c\u529b\u4f1a\u8870\u51cf\u3002\u201d\nSchinzel-Zassenhaus\u731c\u60f3\u751a\u81f3\u7cbe\u786e\u5730\u5b9a\u4e49\u4e86\u6392\u65a5\u529b\u5e94\u8be5\u6709\u591a\u5927\u3002\u201c\u5b83\u8bf4\u6709\u4e00\u79cd\u975e\u5e38\u7cbe\u786e\u7684\u3001\u53ef\u91cf\u5316\u7684\u611f\u89c9\uff0c\u5373\u6839\u4e0d\u53ef\u80fd\u90fd\u79bb\u5355\u4f4d\u5706\u5f88\u8fd1\uff0c\u201d\u9f50\u9ed8\u5c14\u66fc\u8bf4\u3002\n\u8fd9\u4e2a\u731c\u60f3\u7684\u4e3b\u8981\u9884\u6d4b\u6709\u4e00\u79cd\u7269\u7406\u65b9\u7a0b\u5f0f\u7684\u611f\u89c9\u3002\u5b83\u8bf4\uff0c\u6bcf\u4e2a\u975e\u5272\u5706\u591a\u9879\u5f0f\u90fd\u5e94\u8be5\u81f3\u5c11\u6709\u4e00\u4e2a\u6839\u5728\u5355\u4f4d\u5706\u4e4b\u5916\uff0c\u8ddd\u79bb\u7b49\u4e8e\u4e00\u4e2a\u5e38\u6570\u9664\u4ee5\u591a\u9879\u5f0f\u7684\u6b21\u6570\u3002\u8be5\u5e38\u91cf\u7684\u7cbe\u786e\u503c\u4e0d\u662f\u5173\u952e\u7684\uff0c\u6240\u4ee5\u4e3a\u4e86\u4e3e\u4f8b\uff0c\u5047\u8bbe\u5b83\u662f0.1\u3002\u5982\u679c\u6211\u4eec\u6709\u4e00\u4e2a23\u6b21\u7684\u975e\u5206\u5706\u591a\u9879\u5f0f\uff0c\u8fd9\u4e2a\u731c\u60f3\u9884\u6d4b\u5b83\u5728\u5355\u4f4d\u5706\u4e4b\u5916\u81f3\u5c11\u5e94\u8be5\u6709\u4e00\u4e2a\u68391/23\u3002\n\u8fd9\u662f\u4e00\u4e2a\u5f3a\u6709\u529b\u7684\u8bba\u65ad\uff0c\u4f46\u51e0\u5341\u5e74\u6765\uff0c\u6570\u5b66\u5bb6\u4eec\u53ea\u8bbe\u6cd5\u8bc1\u5b9e\u4e86\u731c\u60f3\u9884\u6d4b\u7684\u8f83\u5f31\u7248\u672c\u3002\nSchinzel\u548cZassenhaus\u81ea\u5df1\u8bc1\u660e\u4e86\u6bcf\u4e2a\u975e\u5206\u5706\u591a\u9879\u5f0f\u5728\u5355\u4f4d\u5706\u5916\u81f3\u5c11\u6709\u4e00\u4e2a1/4\u7684\u6839\uff0c\u63d0\u5347\u5230\u591a\u9879\u5f0f\u7684\u6b21\u6570(1/4d)\u3002\u7531\u4e8e\u5206\u6bcd\u4e2d\u6307\u6570\u7684\u5b58\u5728\uff0c\u8fd9\u4e2a\u8ddd\u79bb\u6bd4\u731c\u60f3\u7684\u8ddd\u79bb\u5c0f\u5f97\u591a\u3002\n\u5728\u63a5\u4e0b\u6765\u7684\u4e09\u5341\u5e74\u91cc\uff0c\u6570\u5b66\u5bb6\u4eec\u5bf9\u8f9b\u6cfd\u5c14\u548c\u624e\u68ee\u8c6a\u65af\u7684\u5de5\u4f5c\u8fdb\u884c\u4e86\u4e00\u7cfb\u5217\u7684\u6539\u8fdb\uff0c\u4f46\u8fdb\u5c55\u4ecd\u7136\u4e0d\u5b8c\u6574\u3002\u6570\u5b66\u5bb6\u8ba4\u4e3a\u6b63\u786e\u7684\u8ddd\u79bb\u5e94\u8be5\u662f\u4e00\u4e2a\u5c3a\u5bf8\uff0c\u4f46\u4ed6\u4eec\u53ea\u80fd\u8bc1\u660e\u5b83\u81f3\u5c11\u662f\u67d0\u4e2a\u8f83\u5c0f\u7684\u5c3a\u5bf8\u3002\u6570\u5b66\u5bb6\u4eec\u6839\u672c\u4e0d\u77e5\u9053\u8f9b\u6cfd\u5c14-\u624e\u68ee\u8c6a\u65af\u731c\u60f3\u6709\u591a\u96be\u89e3\uff0c\u4ed6\u4eec\u751a\u81f3\u5047\u8bbe\u5b83\u5b8c\u5168\u53ef\u4ee5\u89e3\u51b3\u3002\n\u8fea\u7c73\u7279\u7f57\u592b\u5728\u7535\u5b50\u90ae\u4ef6\u4e2d\u8bf4\uff1a\u201c\u5728\u627e\u5230\u89e3\u51b3\u65b9\u6848\u4e4b\u524d\uff0c\u4eba\u4eec\u6c38\u8fdc\u4e0d\u4f1a\u5728\u4e00\u5f00\u59cb\u5c31\u77e5\u9053(\u95ee\u9898\u7684)\u89e3\u51b3\u65b9\u6848\u4f1a\u53d8\u5f97\u591a\u4e48\u7b80\u5355\u6216\u590d\u6742\u3002\u201d\n\u901a\u5e38\uff0c\u5f53\u4e00\u4e2a\u7a81\u51fa\u7684\u6570\u5b66\u95ee\u9898\u957f\u671f\u60ac\u800c\u672a\u51b3\u65f6\uff0c\u8fd9\u662f\u56e0\u4e3a\u6570\u5b66\u5bb6\u53ea\u662f\u7f3a\u4e4f\u89e3\u51b3\u5b83\u6240\u9700\u7684\u6280\u672f\u3002\u5c3d\u7ba1\u4f60\u53ef\u80fd\u68a6\u60f3\u7740\u98de\u5411\u6708\u7403\uff0c\u4f46\u9664\u975e\u6709\u4eba\u53d1\u660e\u706b\u7bad\uff0c\u5426\u5219\u4f60\u662f\u4e0d\u4f1a\u5230\u8fbe\u90a3\u91cc\u7684\u3002\n\u4f46\u4e8b\u5b9e\u8bc1\u660e\uff0c\u8fd9\u4e2a\u95ee\u9898\u662f\u4e0d\u540c\u7684\u3002\u201c\u8fd9\u9879\u6280\u672f\u81f3\u5c11\u5df2\u7ecf\u670940\u5e74\u7684\u5386\u53f2\u4e86\uff0c\u201d\u9f50\u9ed8\u5c14\u66fc\u8bf4\u3002\n\u8fea\u7c73\u7279\u7f57\u592b\u628a\u4e00\u4e2a\u5173\u4e8e\u591a\u9879\u5f0f\u7684\u6839\u7684\u5927\u5c0f\u7684\u95ee\u9898\u8f6c\u5316\u4e3a\u4e00\u4e2a\u5173\u4e8e\u4e0e\u4e00\u4e2a\u88ab\u79f0\u4e3a\u5e42\u7ea7\u6570\u7684\u76f8\u5173\u4f46\u4e0d\u540c\u7c7b\u578b\u7684\u6570\u5b66\u5bf9\u8c61\u76f8\u5173\u7684\u503c\u7684\u5927\u5c0f\u7684\u95ee\u9898\u3002\u5e42\u7ea7\u6570\u5c31\u50cf\u4e00\u4e2a\u591a\u9879\u5f0f\uff0c\u53ea\u662f\u6709\u65e0\u9650\u591a\u9879\u3002\n\u829d\u52a0\u54e5\u5927\u5b66\u7684\u5f17\u5170\u514b\u00b7\u5361\u83b1\u52a0\u91cc(Frank Calegari)\u5728\u7535\u5b50\u90ae\u4ef6\u4e2d\u8bf4\uff1a\u201c\u5c31\u50cf\u6570\u5b66\u4e2d\u7ecf\u5e38\u53d1\u751f\u7684\u90a3\u6837\uff0c\u5173\u952e\u7684\u6d1e\u5bdf\u529b/\u7a81\u7834\u662f\u5c06\u4e24\u4e2a\u770b\u4f3c\u4e0d\u540c\u7684\u95ee\u9898\u8054\u7cfb\u8d77\u6765\u3002\u201d\n\u6570\u5b66\u5bb6\u4e60\u60ef\u4e8e\u5728\u591a\u9879\u5f0f\u548c\u5e42\u7ea7\u6570\u4e4b\u95f4\u8f7b\u677e\u5730\u79fb\u52a8\uff0c\u5e76\u5229\u7528\u5176\u4e2d\u4e00\u4e2a\u7684\u6027\u8d28\u6765\u5efa\u7acb\u53e6\u4e00\u4e2a\u7684\u6027\u8d28-\u4f46\u5728\u8fea\u7c73\u7279\u7f57\u592b\u4e4b\u524d\u7684\u6570\u5b66\u5bb6\u4eec\u5e76\u6ca1\u6709\u60f3\u8fc7\u7528\u8fd9\u79cd\u5bf9\u5e94\u6765\u89e3\u51b3\u8f9b\u6cfd\u5c14-\u624e\u68ee\u8c6a\u65af\u731c\u60f3(Schinzel-Zassenhaus Conjection)\u3002\n\u4e3a\u4e86\u8bc1\u660e\u4ed6\u60f3\u8981\u8bc1\u660e\u7684\u5173\u4e8e\u591a\u9879\u5f0f\u7684\u4e1c\u897f\uff0c\u8fea\u7c73\u7279\u7f57\u592b\u9700\u8981\u76f8\u5173\u7684\u5e42\u7ea7\u6570\u6709\u4e00\u4e2a\u7279\u5b9a\u7684\u3001\u672c\u8d28\u7684\u6027\u8d28\uff1a\u6240\u6709\u7684\u7cfb\u6570\u90fd\u9700\u8981\u662f\u6b63\u6574\u6570\u6216\u8d1f\u6574\u6570(\u6240\u4ee5\u6ca1\u6709\u5206\u6570)\u3002\u5f53\u8fea\u7c73\u7279\u7f57\u592b\u5f00\u59cb\u8fd9\u9879\u5de5\u4f5c\u65f6\uff0c\u6ca1\u6709\u660e\u663e\u7684\u65b9\u6cd5\u6765\u4fdd\u8bc1\u8fd9\u4e00\u70b9\u4f1a\u53d1\u751f\u3002\n\u4f46\u57282019\u5e7411\u6708\uff0c\u8fea\u7c73\u7279\u7f57\u592b\u5728\u201c\u6d4f\u89c8\u4ee3\u6570\u7ec4\u5408\u5b66\u7684\u51e0\u672c\u4e66\u548c\u51e0\u7bc7\u8bba\u6587\u201d\u65f6\uff0c\u610f\u8bc6\u5230\u6709\u4e00\u79cd\u65b9\u6cd5\u53ef\u4ee5\u62fc\u51d1\u51fa\u51e0\u4e2a\u4f17\u6240\u5468\u77e5\u7684\u5b9a\u7406\uff0c\u4ece\u800c\u5728\u975e\u5272\u5706\u591a\u9879\u5f0f\u53ca\u5176\u5e42\u7ea7\u6570\u4e4b\u95f4\u4ea7\u751f\u6b63\u786e\u7684\u5173\u7cfb\u3002\u4ed6\u53d6\u4e86\u4e00\u4e2a\u975e\u5272\u5706\u591a\u9879\u5f0f\uff0c\u627e\u51fa\u5b83\u7684\u6839\uff0c\u628a\u8fd9\u4e9b\u6839\u63d0\u5347\u5230\u4e0d\u540c\u7684\u5e42\uff0c\u4e58\u5728\u4e00\u8d77\uff0c\u7136\u540e\u53d6\u90a3\u4e2a\u4e58\u79ef\u7684\u5e73\u65b9\u6839\u3002\u7136\u540e\uff0c\u6700\u540e\uff0c\u57fa\u4e8e\u8fd9\u4e2a\u5e73\u65b9\u6839\uff0c\u4ed6\u53ef\u4ee5\u6784\u9020\u4e00\u4e2a\u5177\u6709\u672c\u8d28\u6027\u8d28\u7684\u5e42\u7ea7\u6570\u3002\n\u8fea\u7c73\u7279\u7f57\u592b\u8bf4\uff1a\u201c\u6211\u4eec\u53d6\u8be5\u4ea7\u54c1\u7684\u5e73\u65b9\u6839\uff0c\u8fd9\u5bf9\u6211\u6765\u8bf4\u662f\u4e00\u4e2a\u4ee4\u4eba\u60ca\u8bb6\u7684\u628a\u620f\u3002\u201d\u8fd9\u4e00\u5207\u90fd\u662f\u5982\u6b64\u51fa\u4eba\u610f\u6599\u548c\u6709\u76ca\uff0c\u4ee5\u81f3\u4e8e\u8fea\u7c73\u7279\u7f57\u592b\u79f0\u8fd9\u4e00\u4e8b\u5b9e\u662f\u4e00\u4e2a\u201c\u5c0f\u5c0f\u7684\u5947\u8ff9\u201d\u3002\u8fd9\u4f7f\u5f97\u4ed6\u7684\u8bc1\u636e\u4e2d\u7684\u4e0b\u4e00\u6b65\u6210\u4e3a\u53ef\u80fd\u3002\n\u8fea\u7c73\u7279\u7f57\u592b\u8bc1\u660e\u4e86\u5e42\u7ea7\u6570\u7684\u7cfb\u6570\u662f\u6574\u6570\u3002\u5b83\u4eec\u5728\u67d0\u79cd\u610f\u4e49\u4e0a\u603b\u662f\u201c\u5927\u201d\u7684--\u5b83\u4eec\u5fc5\u987b\u81f3\u5c11\u662f1\u3002\u6b63\u56e0\u4e3a\u5982\u6b64\uff0c\u4e0e\u5e42\u7ea7\u6570\u76f8\u5173\u7684\u5176\u4ed6\u503c--\u5b83\u7684\u201c\u6c49\u514b\u5c14\u884c\u5217\u5f0f\u201d--\u4e5f\u5fc5\u987b\u5f88\u5927\u3002\u901a\u8fc7\u4e00\u7cfb\u5217\u4ed4\u7ec6\u7684\u8bba\u8bc1\uff0c\u4ed6\u8bc1\u660e\u4e86\u5982\u679c\u7cfb\u6570\u662f\u6574\u6570\uff0c\u5e76\u4e14Hankel\u884c\u5217\u5f0f\u5f88\u5927\uff0c\u90a3\u4e48\u4ed6\u5f00\u59cb\u7684\u975e\u5272\u5706\u591a\u9879\u5f0f\u7684\u6839\u4e4b\u4e00\u4e5f\u4e00\u5b9a\u662f\u5927\u7684\u3002\u8bc1\u660e\u7684\u5927\u90e8\u5206\u5de5\u4f5c\u90fd\u662f\u5728\u4e25\u683c\u5730\u8bc1\u660e\u8fd9\u79cd\u8054\u7cfb\u3002\n\u201c\u6697\u793a\u7cfb\u6570\u4e0d\u5c0f\u610f\u5473\u7740\u8fea\u7c73\u7279\u7f57\u592b\u5728\u5bfb\u627e\u4ec0\u4e48\uff0c\u8fd9\u662f\u76f8\u5f53\u5fae\u5999\u7684\u3002\u8fd9\u4e0d\u662f\u76f4\u63a5\u63a8\u65ad\u51fa\u6765\u7684\uff0c\u201c\u6bd4\u8428Scuola Normen Superiore\u7684\u7fc1\u8d1d\u6258\u00b7\u8d5e\u5c3c\u5c14(Umberto Zannier)\u8bf4\u3002\n\u8fea\u7c73\u7279\u7f57\u592b\u8bc1\u660e\u4e86\u6240\u6709\u975e\u5206\u5706\u591a\u9879\u5f0f\u7684\u6839\u5fc5\u987b\u81f3\u5c11\u662flog2\u9664\u4ee5\u5355\u4f4d\u5706\u5916\u591a\u9879\u5f0f\u7684\u6b21\u6570\u76844\u500d\uff0c\u5373(Log2)/(4d)\u3002\u8fea\u7c73\u7279\u7f57\u592b\u7684\u7ed3\u679c\u7b26\u5408Schinzel\u548cZassenhaus\u7684\u9884\u6d4b\uff0c\u5373\u8ddd\u79bb\u662f\u67d0\u4e2a\u5e38\u6570\u9664\u4ee5\u591a\u9879\u5f0f\u7684\u6b21\u6570\u7684\u51fd\u6570\u3002\u4ed6\u627e\u5230\u4e86\u4e00\u79cd\u65b0\u9896\u7684\u65b9\u6cd5\u6765\u7ec4\u5408\u6570\u5b66\u5bb6\u624b\u5934\u4e0a\u5df2\u7ecf\u6709\u7684\u5de5\u5177\uff0c\u4ece\u800c\u505a\u5230\u4e86\u8fd9\u4e00\u70b9\u3002\n\u8d5e\u5c3c\u5c14\u8bf4\uff1a\u201c\u4ed6\u53d1\u660e\u4e86\u5b8c\u5168\u9690\u85cf\u7684\u8bc1\u636e\u6a21\u5f0f\u3002\u201d\u201c\u8fd9\u4e9b\u788e\u7247\u5df2\u7ecf\u88ab\u8bc1\u5b9e\u4e86\uff0c\u4f46\u8fd9\u4e9b\u788e\u7247\u6240\u4f9d\u636e\u7684\u7406\u8bba\u4e0e\u8f9b\u6cfd\u5c14-\u624e\u68ee\u8c6a\u65af\u6beb\u65e0\u5173\u7cfb\u3002\u201d\n\u8fea\u7c73\u7279\u7f57\u592b\u7684\u8bc1\u660e\u89e3\u51b3\u4e86\u6570\u8bba\u4e2d\u5173\u4e8e\u591a\u9879\u5f0f\u4e2d\u51fa\u73b0\u7684\u6a21\u5f0f\u7684\u4e3b\u8981\u95ee\u9898\u4e4b\u4e00\u3002\u672a\u6765\u7684\u5de5\u4f5c\u53ef\u80fd\u4f1a\u8c03\u6574\u8fea\u7c73\u7279\u7f57\u592b\u63d0\u51fa\u7684\u6bd4\u7387\u3002\u786e\u5207\u7684\u503c\u53ef\u80fd\u662f\u5206\u5b50\u4e2d\u7684log3\uff0c\u5206\u6bcd\u4e2d\u591a\u9879\u5f0f\u6b21\u6570\u76845\u500d\u3002\u4f46\u662f\u5bf9\u4e8e\u6570\u5b66\u5bb6\u6765\u8bf4\uff0c\u5e38\u91cf\u7684\u7cbe\u786e\u6570\u503c\u53ea\u662f\u4e00\u4e2a\u6280\u672f\u95ee\u9898\u3002\u6bd4\u4f8b\u662f\u6700\u91cd\u8981\u7684\uff0c\u4ece\u8fd9\u4e2a\u610f\u4e49\u4e0a\u8bf4\uff0c\u8fea\u7c73\u7279\u7f57\u592b\u51c6\u786e\u5730\u8bc1\u5b9e\u4e86\u8f9b\u6cfd\u5c14\u548c\u624e\u68ee\u8c6a\u65af\u7684\u9884\u6d4b\u3002\nBreuillard\u8bf4\uff1a\u201c\u8fd9\u4e2a\u7ed3\u679c\u975e\u5e38\u6e05\u8106\uff0c\u8fd9\u662f\u53ef\u80fd\u7684\u6700\u597d\u7ed3\u679c\u3002\u201d\u201c\u4e0d\u4f1a\u6709\u6bd4\u73b0\u5728\u66f4\u597d\u7684\u4e86\u3002\u201d\n\u66f4\u6b63\uff1a2020\u5e745\u670814\u65e5\uff0c\u672c\u6587\u7684\u524d\u4e00\u4e2a\u7248\u672c\u9519\u8bef\u5730\u9648\u8ff0\u4e86Schinzel-Zassenhaus\u731c\u60f3\u7684\u4e00\u4e2a\u542b\u4e49\u3002\u8fd9\u7bc7\u6587\u7ae0\u5df2\u4f5c\u4e86\u76f8\u5e94\u7684\u4fee\u6539\u3002", "note_en": "In the physical world, objects often push each other apart in an orderly way. Think of the symmetric designs formed by iron filings under the influence of a magnetic field, or the even spacing of parkgoers practicing social distancing.\n When mathematicians look at the number line, they see the same type of trend. They look at the tick marks denoting the positive and negative counting numbers and sense a kind of numerical force holding them in that equal spacing. It\u2019s as though, like mountain lions with their wide territories, integers can\u2019t exist any closer together than 1 unit apart.\n The spacing of the number line is the most basic example of a phenomenon found throughout the field of number theory. It crops up in the study of prime numbers and in the relationships between solutions to different types of equations. Mathematicians can better understand these important values by quantifying the force that acts between them.\n \u201cThings with number-theoretic significance tend to push each other apart. The name for this is a repulsion principle,\u201d said  Jacob Tsimerman of the University of Toronto. \u201cWe try to obtain repulsion principles and use them to get various other results.\u201d\n A lot of important work in number theory has to do with the way a repulsion principle influences polynomials, collections of coefficients and variables raised to powers. And for decades, mathematicians have been trying to pin down the exact magnitude of the repulsion in this setting.\n In a proof posted  online in late December,  Vesselin Dimitrov of the University of Toronto finally did it.\n \u201cIt is truly spectacular,\u201d said  P\u00e9ter Varj\u00fa of the University of Cambridge over email. \u201cVesselin\u2019s idea is completely new, and it is beautiful.\u201d\n The problem Dimitrov solved, known as the Schinzel-Zassenhaus conjecture, is about the geometry of values of polynomials. It predicts that when you graph certain values, they\u2019ll be spread out in an exact way, looking as if they\u2019re pushing each other apart. Dimitrov\u2019s work exactly quantifies this spreading out, proving the conjecture true. It also provides new insight into the laws that numbers seem to obey.\n \u201cThis result plants a flag in the ground in terms of our understanding of algebraic numbers,\u201d Tsimerman said.\n  When studying polynomials, mathematicians are especially interested in their \u201croots,\u201d the values of a variable that make the polynomial equal zero. A polynomial has as many roots as its degree, or the value of its largest exponent. So  x 2 \u2212 4 has two roots (2 and \u22122), while  x 5 \u2212 7 x 3 + 2 x 2 \u2212 4 x \u2212 9 has five roots.\n Mathematicians want to know how the roots of a polynomial relate to each other. For example, when graphed, the roots of some polynomials fall exactly on the vertices of regular polygons \u2014 they stand apart by an exact geometric length. Mathematicians are interested in finding other, more subtle geometric relationships between roots.\n \u201cWhat kinds of patterns can you get? Can you get any patterns, or are the patterns somewhat restricted?\u201d said  Emmanuel Breuillard of Cambridge.\n The problem that Dimitrov solved involves the roots of a particularly important family of expressions called the cyclotomic polynomials. These polynomials can\u2019t be factored into smaller ones, but you can use them to build other polynomials \u2014 they\u2019re like the elements in a periodic table of polynomials. The first and simplest cyclotomic polynomial is  x \u2212 1, and the second is  x + 1. The tenth is  x 4 \u2212  x 3 +  x 2 \u2212  x + 1. Unlike the periodic table, however, the list of cyclotomic polynomials goes on forever.\n The roots of cyclotomic polynomials follow a very special geometric pattern. To see it, start with the empty complex plane, in which the  x-axis plots real numbers and the  y-axis plots imaginary ones. Then inscribe a circle with a radius of 1 around the origin. This is the unit circle. The roots of cyclotomic polynomials all lie on this circle. They bear an elegant name: \u201croots of unity.\u201d\n  But most polynomials are non-cyclotomic, and their roots are not roots of unity. This is the case with almost any combination of coefficients, variables and exponents you could come up with.\n In 1965,  Andrzej Schinzel and  Hans Zassenhaus predicted that the geometry of the roots of cyclotomic and non-cyclotomic polynomials differs in a very specific way. Take any non-cyclotomic polynomial whose first coefficient is 1 and graph its roots. Some may fall inside the unit circle, others right on it, and still others outside it. Schinzel and Zassenhaus predicted that every non-cyclotomic polynomial must have at least one root that\u2019s outside the unit circle and at least some minimum distance away.\n Or, to put the Schinzel-Zassenhaus conjecture in terms of repulsion, it predicted that the smallest roots of a non-cyclotomic polynomial \u2014 which might fall within the unit circle \u2014 effectively push other roots outside the unit circle, like magnets pushing each other away.\n \u201cYou can think of the roots of a polynomial as negatively charged particles that repel each other with a force that decays when the distance increases,\u201d Breuillard said.\n The Schinzel-Zassenhaus conjecture even defined exactly how strong that repulsive force should be. \u201cIt says there\u2019s a very precise, quantifiable sense in which the roots can\u2019t all be very close to the unit circle,\u201d Tsimerman said.\n  The conjecture\u2019s main prediction has the feel of a physics equation. It says every non-cyclotomic polynomial should have at least one root that is outside the unit circle by a distance equal to a constant number divided by the degree of the polynomial. The exact value of that constant is not critical, so for the sake of an example, say it\u2019s 0.1. If we had a non-cyclotomic polynomial of degree 23, the conjecture predicts that it should have a root at least .1/23 outside the unit circle.\n It\u2019s a powerful statement, but for decades mathematicians only managed to confirm weaker versions of the conjecture\u2019s prediction.\n Schinzel and Zassenhaus themselves proved that every non-cyclotomic polynomial has a root at least 1 over 4 raised to the degree of the polynomial (1/4  d) outside the unit circle. This distance is much smaller than the conjectured one due to the presence of an exponent in the denominator.\n Over the next three decades mathematicians made a series of improvements on Schinzel and Zassenhaus\u2019 work, but the progress remained incomplete. Mathematicians thought the correct distance should be one size, but they could only prove it was at least some smaller size. Mathematicians had no idea how hard the Schinzel-Zassenhaus conjecture would be to solve, assuming it could even be solved at all.\n \u201cOne never ultimately knows at the outset how simple or complicated [a problem\u2019s] solution will turn out to be \u2014 until that solution is found,\u201d said Dimitrov over email.\n  Often when a prominent math problem remains open for a long time, it\u2019s because mathematicians simply lack the techniques required to solve it. Dream as you might of flying to the moon, you\u2019re not getting there until someone invents a rocket.\n But as it turned out, this problem was different. \u201cThe technology has been around for at least 40 years,\u201d Tsimerman said.\n Dimitrov transformed a question about the size of roots of polynomials into a question about the size of values associated to a related but different type of mathematical object called a power series. A power series is like a polynomial, only with infinitely many terms.\n \u201cAs often happens in mathematics, the key insight/breakthrough was to connect two seemingly different problems,\u201d said  Frank Calegari of the University of Chicago over email.\n Mathematicians are accustomed to moving easily between polynomials and power series and using properties of one to establish properties of the other \u2014 but mathematicians before Dimitrov didn\u2019t think to use this correspondence to address the Schinzel-Zassenhaus conjecture.\n To prove what he wanted to prove about polynomials, Dimitrov needed the related power series to have a specific, essential property: All the coefficients needed to be positive or negative whole numbers (so no fractions). And when Dimitrov started this work, there was no obvious way to guarantee that would happen.\n But in November 2019, while \u201cbrowsing through a few books and papers in algebraic combinatorics,\u201d Dimitrov realized there was a way to cobble together a few well-known theorems to produce the right relationship between a non-cyclotomic polynomial and its power series. He took a non-cyclotomic polynomial, found its roots, raised those roots to different powers, multiplied them together, then took the square root of that product. Then, finally, based on that square root, he could construct a power series with the essential property.\n \u201cThis was a surprising trick to me, that we take the square root of that product,\u201d said Dimitrov. It was all so unexpected and helpful that Dimitrov calls the fact that it works a \u201csmall miracle.\u201d This enabled the next steps in his proof.\n Dimitrov proved that the coefficients of the power series are whole number integers. These are always \u201clarge\u201d in a sense \u2014 they must be at least 1. Because of this, other values related to the power series \u2014 its \u201cHankel determinants\u201d \u2014 also have to be large. Through a careful chain of argument, he proved that if coefficients are whole number integers and the Hankel determinants are large, then one of the roots of the non-cyclotomic polynomial he began with must also be large. Much of the work of the proof was in rigorously proving that connection.\n \u201cThe implication that the coefficients being not small implies what Dimitrov is seeking is quite subtle. It is not something that\u2019s deduced in a direct way,\u201d said  Umberto Zannier of Scuola Normale Superiore in Pisa.\n Dimitrov proved that all non-cyclotomic polynomials must have a root that\u2019s at least log 2 divided by four times the degree of the polynomial outside the unit circle; that is, (log 2)/(4 d). Dimitrov\u2019s result fulfills Schinzel and Zassenhaus\u2019 prediction that the distance is a function of some constant value divided by the degree of the polynomial. And he did it by finding a novel way to combine tools that mathematicians already had on hand.\n \u201cHe invented the pattern of the proof, which was completely hidden,\u201d said Zannier. \u201cThe pieces were already proved, but these pieces were lying in theories which a priori had nothing to do with Schinzel-Zassenhaus.\u201d\n  Dimitrov\u2019s proof solves one of the main problems in number theory about the patterns that appear within polynomials. Future work may tweak the ratio Dimitrov came up with. It\u2019s possible that the exact values are, say, log 3 in the numerator and five times the degree of the polynomial in the denominator. But to mathematicians, the exact value of the constants is just a technicality. It\u2019s the proportions that matter most, and in that sense, Dimitrov has precisely confirmed Schinzel and Zassenhaus\u2019 prediction.\n \u201cThis result is very crisp and it\u2019s the best possible result,\u201d Breuillard said. \u201cIt\u2019s not going to get any better than this.\u201d\n Correction :\u00a0May 14, 2020  A previous version of this article misstated one of the implications of the Schinzel-Zassenhaus conjecture. The article has been revised accordingly.", "posttime": "2020-05-16 01:12:55", "source_domain": "news.ycombinator.com", "source_name": "Hacker News", "tags": "\u6d4b\u91cf,measures,\u591a\u9879\u5f0f", "title": "\u6570\u5b66\u5bb6\u6d4b\u91cf\u591a\u9879\u5f0f\u4e2d\u7684\u6392\u65a5\u529b", "title_en": "Mathematician Measures the Repulsive Force Within Polynomials", "transed": 1, "url": "https://www.quantamagazine.org/new-math-measures-the-repulsive-force-within-polynomials-20200514/", "via": "", "real_tags": ["\u6d4b\u91cf", "measures", "\u591a\u9879\u5f0f"]}, {"category": "", "categoryclass": "", "imagename": "1aeb07306b3f82b3c21f0c9493a52f9a.jpg", "infoid": 1002265, "ip": "", "isanchordig": 1, "ischecked": 1, "isdelete": 0, "isneo": 1, "mark": "", "name": "", "note": "\u7f16\u8005\u6309\uff1a\u201c\u7ecf\u6d4e\u5b66\u4eba\u201d\u6b63\u5728\u5411\u6211\u4eec\u7684\u6bcf\u65e5\u901a\u8baf\u201c\u4eca\u65e5\u7ecf\u6d4e\u5b66\u4eba\u201d\u7684\u8bfb\u8005\u514d\u8d39\u63d0\u4f9b\u4e00\u4e9b\u5173\u4e8e\u51a0\u72b6\u75c5\u6bd2\u5927\u6d41\u884c\u7684\u6700\u91cd\u8981\u7684\u62a5\u9053\u3002\u8981\u63a5\u6536\u5b83\uff0c\u8bf7\u5728\u8fd9\u91cc\u6ce8\u518c\u3002\u6709\u5173\u6211\u4eec\u7684\u51a0\u72b6\u75c5\u6bd2\u8ddf\u8e2a\u5668\u548c\u66f4\u591a\u62a5\u9053\uff0c\u8bf7\u53c2\u9605\u6211\u4eec\u7684\u4e2d\u5fc3\u3002\n\u5728\u5371\u673a\u4e2d\u901f\u5ea6\u66f4\u5feb\u3002\u9762\u5bf9\u51a0\u72b6\u75c5\u6bd2\uff0c\u75ab\u82d7\u5236\u9020\u5546\u6b63\u5728\u5c3d\u53ef\u80fd\u5b89\u5168\u5730\u5077\u5de5\u51cf\u6599\u3002\u6297\u75c5\u6bd2\u836f\u7269\u6b63\u5728\u4ed3\u4fc3\u8fdb\u5165\u4e34\u5e8a\u8bd5\u9a8c\u3002\u5373\u4fbf\u5982\u6b64\uff0c\u8fd8\u9700\u8981\u51e0\u4e2a\u6708\u7684\u65f6\u95f4\u624d\u80fd\u6709\u4efb\u4f55\u4e1c\u897f\u53ef\u7528\u3002\u636e\u8bb0\u5f55\uff0c\u670929.7\u4e07\u4eba\u6b7b\u4ea1\uff0c\u7b49\u5f85\u662f\u75db\u82e6\u7684\u3002\u4f46\u8c28\u614e\u662f\u81f3\u5173\u91cd\u8981\u7684\u3002\u533b\u5b66\u53f2\u4e0a\u5145\u6ee1\u4e86\u5145\u6ee1\u5e0c\u671b\u7684\u6cbb\u7597\u65b9\u6cd5\uff0c\u7ecf\u8fc7\u6d4b\u8bd5\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u90fd\u4e0d\u8d77\u4f5c\u7528\uff0c\u751a\u81f3\u9020\u6210\u4f24\u5bb3\u3002\n\u8bb8\u591a\u653f\u5e9c\u5e0c\u671b\u62ef\u6551\u80fd\u66f4\u65e9\u5230\u6765\uff0c\u56e0\u4e3a\u667a\u80fd\u624b\u673a\u4e0a\u6709\u8054\u7cfb\u4eba\u8ffd\u8e2a\u5e94\u7528\u7a0b\u5e8f-\u5c3d\u7ba1\u82f9\u679c\u548c\u8c37\u6b4c\u5bf9\u8fd9\u9879\u6280\u672f\u7684\u63a7\u5236\u6b63\u5728\u915d\u917f\u7740\u4e00\u573a\u4e89\u5435\u3002\u8fd9\u4e9b\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u7528\u6765\u81ea\u52a8\u5316\u8ffd\u8e2a\u4e0e\u90a3\u4e9b\u88ab\u8bca\u65ad\u4e3a\u51a0\u72b6\u75c5\u6bd2\u611f\u67d3\u8005\u6709\u8fc7\u63a5\u89e6\u7684\u4eba\u7684\u8270\u96be\u8fc7\u7a0b\uff0c\u8fd9\u5bf9\u8ddf\u8e2a\u75c5\u6bd2\u81f3\u5173\u91cd\u8981\u3002\u4ece\u5df4\u6797\u548c\u4fdd\u52a0\u5229\u4e9a\u5230\u5370\u5ea6\u5c3c\u897f\u4e9a\u548c\u51b0\u5c9b\u7b49\u56fd\u90fd\u5f00\u53d1\u4e86\u8fd9\u6837\u7684\u5e94\u7528\u7a0b\u5e8f\u3002\n\u5b83\u4eec\u662f\u4e00\u4e2a\u5f88\u6709\u5438\u5f15\u529b\u7684\u60f3\u6cd5\u3002\u7136\u800c\uff0c\u63a5\u89e6\u8ffd\u8e2a\u5e94\u7528\u7a0b\u5e8f\u4e5f\u662f\u4e00\u9879\u672a\u7ecf\u6d4b\u8bd5\u7684\u533b\u5b66\u53d1\u660e\uff0c\u5c06\u5728\u6ca1\u6709\u65b0\u836f\u53d7\u5230\u7684\u90a3\u79cd\u4fdd\u969c\u7684\u60c5\u51b5\u4e0b\u63a8\u51fa\u3002\u4e0d\u51c6\u786e\u7684\u4fe1\u606f\u53ef\u80fd\u4f1a\u8bef\u5bfc\u536b\u751f\u5b98\u5458\u548c\u516c\u6c11\uff0c\u5176\u5371\u5bb3\u53ef\u80fd\u4e0e\u4efb\u4f55\u5931\u8d25\u7684\u836f\u7269\u4e00\u6837\u4e25\u91cd\u3002\u653f\u5e9c\u5e94\u8be5\u8c28\u614e\u884c\u4e8b\u3002\n\u8986\u76d6\u9762\u662f\u4e00\u4e2a\u590d\u6742\u7684\u95ee\u9898\u3002\u6d41\u884c\u75c5\u5b66\u5bb6\u4f30\u8ba1\uff0c\u5982\u679c\u5927\u7ea660%\u7684\u4eba\u4f7f\u7528\u5e94\u7528\u7a0b\u5e8f\uff0c\u5b83\u4eec\u53ef\u80fd\u4f1a\u5f88\u6709\u7528\u3002\u7136\u800c\uff0c\u5373\u4f7f\u5728\u666e\u53ca\u7387\u6700\u9ad8\u7684\u6b27\u6d32\uff0c\u4e5f\u53ea\u670976%\u7684\u4eba\u62e5\u6709\u79fb\u52a8\u4e92\u8054\u7f51\u8ba2\u9605\u670d\u52a1\u3002\u8fd9\u4e00\u6570\u5b57\u5728\u8001\u5e74\u4eba\u4e2d\u8f83\u4f4e\uff0c\u8001\u5e74\u4eba\u6700\u5bb9\u6613\u53d7\u5230\u51a0\u72b6\u75c5\u6bd2\u7684\u5f71\u54cd\u3002\u6700\u8fd1\u7684\u4e00\u9879\u8c03\u67e5\u663e\u793a\uff0c\u53ea\u6709\u4e0d\u5230\u4e00\u534a\u7684\u7f8e\u56fd\u4eba\u4f1a\u4f7f\u7528\u63a5\u89e6\u8005\u8ffd\u8e2a\u5e94\u7528\u7a0b\u5e8f\u3002\n\u51c6\u786e\u6027\u4e5f\u662f\u4e00\u4e2a\u95ee\u9898\u3002\u8fd9\u7c7b\u5e94\u7528\u7a0b\u5e8f\u65e8\u5728\u76d1\u542c\u9644\u8fd1\u7684\u624b\u673a\uff0c\u5982\u679c\u53e6\u4e00\u53f0\u8bbe\u5907\u8db3\u591f\u8fd1\uff0c\u5c31\u4f1a\u6ce8\u518c\u8054\u7cfb\u4eba\u3002\u7136\u800c\uff0c\u7528\u6765\u505a\u5230\u8fd9\u4e00\u70b9\u7684\u65e0\u7ebf\u7535\u4fe1\u53f7\u7684\u5f3a\u5ea6\u9664\u4e86\u53d7\u8ddd\u79bb\u7684\u5f71\u54cd\u5916\uff0c\u8fd8\u53d7\u5404\u79cd\u56e0\u7d20\u7684\u5f71\u54cd\u3002\u4f8b\u5982\uff0c\u4eba\u4f53\u4f1a\u963b\u788d\u4f20\u8f93\uff0c\u8fd9\u610f\u5473\u7740\u53e3\u888b\u91cc\u7684\u624b\u673a\u548c\u624b\u4e2d\u7684\u624b\u673a\u4f1a\u6709\u4e0d\u540c\u7684\u8868\u73b0\u3002\n\u8fd9\u53ef\u80fd\u4f1a\u4f7f\u6821\u51c6\u7cfb\u7edf\u53d8\u5f97\u56f0\u96be-\u800c\u4e00\u4e2a\u9519\u8bef\u5c06\u4f1a\u4ea7\u751f\u540e\u679c\u3002\u592a\u654f\u611f\u4e86\uff0c\u4f60\u5c31\u4f1a\u5192\u7740\u201c\u5047\u9633\u6027\u201d\u6cdb\u6ee5\u7684\u98ce\u9669\uff1a\u88ab\u8ba4\u4e3a\u662f\u5bc6\u5207\u800c\u91cd\u8981\u7684\u3001\u5b9e\u9645\u4e0a\u662f\u9065\u8fdc\u800c\u65e0\u5173\u7d27\u8981\u7684\u63a5\u89e6\u3002\u8fc7\u4e8e\u5bbd\u5bb9\uff0c\u771f\u6b63\u7684\u75c5\u6bd2\u4f20\u64ad\u75c5\u4f8b\u5c06\u4e0d\u4f1a\u88ab\u53d1\u73b0\u3002\n\u6b64\u5916\uff0c\u8fd9\u4e9b\u5e94\u7528\u7a0b\u5e8f\u672c\u8eab\u53ef\u80fd\u4f1a\u6539\u53d8\u4eba\u4eec\u7684\u884c\u4e3a\u3002\u4e00\u6b3e\u8fc7\u5ea6\u5b89\u5fc3\u7684\u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u4f1a\u523a\u6fc0\u4eba\u4eec\u5728\u5b89\u5168\u4e4b\u524d\u51fa\u95e8\u3002\u51fa\u4e8e\u533b\u7597\u539f\u56e0\u548c\u516c\u6c11\u81ea\u7531\uff0c\u5fc5\u987b\u6743\u8861\u9690\u79c1\u548c\u900f\u660e\u5ea6\u3002\u97e9\u56fd\u516c\u5e03\u4e86\u5176\u63a5\u89e6\u8ffd\u8e2a\u5668\u53d1\u73b0\u7684\u75c5\u4f8b\u7684\u8be6\u7ec6\u6458\u8981\u3002\u6700\u8fd1\u75c5\u4f8b\u7684\u8dc3\u5347\u4e0e\u4e00\u540d\u5149\u987e\u540c\u6027\u604b\u591c\u603b\u4f1a\u7684\u7537\u5b50\u6709\u5173\u3002\u7531\u6b64\u4ea7\u751f\u7684\u4ec7\u89c6\u540c\u6027\u604b\u7684\u8c29\u9a82\u4e4b\u6d41\u53ef\u80fd\u4f1a\u963b\u6b62\u5176\u4ed6\u4eba\u4e0e\u5f53\u5c40\u5408\u4f5c\uff0c\u65e0\u8bba\u662f\u7535\u5b50\u65b9\u5f0f\u8fd8\u662f\u5176\u4ed6\u65b9\u5f0f\u3002\n\u5305\u62ec\u82f1\u56fd\u3001\u6cd5\u56fd\u548c\u5fb7\u56fd\u5728\u5185\u7684\u4e00\u4e9b\u653f\u5e9c\u7684\u52aa\u529b\u56e0\u82f9\u679c\u548c\u8c37\u6b4c\u800c\u53d8\u5f97\u590d\u6742\uff0c\u8fd9\u4e24\u5bb6\u516c\u53f8\u5171\u540c\u63a7\u5236\u7740\u5730\u7403\u4e0a\u51e0\u4e4e\u6bcf\u4e00\u90e8\u667a\u80fd\u624b\u673a\u3002\u8fd9\u4e9b\u516c\u53f8\u5df2\u7ecf\u5c06\u9690\u79c1\u4f5c\u4e3a\u4f18\u5148\u4e8b\u9879\uff0c\u8ba4\u4e3a\u7528\u6237\u5c06\u662f\u533f\u540d\u7684\uff0c\u4fe1\u606f\u5c06\u4e3b\u8981\u5b58\u50a8\u5728\u8bbe\u5907\u4e0a\uff0c\u800c\u4e0d\u662f\u4e0a\u4f20\u5230\u4e2d\u592e\u5b58\u50a8\u5e93\u3002\u8fd9\u6fc0\u6012\u4e86\u8bb8\u591a\u5b98\u5458\u3002\u4ed6\u4eec\u8bf4\uff0c\u96c6\u4e2d\u5316\u63d0\u4f9b\u4e86\u4f18\u52bf\u3002\u65e0\u8bba\u5982\u4f55\uff0c\u7845\u8c37\u7684\u7a0b\u5e8f\u5458\u4e3a\u4ec0\u4e48\u8981\u5426\u51b3\u533b\u5b66\u4e13\u5bb6\u548c\u6c11\u9009\u5b98\u5458\u7684\u51b3\u5b9a\u5462\uff1f\n\u4e00\u822c\u6765\u8bf4\uff0c\u653f\u5e9c\u62c5\u5fc3\u79d1\u6280\u5de8\u5934\u4e0d\u8d1f\u8d23\u4efb\u7684\u6743\u529b\u662f\u6b63\u786e\u7684\u3002\u4e0d\u8fc7\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u8c37\u6b4c\u548c\u82f9\u679c\u7684\u8c28\u614e\u505a\u6cd5\u662f\u660e\u667a\u7684\u3002\u5728\u5927\u6d41\u884c\u4e2d\uff0c\u5b9e\u9a8c\u65b0\u7684\u516c\u5171\u536b\u751f\u5e94\u5bf9\u63aa\u65bd\uff0c\u5982\u5927\u89c4\u6a21\u76d1\u6d4b\uff0c\u5e94\u8be5\u8c28\u614e\u884c\u4e8b\uff0c\u4ee5\u9632\u968f\u540e\u88ab\u8bc1\u660e\u6709\u4ee4\u4eba\u8ba8\u538c\u7684\u526f\u4f5c\u7528\u3002\u6709\u4e86\u9ad8\u79d1\u6280\u8f6f\u4ef6\uff0c\u8c28\u614e\u5c31\u50cf\u836f\u4e38\u548c\u836f\u6c34\u4e00\u6837\u6709\u4ef7\u503c\u3002\u3002\n\u6df1\u5165\u6316\u6398\uff1a\u6709\u5173\u51a0\u72b6\u75c5\u6bd2\u5927\u6d41\u884c\u7684\u6700\u65b0\u62a5\u9053\uff0c\u8bf7\u6ce8\u518c\u6211\u4eec\u7684\u6bcf\u65e5\u65f6\u4e8b\u901a\u8baf\u201c\u4eca\u65e5\u7ecf\u6d4e\u5b66\u4eba\u201d\uff0c\u6216\u8bbf\u95ee\u6211\u4eec\u7684\u51a0\u72b6\u75c5\u6bd2\u8ddf\u8e2a\u5668\u548c\u6545\u4e8b\u4e2d\u5fc3\u3002\n\u8fd9\u7bc7\u6587\u7ae0\u53d1\u8868\u5728\u5370\u5237\u7248\u7684\u9886\u8896\u680f\u76ee\uff0c\u6807\u9898\u4e3a\uff1a\u7b2c\u4e00\uff0c\u4e0d\u4f24\u5bb3\uff1b", "note_en": "Editor\u2019s note: The Economist  is making some of its most important coverage of the covid-19 pandemic freely available to readers of The Economist Today , our daily newsletter. To receive it, register  here. For our coronavirus tracker and more coverage, see our  hub\n E  faster in a crisis. Faced with covid-19, vaccine-makers are cutting as many corners as they safely can. Anti-viral drugs are being rushed into clinical trials. Even so, it will be months until anything is available. With 297,000 people recorded dead, the wait is agonising. But caution is crucial. Medicine\u2019s history is full of promising treatments that, when tested, turned out not to work or even to cause harm.\n  Many governments hope salvation can come sooner, with contact-tracing apps on smartphones\u2014even as a row brews over Apple\u2019s and Google\u2019s grip on the technology. These apps can be used to automate the difficult process of tracking down people who have been in contact with those diagnosed with covid-19, which is vital for keeping tabs on the virus. Countries from Bahrain and Bulgaria to Indonesia and Iceland have developed such apps.\n They are an attractive idea. Yet contact-tracing apps are also an untested medical invention that will be introduced without the sort of safeguards that new drugs are subjected to. Inaccurate information can mislead health officials and citizens in ways that can be as harmful as any failed drug. Governments should proceed with care.\n Coverage is one complication. Epidemiologists reckon that apps might be useful if around 60% of people use them. Yet even in Europe, where adoption is highest, only 76% of people have mobile-internet subscriptions. That number is lower among the elderly, the most vulnerable to covid-19. A recent survey suggested less than half of Americans would use a contact-tracing app.\n Accuracy is an issue, too. Such apps are designed to listen out for nearby mobile phones, registering a contact if another device comes close enough. Yet the strength of the radio signals used to do this is affected by all sorts of things besides distance. Human bodies impede transmission, for instance, meaning a phone in a pocket will behave differently from one in a hand.\n That could make it hard to calibrate the system\u2014and a mistake would have consequences. Too sensitive, and you risk a deluge of \u201cfalse positives\u201d: contacts deemed close and significant that were actually distant and irrelevant. Too forgiving, and genuine cases of viral transmission will go undetected.\n Moreover, the apps themselves might change behaviour. An over-reassuring app could spur people to go out before it is safe. Privacy must be weighed against transparency, for medical reasons as well as for civil liberty. South Korea publishes detailed summaries of cases uncovered by its contact-tracers. A recent jump in cases was linked to a man who visited gay nightclubs. The resulting stream of homophobic invective could deter others from co-operating with the authorities, electronically or otherwise.\n The efforts of some governments, including those of Britain, France and Germany, have been complicated by Apple and Google, which between them hold sway over almost every smartphone on the planet. The firms have made privacy a priority, deeming that users will be anonymous and information stored mostly on devices rather than uploaded to central repositories. That has infuriated many officials. Centralisation offers advantages, they say. And in any case, why should coders in Silicon Valley overrule decisions made by medical experts and elected officials?\n  As a rule, governments are right to worry about the unaccountable power of the tech giants. In this case, though, Google\u2019s and Apple\u2019s cautious approach is sensible. In a pandemic, experimenting with novel public-health responses such as mass surveillance should be done carefully, in case it subsequently turns out to have nasty side-effects. With high-tech software, caution is as valuable as it is with pills and potions.  \u25a0\n Dig deeper: For our latest coverage of the covid-19 pandemic, register for  The Economist Today, our daily  newsletter, or visit our  coronavirus tracker and story hub\n This article appeared in the Leaders section of the print edition under the headline &#34;First, do no harm&#34;", "posttime": "2020-05-16 01:12:22", "source_domain": "news.ycombinator.com", "source_name": "Hacker News", "tags": "\u7a0b\u5e8f,app,\u8054\u7cfb\u4eba,rely,\u51a0\u72b6\u75c5\u6bd2", "title": "\u4e0d\u8981\u4f9d\u8d56\u8054\u7cfb\u4eba\u8ddf\u8e2a\u5e94\u7528\u7a0b\u5e8f", "title_en": "Don\u2019t rely on contact-tracing apps", "transed": 1, "url": "https://www.economist.com/leaders/2020/05/16/dont-rely-on-contact-tracing-apps", "via": "", "real_tags": ["\u7a0b\u5e8f", "app", "\u8054\u7cfb\u4eba", "rely", "\u51a0\u72b6\u75c5\u6bd2"]}, {"category": "", "categoryclass": "", "imagename": "", "infoid": 1002264, "ip": "", "isanchordig": 1, "ischecked": 1, "isdelete": 0, "isneo": 1, "mark": "", "name": "", "note": "\u60a8\u77e5\u9053\u60a8\u53ef\u4ee5\u5728Makefile\u4e2d\u66f4\u6539shell\u5417\uff1f\u8fd9\u662f\u771f\u7684\u3002\u6211\u5728\u5c1d\u8bd5\u901a\u8fc7\u8bbe\u7f6eshell\u6765\u4f7f\u7528bash\u800c\u4e0d\u662f\u9ed8\u8ba4\u7684/bin/sh\u65f6\u53d1\u73b0\u4e86\u8fd9\u4e00\u70b9\u3002\n.ONESHELL\uff1abash\uff1ashell\uff1a=bash bash\uff1a#\u6ce8\u610f\uff1a\u9700\u8981\u53cc\u7f8e\u5143\u7b26\u53f7\uff0c\u56e0\u4e3amake\u66ff\u6362$Variables export greeting=&#34\uff1b\u2018hola&#34\uff1becho&#34\uff1b$${greeting}\uff0cbash\uff01&#34\uff1b\n\u8fd8\u6709\u4ec0\u4e48\u662f\u53ef\u80fd\u7684\u5462\uff1f\u6211\u53ef\u4ee5\u4f7f\u7528\u5176\u4ed6\u7f16\u7a0b\u8bed\u8a00\u4f5c\u4e3ashell\u5417\uff1f\u53ef\u4ee5\u5728Makefile\u4e2d\u7f16\u5199\u5185\u8054Python\u5417\uff1f\n\u8bf7\u6ce8\u610f\uff0c\u6b63\u5728\u8bbe\u7f6e\u53d8\u91cf.ONESHELL\u3002\u901a\u5e38\uff0c\u8ba9willevaluate\u5728\u5355\u72ec\u7684shell\u4e2d\u8ba1\u7b97\u6bcf\u4e2a\u547d\u4ee4\u7684\u503c\uff0c\u8fd9\u610f\u5473\u7740\u5728\u672c\u4f8b\u4e2d\uff0c\u95ee\u5019\u8bed\u5c06\u5728\u7b2c\u4e8c\u884c\u4e2d\u672a\u5b9a\u4e49\u3002\u6309\u7167\u59d3\u6c0f\u4ee5Davis-*\u5f00\u5934\u7684\u5176\u4ed6\u4eba\u7684\u5efa\u8bae\uff0c\u5c06.ONESHELL\u6dfb\u52a0\u5230Makefile\u7684\u9876\u90e8\uff0c\u5e76\u64b0\u5199\u6709\u5173make\u7684\u535a\u5ba2\uff0c\u4f1a\u5bfc\u81f4make\u6307\u4ee4\u4e2d\u7684\u591a\u884c\u4ee3\u7801\u5728\u5bf9Python\u7684\u5355\u4e2a\u8c03\u7528\u4e2d\u6c42\u503c\u3002\n\u5c06R\u5185\u8054\u5199\u5165Makefile\u600e\u4e48\u6837\uff1f\u8bf7\u6ce8\u610f\u6dfb\u52a0\u7684.SHELLFLAGS\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cmake\u8fd0\u884cshell-c&#34\uff1b\u60a8\u7684\\n\u811a\u672c\uff0c\\n\u6b64\u5904&#34\uff1b\u4e0eR\u4e0d\u517c\u5bb9\u3002\u8981\u4eceR\u4e2d\u7684\u547d\u4ee4\u5185\u8054\u8fd0\u884c\u811a\u672c\uff0c\u53ef\u4ee5\u4f7f\u7528-e\uff1a\n\u73b0\u5728\uff0c\u60a8\u53ef\u4ee5\u7f16\u5199\u5c06R\u548cPython\u8bed\u8a00\u7ec4\u5408\u5230\u5355\u4e2a\u6587\u4ef6\ud83c\udf89\u4e2d\u7684\u7ba1\u9053\u3002\n\u6570\u636e\u5206\u6790\u7ba1\u9053\u901a\u5e38\u5177\u6709\u5192\u9669\u7684\u7528\u6237\u4f9d\u8d56\u6027\u3002Docker\u8ba9\u8fd9\u4e00\u5207\u53d8\u5f97\u5bb9\u6613\u5f97\u591a\uff0c\u4f46\u662f\u7f16\u5199docker run\u2026\u53ef\u80fd\u4f1a\u5f88\u9ebb\u70e6\u3002\u5982\u679c\u6211\u4eec\u53ef\u4ee5\u8ba9Docker\u4e5f\u4f5c\u4e3a\u89e3\u91ca\u5668\u548c\u5199\u547d\u4ee4\u5728\u5bb9\u5668\u5185\u4ee5\u5185\u8054\u65b9\u5f0f\u6267\u884c\uff0c\u4f1a\u600e\u4e48\u6837\uff1f\ndocker\uff1a.SHELLFLAGS=run--volume$(Shell Pwd)\uff1a/workdir--rm--workdir/workdir--entry point/bin/bash ubuntu-c docker\uff1ashell\uff1a=docker docker\uff1aecho&#34\uff1bhello\uff0c$$(uname-a)\uff01&#34\uff1b\n\u518d\u8bf4\u4e00\u6b21\uff0c\u8fd9\u662f\u53ef\u80fd\u7684\u3002\u8fd0\u884cmake docker\u5c06\u8fd0\u884cECHO.\u3002\u5728\u8fd0\u884cUbuntu\u7684Dockertainer\u4e2d\u3002\u8bf7\u6ce8\u610f--volume\u6807\u5fd7\uff0c\u5b83\u5c06\u6302\u8f7d\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u4f5c\u4e3a\u5bb9\u5668\u7684\u5de5\u4f5c\u76ee\u5f55\uff0c\u8fd9\u610f\u5473\u7740\u53ef\u4ee5\u5728\u60a8\u7684\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u548c\u5bb9\u5668\u7684\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u4e4b\u95f4\u8bfb\u53d6/\u521b\u5efa\u6587\u4ef6\u3002\u6240\u4ee5\u6784\u5efa\u6784\u4ef6\u53ef\u4ee5\u5728make\u6307\u4ee4\u4e4b\u95f4\u5171\u4eab\u3002\n\u60a8\u597d\uff0cLinux 453c728113d6 4.19.76-linuxkit#1 SMP Fri Apr 3 15\uff1a53\uff1a26 UTC 2020 x86_64 GNU/Linux\uff01\n\u8fd9\u662f\u4e00\u6b21\u5b9e\u9a8c\uff0c\u76ee\u7684\u662f\u770b\u770bMake\u80fd\u505a\u4e9b\u4ec0\u4e48\u3002\u4f46\u5b83\u7684\u52a8\u673a\u662f\u4e00\u4e2a\u73b0\u5b9e\u4e16\u754c\u7684\u95ee\u9898\uff1a\u6211\u7ecf\u5e38\u9700\u8981\u7ec4\u5408\u8de8\u7f16\u7a0b\u8bed\u8a00\u548c\u73af\u5883\u7684\u5de5\u5177\u6765\u8fd0\u884c\u6570\u636e\u5206\u6790\u7ba1\u9053\u3002\u6211\u559c\u6b22\u628a\u4e8b\u60c5\u81ea\u52a8\u5316\uff0cMake\u662f\u8fd9\u6837\u505a\u7684\u4e00\u4e2a\u5f88\u597d\u7684\u5de5\u5177\u3002\u5c06\u6240\u6709\u5185\u5bb9\u5185\u8054\u8d77\u6765\u66f4\u5177\u53ef\u8bfb\u6027\uff0c\u5e76\u4e14\u5c06\u6240\u6709\u5185\u5bb9\u90fd\u653e\u5728\u4e00\u4e2a\u6587\u4ef6\u4e2d\u610f\u5473\u7740\u6211\u5fc5\u987b\u5728\u66f4\u5c11\u7684\u9009\u9879\u5361\u4e4b\u95f4\u8df3\u8f6c\u624d\u80fd\u7406\u89e3\u7ba1\u9053\u672c\u8eab\u3002\n\u7f16\u5199\u5728Docker\u4e2d\u6267\u884c\u7684\u547d\u4ee4\u7684\u80fd\u529b\u610f\u5473\u7740\u6211\u4e0d\u5fc5\u82b1\u8d39\u66f4\u5c11\u7684\u65f6\u95f4\u6765\u5f04\u6e05\u695a\u5982\u4f55\u5c06\u4e00\u5806\u4f9d\u8d56\u9879\u5b89\u88c5\u5230\u5355\u4e2a\u5bb9\u5668\u4e2d\uff0c\u8fd9\u4f1a\u968f\u7740\u4f9d\u8d56\u9879\u6570\u91cf\u7684\u589e\u52a0\u800c\u53d8\u5f97\u8d8a\u6765\u8d8a\u56f0\u96be(\u7279\u522b\u662f\u5982\u679c\u4f60\u5728\u751f\u7269\u4fe1\u606f\u5b66\u5de5\u4f5c\u7684\u8bdd)\u3002\n\u6ce8\u610f\uff1a\u5176\u4e2d\u4e00\u4e9b\u529f\u80fd\u53ea\u9002\u7528\u4e8eMake 4.+\uff0c\u8fd9\u662f\u6211\u4f7f\u7528Homebrew\u5b89\u88c5\u7684\u3002\u8fd9\u4e9b\u793a\u4f8b\u5728\u4f7f\u7528MacOS Catalina\u9644\u5e26\u7684make 3.x\u65f6\u4e0d\u8d77\u4f5c\u7528\u3002\n.ONESHELL\uff1a.SILENT\uff1amain\uff1a\\Python\\ruby\\R\\bash\\docker docker\uff1a.SHELLFLAGS=run--rm--entrypoint/bin/bash ubuntu-c docker\uff1ashell\uff1a=docker docker\uff1aecho&#34\uff1bhello\uff0c$$(uname-a)\uff01&#34\uff1bpython\uff1ashell\uff1a=python3 python\uff1agreeting=&#34\uff1bhello&#34\uff1bprint(f&#\u3002)ruby\uff1a.SHELLFLAGS\uff1a=-e ruby\uff1ashell\uff1a=ruby ruby\uff1agreeting=&#34\uff1blaba&#34\uff1bput&#34\uff1b#{greeting}\uff0cruby\uff01&#34\uff1bR\uff1a.SHELLFLAGS\uff1a=-e R\uff1ashell\uff1a=Rscript R\uff1agreeting=&#34\uff1bbonjour&#34\uff1bmessage(paste0(greeting\uff0c&#34\uff1b\uff0cR\uff01&#34\uff1b))bash\uff1a.\u3002*\u60a8\u597d&#34\uff1becho&#34\uff1b$${greeting}\uff0cbash\uff01&#34\uff1b", "note_en": "Did you know that you can change the shell in a  Makefile? It\u2019s true. I foundthis out when trying to use bash instead of the default  /bin/sh by setting SHELL.\n .ONESHELL : bash :  SHELL := bash bash :\t # note: the double dollar-sign is required because Make substitues $variables\t export  greeting = &#34;\u00a1hola&#34;\t echo  &#34; $ ${greeting} , bash!&#34;\n  What else is possible? Can I use other programming languages as the shell? Isit possible to write in-line Python in a  Makefile?\n     Notice that there is a variable  .ONESHELL being set. Normally,  make willevaluate each command in a separate shell meaning that, in this example, greeting would be undefined in the second line. Adding  .ONESHELL to the topof your  Makefile, as recommended by  someone else whose last name begins withDavis-* and blogs about  make,causes multi-line code in the Make directive to be evaluated in a single callto Python.\n  What about writing R in-line in a Makefile? Note the addition of  .SHELLFLAGS.By default,  make runs  SHELL -c &#34;your\\nscript\\nhere&#34; which is not compatibleR. To run a script in-line from a command in R, you use  -e:\n   Now you can write a pipeline that combines R and Python in a single file \ud83c\udf89\n  Data analysis pipelines often have adventurousdependencies. Docker made all of that a lot easier but writing  docker run ...can be cumbersome. What if we could make Docker the interpreter and writecommands to be executed inside the container in-line as well?\n docker :  .SHELLFLAGS = run --volume $(shell pwd):/workdir --rm --workdir /workdir --entrypoint /bin/bash ubuntu -c docker :  SHELL := docker docker :\t echo  &#34;hello,  $$ (uname -a)!&#34;\n Again, this is possible. Running  make docker will run  echo ... in a Dockercontainer running Ubuntu. Note the  --volume flag which will mount the currentworking directory as the container\u2019s working directory meaning that files canbe read/created between your local filesystem and that of the container. Sobuild artifacts can be shared between make directives.\n hello, Linux 453c728113d6 4.19.76-linuxkit #1 SMP Fri Apr 3 15:53:26 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux!\n  This started as an experiment to see what is possible with  make. But it wasmotivated by a real world problem: I often need to combine tools acrossprogramming languages and environments to run data analysis pipelines. I liketo automate things and  make is a great tool for doing so. Having everythingin-line is more readable and having everything in a single file means that Ihave to jump between fewer tabs to understand the pipeline itself.\n The ability to write commands that get executed in Docker means that I have tospend less time figuring out how to get a bunch of dependencies installed in asingle container which becomes increasingly difficult as the number ofdependencies increases (especially if you work in Bioinformatics).\n  note: Some of these features only work on  make 4.+ which I installedusing  Homebrew. These examples do not work using  make 3.xwhich is comes with macOS Catalina.\n .ONESHELL : .SILENT : main : \\ \tpython \\ \truby \\ \tR \\ \tbash \\ \tdocker docker :  .SHELLFLAGS = run --rm --entrypoint /bin/bash ubuntu -c docker :  SHELL := docker docker :\t echo  &#34;hello,  $$ (uname -a)!&#34; python :  SHELL := python3 python :\tgreeting  =  &#34;hello&#34;\tprint (f &#34;{greeting}, python!&#34; ) ruby :  .SHELLFLAGS := -e ruby :  SHELL := ruby ruby :\tgreeting  =  &#34;labas&#34;\tputs  &#34;#{greeting}, ruby!&#34; R :  .SHELLFLAGS := -e R :  SHELL := Rscript R :\tgreeting  =  &#34;bonjour&#34;\tmessage (paste0 (greeting,  &#34;, R!&#34; )) bash :  .SHELLFLAGS := -euo pipefail -c bash :  SHELL := bash bash :\t export  greeting = &#34;\u00a1hola&#34;\t echo  &#34; $ ${greeting} , bash!&#34;", "posttime": "2020-05-16 01:11:57", "source_domain": "news.ycombinator.com", "source_name": "Hacker News", "tags": "\u751f\u6210,polyglot,shell", "title": "\u591a\u8bed\u8a00\u751f\u6210\u6587\u4ef6", "title_en": "Polyglot Makefiles", "transed": 1, "url": "http://agdr.org/2020/05/14/Polyglot-Makefiles.html", "via": "", "real_tags": ["\u751f\u6210", "polyglot", "shell"]}, {"category": "", "categoryclass": "", "imagename": "", "infoid": 1002263, "ip": "", "isanchordig": 1, "ischecked": 1, "isdelete": 0, "isneo": 1, "mark": "", "name": "", "note": "\u8655\u7406\u9019\u500b\u9080\u8acb\u6642\u767c\u751f\u554f\u984c\uff0c\u6211\u5011\u6b63\u76e1\u5feb\u4fee\u5fa9.", "note_en": "\u8655\u7406\u9019\u500b\u9080\u8acb\u6642\u767c\u751f\u554f\u984c\uff0c\u6211\u5011\u6b63\u76e1\u5feb\u4fee\u5fa9\u3002", "posttime": "2020-05-16 01:11:25", "source_domain": "news.ycombinator.com", "source_name": "Hacker News", "tags": "\u8bed\u97f3,efficient,\u767c\u751f", "title": "\u90e8\u7f72\u5728CPU\u4e0a\u7684\u9ad8\u6548\u5b9e\u65f6\u6587\u672c\u8bed\u97f3\u8f6c\u6362\u7cfb\u7edf", "title_en": "A highly efficient, real-time text-to-speech system deployed on CPUs", "transed": 1, "url": "https://ai.facebook.com/blog/a-highly-efficient-real-time-text-to-speech-system-deployed-on-cpus/", "via": "", "real_tags": ["\u8bed\u97f3", "efficient", "\u767c\u751f"]}, {"category": "", "categoryclass": "", "imagename": "d435bb146262405ab20396b9bba1db4c.png", "infoid": 1002262, "ip": "", "isanchordig": 1, "ischecked": 1, "isdelete": 0, "isneo": 1, "mark": "", "name": "", "note": "\u4eca\u5e74\u53ef\u80fd\u662f\u201c\u684c\u9762Linux\u201d\u7684\u4e00\u5e74\uff0c\u56fd\u5185\u6709\u5982\u6b64\u591a\u7684\u5de5\u7a0b\u5e08\u5e0c\u671b\u4e3a\u5f00\u6e90\u9879\u76ee\u505a\u51fa\u8d21\u732e\u3002\n\u8ba9\u6211\u4eec\u5148\u6765\u770b\u770b\u76ee\u524d\u524d\u56db\u4e2a\u53d1\u884c\u7248\u7684\u684c\u9762\u788e\u7247\u6709\u591a\u6df1\uff1a\n\u6839\u636e\u4e0a\u9762\u7684\u5217\u8868\uff0c\u6211\u4eec\u6709\u56db\u4e2a\u53d1\u884c\u7248\u548c\u5341\u51e0\u79cd\u684c\u9762\u73af\u5883\u7684\u603b\u4f53\u98ce\u683c\uff01\n\u5f00\u53d1\u4eba\u5458\u8d44\u6e90\u7684\u788e\u7247\u5316\u662f\u8fd9\u4e2a\u95ee\u9898\u7684\u6838\u5fc3\uff0c\u8fd9\u4e9b\u8d44\u6e90\u5df2\u7ecf\u53d7\u5230\u9650\u5236\uff0c\u5e76\u4f9d\u8d56\u4e8e\u6838\u5fc3\u5de5\u4f5c\u4e4b\u5916\u7684\u5949\u732e\u7cbe\u795e\u3002\u6765\u81ea\u5355\u4e00\u5b9e\u4f53\u7684\u6574\u5408\u3001\u91cd\u70b9\u548c\u65b9\u5411\u53ef\u4ee5\u771f\u6b63\u4ee5\u684c\u9762Linux\u7684\u8d28\u91cf\u548c\u7cbe\u81f4\u63a8\u52a8\u53d1\u5c55\u3002\n\u8981\u8ba9\u56e2\u961f\u53d1\u6325\u4f5c\u7528\uff0c\u5f00\u53d1\u4eba\u5458\u9700\u8981\u611f\u89c9\u81ea\u5df1\u662f\u82f1\u96c4\u3002\u4ed6\u4eec\u60f3\u8981\u548c\u7528\u6237\u4e00\u6837\u7684\u4e1c\u897f\uff0c\u4ed6\u4eec\u662f\u7528\u6237\uff0c\u4ed6\u4eec\u4ece\u4e00\u5f00\u59cb\u5c31\u662f\u201c\u552f\u4e00\u201d\u7684\u7528\u6237\u3002\u5728\u67d0\u4e2a\u9636\u6bb5\uff0c\u4ed6\u4eec\u51b3\u5b9a\u53c2\u4e0e\u8fdb\u6765\uff0c\u5e76\u5f00\u59cb\u6295\u5165\u65f6\u95f4\u3001\u7cbe\u529b\u548c\u60c5\u611f\u6765\u6539\u8fdb\u6211\u4eec\u7684\u9879\u76ee\u3002\u4ed6\u4eec\u6700\u9700\u8981\u7684\u662f\u652f\u6301\u548c\u5e78\u798f\u3002\u4ed6\u4eec\u9700\u8981\u53cd\u9988\u548c\u4fe1\u606f\u6765\u7406\u89e3\u9519\u8bef\u6216\u529f\u80fd\u8bf7\u6c42\uff0c\u5f53\u4ed6\u4eec\u5b8c\u6210\u5b9e\u73b0\u65f6\uff0c\u4ed6\u4eec\u9700\u8981\u611f\u89c9\u5230\u81ea\u5df1\u662f\u82f1\u96c4\uff0c\u4ed6\u4eec\u786e\u5b9e\u662f\u8fd9\u6837\u505a\u7684\uff0c\u8fd9\u662f\u4ed6\u4eec\u771f\u6b63\u5728\u8fd9\u91cc\u7684\u90e8\u5206\u539f\u56e0\u3002\n\u6211\u53ef\u4ee5\u5411\u4ed6\u4eec\u5c55\u793a\u4e0a\u4e2a\u6708\u6709500\u4eba\u6350\u6b3e\uff0c\u6211\u53ef\u4ee5\u8f6c\u53d1\u7535\u5b50\u90ae\u4ef6\u7ed9\u56e2\u961f\uff0c\u4eba\u4eec\u544a\u8bc9\u6211\u4ed6\u4eec\u6709\u591a\u559c\u6b22Linux Mint\uff0c\u6211\u53ef\u4ee5\u544a\u8bc9\u4ed6\u4eec\u4ed6\u4eec\u6b63\u5728\u53d1\u6325\u4f5c\u7528\uff0c\u4f46\u6ca1\u6709\u4ec0\u4e48\u6bd4\u76f4\u63a5\u4e0e\u5feb\u4e50\u7684\u7528\u6237\u4e92\u52a8\uff0c\u770b\u5230\u7b2c\u4e00\u624b\u7684\u4eba\u5bf9\u4f60\u7684\u5de5\u4f5c\u611f\u5230\u9ad8\u5174\u66f4\u597d\u7684\u4e86\u3002\u6211\u4eec\u7684\u793e\u533a\u5982\u4f55\u4e0e\u6211\u4eec\u7684\u5f00\u53d1\u4eba\u5458\u4e92\u52a8\uff0c\u5bf9\u4e8e\u4ed6\u4eec\u7684\u5de5\u4f5c\u3001\u4ed6\u4eec\u7684\u5feb\u4e50\u548c\u4ed6\u4eec\u7684\u52a8\u529b\u6765\u8bf4\u90fd\u662f\u5173\u952e\u3002-\u514b\u83b1\u95e8\u7279\u00b7\u52d2\u83f2\u535a\u5c14(Clement Lefebvre)\uff0cLinux\u94f8\u5e01\u9879\u76ee\u8d1f\u8d23\u4eba\u3002\nFlatpak\u5df2\u7ecf\u5f00\u59cb\u5411\u5e94\u7528\u7a0b\u5e8f\u7684\u5355\u4e00\u5206\u53d1\u673a\u5236\u8fd9\u4e2a\u65b9\u5411\u8fc8\u8fdb\uff0c\u4f46\u6709\u4eba\u53ef\u80fd\u4f1a\u8bf4\uff0c\u8fd9\u662f\u788e\u7247\u5316\u7684\u53cc\u91cd\u4ea7\u7269\u3002\n\u5728Chromebook\u548c\u865a\u62df\u5316/Web\u5e94\u7528\u7684\u4e16\u754c\u91cc\uff0c\u5b9a\u5236\u548c\u591a\u79cd\u53e3\u5473\u7684\u9700\u6c42\u6b63\u5728\u51cf\u5c11-\u6211\u4eec\u5f88\u597d\u5730\u4fdd\u6301\u4e86\u6d4f\u89c8\u5668\u7684\u5e73\u7a33\u8fd0\u884c\u3002", "note_en": "This could be the year for \u201cDesktop Linux\u201d with so many engineers at home looking to  contribute to open source projects.\n  Let\u2019s start by looking at how deep the desktop fragmentation goes with  just the  top four distributions at this time:\n  Given the list above we have a four distributions and more than a dozen total flavours of a desktop environment!\n The fragmentation of developer resources which are already  constrained and rely on dedication outside of their core employment is central to this issue. Consolidation, focus and direction from a single entity  could really move the needle with the quality and polish of desktop linux.\n For a team to work, developers need to feel like heroes. They want the same things as users, they are users, they were \u201conly\u201d users to start with. At some stage they decide to get involved and they start investing time, efforts and emotions into improving our project. What they\u2019re looking for the most is support and happiness. They need feedback and information to understand bugs or feature requests and when they\u2019re done implementing something, they need to feel like heroes, they literally do, that\u2019s part of the reason they\u2019re here really.\n I can show them 500 people donated money last month, I can forward emails to the team where people tell me how much they love Linux Mint, I can tell them they\u2019re making a difference but there\u2019s nothing like interacting directly with a happy user, seeing first-hand somebody be delighted with what you worked on. How our community interacts with our developers is key, to their work, to their happiness and to their motivation. \u2014 Clement Lefebvre, leader of the Linux Mint project.\n Flatpak have started the initiative to move in this direction of single distribution mechanism for apps, but one could argue this is a biproduct of fragmentation.\n In a world of Chromebooks and virtualized/web apps, the need for customization and multiple flavours is dwindling \u2014 we are good with the browser running smoothly.", "posttime": "2020-05-16 01:10:47", "source_domain": "news.ycombinator.com", "source_name": "Hacker News", "tags": "linux,\u684c\u9762", "title": "\u684c\u9762Linux-\u5355\u4e2a\u53d1\u884c\u7248\u7684\u60c5\u51b5", "title_en": "Desktop Linux \u2013 The Case for a Single Distro", "transed": 1, "url": "https://medium.com/@robsandhu/desktop-linux-the-case-for-a-single-distro-2dac8b2b8c8e", "via": "", "real_tags": ["linux", "\u684c\u9762"]}]